{"version":3,"sources":["b/member_list.js"],"names":["memberto","obj","_hmt","push","c","$","attr","url_val","location","protocol","host","QFPAY","call","uri","cb","console","log","ret","href","require","yanzheng","ajax_rule","scroll_more","if_menu","add_load_img","Vue","el","data","searchkey","members_all","members","members_count","members_pos","apiUrl","getdata","pos","count","mounted","this","get_members","get_moredata","updated","scroll_data","body_height","Math","floor","height","toFixed","methods","member_ser","key","length","filter","member","name","indexOf","mobile","vm","$http","get","before","show","then","response","hide","data_return","JSON","parse","respcd","slice","nomoredata_show","window","setTimeout","nomoredata_hide","nomor_show","scroll_if","respmsg","html","resperr","catch"],"mappings":"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","file":"../../../js/b/member_list.js","sourcesContent":["'use strict';\n\n//点击会员列表\nfunction memberto(obj) {\n    _hmt.push(['_trackEvent', 'member', 'click', 'member_detail']);\n    var c = $(obj).attr('data-c');\n    var url_val = location.protocol + '//' + location.host + '/prepaid/v1/page/b/members/detail.html?c=' + c;\n    if (typeof QFPAY !== \"undefined\") {\n        QFPAY.call('openUri', {\n            uri: url_val\n        }, function (cb) {\n            console.log(cb.ret);\n        });\n    } else {\n        location.href = url_val;\n    }\n}\nrequire(['../require-config2'], function () {\n    require([\"zepto\", \"yanzheng\", \"ajax_rule\", \"scroll_more\", \"if_menu\"], function ($, yanzheng, ajax_rule, scroll_more, if_menu) {\n        $(function () {\n            //设置菜单空---取消了native的引用\n            // var menu_data = { menus: [] };\n            // native.setNavMenu(menu_data, function(cb) {\n            //     console.log(cb.ret);\n            // });\n            //添加图标和没有更多文字提示\n            scroll_more.add_load_img('.js_member_list');\n            //滚动加载-----会员信息----------------------------------------------------------\n            var demo = new Vue({\n                el: '.js_member_detail',\n                data: {\n                    searchkey: '',\n                    members_all: '',\n                    members: '',\n                    members_count: 10,\n                    members_pos: 10,\n                    apiUrl: location.protocol + '//' + location.host + '/prepaid/v1/api/b/members',\n                    getdata: {\n                        pos: 0,\n                        count: 10000\n                    }\n                },\n                mounted: function mounted() {\n                    this.get_members(); //获取网络全部数据数据\n                    scroll_more.scroll_more(this.get_moredata);\n                },\n                updated: function updated() {\n                    scroll_more.scroll_data.body_height = Math.floor($('body').height()).toFixed(0);\n                    console.log('AJAX:body_height==' + scroll_more.scroll_data.body_height);\n                },\n                methods: {\n                    member_ser: function member_ser(members) {\n                        var key = this.searchkey;\n                        if (members.length <= 0) {\n                            return false;\n                        } else {\n                            return members.filter(function (member) {\n                                return member.name.indexOf(key) != '-1' || member.mobile.indexOf(key) != '-1';\n                            });\n                        }\n                    },\n                    get_members: function get_members() {\n                        var vm = this;\n                        this.$http.get(this.apiUrl, {\n                            before: function before() {\n                                $('#load_small_bg').show();\n                            }\n                        }).then(function (response) {\n                            $('#load_small_bg').hide();\n                            var data_return = JSON.parse(response.data);\n                            if (data_return.respcd == '0000') {\n                                vm.members_all = data_return.data;\n                                //console.log(vm.members_all.length);\n                                if (vm.members_all.length == 0) {\n                                    $('.js_li_none').show();\n                                    $('.js_member_detail').hide();\n                                    return false;\n                                }\n                                $('.js_li_none').hide();\n                                $('.js_member_detail').show();\n                                vm.members = vm.members_all.slice(0, vm.members_pos);\n                                if (vm.members_all.length - vm.members_pos <= 0) {\n                                    scroll_more.nomoredata_show();\n                                    window.setTimeout(scroll_more.nomoredata_hide, 2000);\n                                    scroll_more.scroll_data.nomor_show = false;\n                                    scroll_more.scroll_data.scroll_if = false;\n                                } else {\n                                    vm.members_pos += vm.members_count;\n                                    scroll_more.scroll_data.scroll_if = true;\n                                }\n                                scroll_more.scroll_data.body_height = Math.floor($('body').height()).toFixed(0);\n                                $('.load').hide();\n                                //console.log('AJAX:scroll_if==' + scroll_more.scroll_data.scroll_if);\n                                //console.log('AJAX:nomor_show==' + scroll_more.scroll_data.nomor_show);\n                            } else {\n                                $('#alert_alert').show();\n                                $('.zheceng').show();\n                                if (data_return.respmsg) {\n                                    $('#alert_alert .alert_con_br').html(data_return.respmsg);\n                                } else {\n                                    $('#alert_alert .alert_con_br').html(data_return.resperr);\n                                }\n                            }\n                        }, function (response) {\n                            $('#load_small_bg').hide();\n                            $('#alert_alert').show();\n                            $('.zheceng').show();\n                            $('#alert_alert .alert_con_br').html('网络超时!');\n                        }).catch(function (response) {\n                            $('#load_small_bg').hide();\n                            //console.log(response)\n                        });\n                    },\n                    get_moredata: function get_moredata() {\n                        this.members = this.members_all.slice(0, this.members_pos);\n                        console.log(this.members.length);\n                        if (this.members_all.length - this.members_pos <= 0) {\n                            scroll_more.nomoredata_show();\n                            window.setTimeout(scroll_more.nomoredata_hide, 2000);\n                            scroll_more.scroll_data.nomor_show = false;\n                            scroll_more.scroll_data.scroll_if = false;\n                        } else {\n                            this.members_pos += this.members_count;\n                            scroll_more.scroll_data.scroll_if = true;\n                        }\n                        $('.load').hide();\n                        console.log('AJAX:scroll_if==' + scroll_more.scroll_data.scroll_if);\n                        console.log('AJAX:nomor_show==' + scroll_more.scroll_data.nomor_show);\n                    }\n                }\n            });\n        });\n    });\n});"]}