"use strict";function delete_rule(e){var t=$(".js_rule dd").length-0;2==t&&($(e).parents("dd").remove(),$(".js_rule dd i.js_ruledelete").remove()),$(e).parents("dd").remove(),$(".js_rule_error").removeClass("span_tips"),$(".js_add_activity").find(".add_rule").css("display","inline-block"),$(".js_add_activity").find(".add_rule_no").css("display","none")}require(["../require-config"],function(){require(["zepto","yanzheng","ajax_rule","localstorage","iosselect","date_get","alert_word","if_menu"],function($,e,t,s,a,i,n,r){$(function(){function d(){var e=$(".js_startime"),t=$(".js_endtime"),s='<i class="ic_tips"></i>';if(e.val()&&t.val()){var a=e.attr("data-year"),i=e.attr("data-month"),n=e.attr("data-day"),r=t.attr("data-year"),d=t.attr("data-month"),l=t.attr("data-day"),o=a+"/"+i+"/"+n+" 00:00:00",_=r+"/"+d+"/"+l+" 23:59:59",u=new Date(o).getTime(),m=new Date(_).getTime(),p=new Date(c).getTime();if(!e.hasClass("grey")){if(u-p<0)return $(".js_timetips").addClass("error_tips").find("span").html(s+"开始不能比今天早"),!1;$(".js_timetips").removeClass("error_tips").find("span").html("")}m-u>31536e6?$(".js_timetips").addClass("error_tips").find("span").html(s+"时间范围在365天之内"):m-u>=0?$(".js_timetips").removeClass("error_tips").find("span").html(""):$(".js_timetips").addClass("error_tips").find("span").html(s+"结束时间不能比开始时间早")}else $(".js_timetips").addClass("error_tips").find("span").html(s+"时间范围在365天之内")}function l(e){var t=e.countdown_day;t>0?($(".js_startime").removeAttr("disabled").removeClass("grey"),$(".js_tel").removeAttr("disabled").removeClass("grey")):($(".js_startime").attr("disabled","disabled").addClass("grey"),$(".js_tel").attr("disabled","disabled").addClass("grey"));var s=e.rules,a=e.merchant_name,i=e.info,n=i.start_time,r=i.end_time,d=i.mch_mobile,l=i.desc;$(".js_shopname").val(a),$(".js_tel").val(d),$(".js_endtime").focus(),$(".js_note").val(l);var _=l.length-0;$(".js_wordtip span").text(40-_);var u=n.substr(0,10),c=u.split("-");u&&($(".js_startime").data("year",c[0]),$(".js_startime").data("month",o(c[1])),$(".js_startime").data("day",o(c[2])),$(".js_startime").val(o(c[1])+"月"+o(c[2])+"日"),$("#startime").val(c[0]+"-"+o(c[1])+"-"+o(c[2])));var m=r.substr(0,10),p=m.split("-");if(m&&($(".js_endtime").data("year",p[0]),$(".js_endtime").data("month",o(p[1])),$(".js_endtime").data("day",o(p[2])),$(".js_endtime").val(o(p[1])+"月"+o(p[2])+"日"),$("#endtime").val(p[0]+"-"+o(p[1])+"-"+o(p[2]))),!s)return!1;for(var j=0;j<s.length;j++){var h,v=(s[j].pay_amt/100).toFixed(0),f=(s[j].present_amt/100).toFixed(0),y=s[j].grid_index;h=t>0?'<dd data-index="'+y+'">储值<input class="text text_short js_chu js_storule" type="tel" value="'+v+'" name="chu" />元送<input class="text text_short js_song js_storule" type="tel" value="'+f+'" name="song" />元<i class="delete js_ruledelete" onclick="delete_rule(this)"></i></dd>':'<dd data-index="'+y+'">储值<input class="text text_short js_chu js_storule" type="tel" value="'+v+'" name="chu" />元送<input class="text text_short js_song js_storule" type="tel" value="'+f+'" name="song" />元</dd>',$(".js_rule").append(h)}return t>0?($(".js_storule").removeAttr("disabled").removeClass("grey"),$(".js_add_activity").attr("data-click","1"),s.length<=1&&$(document).find(".js_rule dd").eq(0).find("i.js_ruledelete").remove(),void(s.length>=4?($(".js_rule").find(".add_rule").css("display","none"),$(".js_rule").find(".add_rule_no").css("display","inline-block")):($(".js_rule").find(".add_rule").css("display","inline-block"),$(".js_rule").find(".add_rule_no").css("display","none")))):($(".js_storule").attr("disabled","disabled").addClass("grey"),$(".js_add_activity").attr("data-click","0"),$(".js_rule").find(".add_rule").css("display","none"),$(".js_rule").find(".add_rule_no").css("display","inline-block"),!1)}function o(e){return e<10?e.substr(-1):e}function _(e){$(".js_shopname").val(e.merchant_name)}function u(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),s=window.location.search.substr(1).match(t);return null!=s?unescape(s[2]):null}var c=i.nowYear+"/"+i.nowMonth+"/"+i.nowDate+" 00:00:00";$(document).ready(function(){n.toast_data_short("body","金额需大于0且不超过2000");t.ajax_rule("/prepaid/v1/api/b/merchant_info","GET","json","",".zheceng",_);var e=new Object,s=u("activity_id");s&&(e.activity_id=s),t.ajax_rule("/prepaid/v1/api/b/activity_detail","GET","json",e,".zheceng1",l)}),$(".js_startime").on("click",function(){var e=document.querySelector(".js_startime"),t=e.dataset.year,s=e.dataset.month,n=e.dataset.day;new a(3,[i.yearData,i.monthData,i.dateData],{container:".ios_select_container",title:"选择开始时间",itemHeight:50,itemShowCount:3,relation:[1,1,0,0],oneLevelId:t,twoLevelId:s,threeLevelId:n,callback:function(t,s,a){e.dataset.year=t.id,e.dataset.month=s.id,e.dataset.day=a.id,e.value=s.id+"月"+a.id+"日",$("#startime").val(t.id+"-"+s.id+"-"+a.id)}})}),$(".js_endtime").on("click",function(){var e=document.querySelector(".js_endtime"),t=e.dataset.year,s=e.dataset.month,n=e.dataset.day;new a(3,[i.yearData,i.monthData,i.dateData],{container:".ios_select_container",title:"选择结束时间",itemHeight:50,itemShowCount:3,relation:[1,1,0,0],oneLevelId:t,twoLevelId:s,threeLevelId:n,callback:function(t,s,a){e.dataset.year=t.id,e.dataset.month=s.id,e.dataset.day=a.id,e.value=s.id+"月"+a.id+"日",$("#endtime").val(t.id+"-"+s.id+"-"+a.id)}})}),$(".js_add_activity").on("click",function(){if("1"!=$(this).attr("data-click"))return!1;var e=$(".js_rule dd").length-0,t='<dd data-index="">储值<input class="text text_short js_chu js_storule" type="tel" value="" name="pay_amt" />元送<input class="text text_short js_song js_storule" type="tel" value="" name="present_amt" />元<i class="delete js_ruledelete" onclick="delete_rule(this)"></i></dd>';e<=3?(1==e&&$(".js_rule dd").append('<i class="delete js_ruledelete" onclick="delete_rule(this)"></i>'),3==e&&($(this).find(".add_rule").css("display","none"),$(this).find(".add_rule_no").css("display","inline-block")),$(".js_rule").append(t),$(".js_rule_error").removeClass("span_tips")):$(".js_rule_error").addClass("span_tips")}),$(document).on("input",".js_storule",function(){var e=$(this).val(),t=e.replace(/[^\d]/g,"");if(0==t.length)return $(this).val(""),!1;if(1==t.length&&"0"==t)return $(this).val(""),!1;var s=t.split(".")[0],a=s.substr(0,1);if("0"==a&&(s=s.substr(1)),s.length>4&&(s=s.substr(0,4)),t.split(".").length>1){var i=t.split(".")[1].substr(0,2);t=s-0+"."+i}else t=s-0;$(this).val(t)}),$(".js_note").on("input",function(){var e=$(this).val(),t=e.length-0;return t<=40&&void $(".js_wordtip").find("span").text(40-t)}),(window.navigator.appVersion.match(/iphone/gi)||/Mac OS X/i.test(navigator.userAgent))&&($(".js_note").on({focus:function(){$(".section_footer").hide()},blur:function(){$(".section_footer").show()}}),$(".js_tel").on({focus:function(){$(".section_footer").hide()},blur:function(){$(".section_footer").show()}}),$(document).on("focus",".js_storule",function(){$(".section_footer").hide()}),$(document).on("blur",".js_storule",function(){$(".section_footer").show()})),$(".js_addactivity_sub").on("click",function(){e.tel_activity(".js_tel"),e.name_test(".js_note",0,40),d(),$(".js_storule").each(function(){e.numprice_test(this,0,4,2e3)}),$(".js_storule").each(function(){if($(this).hasClass("error_tips"))return n.alert_word_show_short(),!1});var t=$(".error_tips").length;if(t>0)return!1;s.set_storage();for(var a=[],i=$(".js_rule dd").length,l=0;l<i;l++){var o=$(".js_rule dd").eq(l),_=(o.find(".js_chu").attr("name"),o.find(".js_chu").val()),u=(o.find(".js_song").attr("name"),o.find(".js_song").val()),c={grid_index:l+1,pay_amt:100*_,present_amt:100*u};a.push(c)}s.setone_storage("rules",JSON.stringify(a));var m=location.protocol+"//"+location.host+"/prepaid/v1/page/b/activity_preview.html?edit=mend";r.goto_url(m)})})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImIvYWx0ZXJfYWN0aXZpdHkuanMiXSwibmFtZXMiOlsiZGVsZXRlX3J1bGUiLCJvYmoiLCJkZF9saXN0IiwiJCIsImxlbmd0aCIsInBhcmVudHMiLCJyZW1vdmUiLCJyZW1vdmVDbGFzcyIsImZpbmQiLCJjc3MiLCJyZXF1aXJlIiwieWFuemhlbmciLCJhamF4X3J1bGUiLCJsb2NhbHN0b3JhZ2UiLCJpb3NzZWxlY3QiLCJkYXRlX2dldCIsImFsZXJ0X3dvcmQiLCJpZl9tZW51IiwidGltZV9hcmVhIiwic3RhcnRpbWUiLCJlbmR0aW1lIiwidGlwc19waWMiLCJ2YWwiLCJzX3llYXIiLCJhdHRyIiwic19tb250aCIsInNfZGF5IiwiZV95ZWFyIiwiZV9tb250aCIsImVfZGF5Iiwic190aW1lIiwiZV90aW1lIiwic190aW1lX3MiLCJEYXRlIiwiZ2V0VGltZSIsImVfdGltZV9zIiwidG9kYXlfdGltZV9zIiwidG9kYXlfdGltZXMiLCJoYXNDbGFzcyIsImFkZENsYXNzIiwiaHRtbCIsImdldF9hbGxkYXRhIiwicmV0dXJuX2RhdGEiLCJjb3VudGRvd24iLCJjb3VudGRvd25fZGF5IiwicmVtb3ZlQXR0ciIsInJ1bGVzIiwibWVyY2hhbnRfbmFtZSIsImluZm8iLCJzdGFydGltZV9kYXRhIiwic3RhcnRfdGltZSIsImVuZHRpbWVfZGF0YSIsImVuZF90aW1lIiwibWNoX21vYmlsZSIsImRlc2MiLCJmb2N1cyIsIndvcmR0aXAiLCJ0ZXh0Iiwic3Vic3RyIiwic3RhcnRpbWVfenUiLCJzcGxpdCIsImRhdGEiLCJudW1fY2hhbmdlIiwiZW5kdGltZV96dSIsImkiLCJkZF9kZXRhaWwiLCJjaHVfdmFsdWUiLCJwYXlfYW10IiwidG9GaXhlZCIsInNvbmdfdmFsdWUiLCJwcmVzZW50X2FtdCIsImluZGV4X3ZhbHVlIiwiZ3JpZF9pbmRleCIsImFwcGVuZCIsImRvY3VtZW50IiwiZXEiLCJudW0iLCJnZXRfc2hvcG5hbWUiLCJnZXRRdWVyeVBhcmFtU3RyaW5nIiwibmFtZSIsInJlZyIsIlJlZ0V4cCIsInIiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsIm1hdGNoIiwidW5lc2NhcGUiLCJub3dZZWFyIiwibm93TW9udGgiLCJub3dEYXRlIiwicmVhZHkiLCJ0b2FzdF9kYXRhX3Nob3J0IiwiT2JqZWN0IiwiYWN0aXZpdHlJZCIsImFjdGl2aXR5X2lkIiwib24iLCJzaG93RG9tIiwicXVlcnlTZWxlY3RvciIsInllYXIiLCJkYXRhc2V0IiwibW9udGgiLCJkYXkiLCJ5ZWFyRGF0YSIsIm1vbnRoRGF0YSIsImRhdGVEYXRhIiwiY29udGFpbmVyIiwidGl0bGUiLCJpdGVtSGVpZ2h0IiwiaXRlbVNob3dDb3VudCIsInJlbGF0aW9uIiwib25lTGV2ZWxJZCIsInR3b0xldmVsSWQiLCJ0aHJlZUxldmVsSWQiLCJjYWxsYmFjayIsInllYXJfZGF0YSIsIm1vbnRoX2RhdGEiLCJkYXlfZGF0YSIsImlkIiwidmFsdWUiLCJ0aGlzIiwiY3Jhc2hfbm93X3N0ciIsImNyYXNoX25vd19zdHJlbmQiLCJyZXBsYWNlIiwiY3Jhc2hfZW5kX3oiLCJjcmFzaF9lbmRfel9maXJzdCIsImNyYXNoX2VuZF9sIiwibGVuX3ZhbCIsImxlbiIsIm5hdmlnYXRvciIsImFwcFZlcnNpb24iLCJ0ZXN0IiwidXNlckFnZW50IiwiaGlkZSIsImJsdXIiLCJzaG93IiwidGVsX2FjdGl2aXR5IiwibmFtZV90ZXN0IiwiZWFjaCIsIm51bXByaWNlX3Rlc3QiLCJhbGVydF93b3JkX3Nob3dfc2hvcnQiLCJlcnJvcl9sZW4iLCJzZXRfc3RvcmFnZSIsImNodV9sZW4iLCJjaHVfaHRtbCIsImNodV92YWwiLCJzb25nX3ZhbCIsInJ1bGUiLCJwdXNoIiwic2V0b25lX3N0b3JhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwidXJsIiwicHJvdG9jb2wiLCJob3N0IiwiZ290b191cmwiXSwibWFwcGluZ3MiOiJZQUNBLFNBQVNBLGFBQVlDLEdBQ2pCLEdBQUlDLEdBQVVDLEVBQUUsZUFBZUMsT0FBUyxDQUN6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LEdBQUcsUUFBUyxXQUNqQ3JGLEVBQVM2SCxhQUFhLFdBQ3RCN0gsRUFBUzhILFVBQVUsV0FBWSxFQUFHLElBQ2xDdkgsSUFDQWYsRUFBRSxlQUFldUksS0FBSyxXQUNsQi9ILEVBQVNnSSxjQUFjbkIsS0FBTSxFQUFHLEVBQUcsT0FFdkNySCxFQUFFLGVBQWV1SSxLQUFLLFdBQ2xCLEdBQUl2SSxFQUFFcUgsTUFBTWxGLFNBQVMsY0FFakIsTUFEQXRCLEdBQVc0SCx5QkFDSixHQUdmLElBQUlDLEdBQVkxSSxFQUFFLGVBQWVDLE1BQ2pDLElBQUl5SSxFQUFZLEVBQ1osT0FBTyxDQUdYaEksR0FBYWlJLGFBSWIsS0FBSyxHQUZEaEcsTUFDQWlHLEVBQVU1SSxFQUFFLGVBQWVDLE9BQ3RCNEQsRUFBSSxFQUFHQSxFQUFJK0UsRUFBUy9FLElBQUssQ0FDOUIsR0FBSWdGLEdBQVc3SSxFQUFFLGVBQWV3RSxHQUFHWCxHQUUvQmlGLEdBRFVELEVBQVN4SSxLQUFLLFdBQVdnQixLQUFLLFFBQzlCd0gsRUFBU3hJLEtBQUssV0FBV2MsT0FFbkM0SCxHQURXRixFQUFTeEksS0FBSyxZQUFZZ0IsS0FBSyxRQUMvQndILEVBQVN4SSxLQUFLLFlBQVljLE9BQ3JDNkgsR0FBUzNFLFdBQVlSLEVBQUksRUFBR0csUUFBbUIsSUFBVjhFLEVBQWUzRSxZQUF3QixJQUFYNEUsRUFDckVwRyxHQUFNc0csS0FBS0QsR0FFZnRJLEVBQWF3SSxlQUFlLFFBQVNDLEtBQUtDLFVBQVV6RyxHQUNwRCxJQUFJMEcsR0FBTXBFLFNBQVNxRSxTQUFXLEtBQU9yRSxTQUFTc0UsS0FBTyxvREFDckR6SSxHQUFRMEksU0FBU0giLCJmaWxlIjoiYi9hbHRlcl9hY3Rpdml0eS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8v5Yig6Zmk6KeE5YiZXG5mdW5jdGlvbiBkZWxldGVfcnVsZShvYmopIHtcbiAgICB2YXIgZGRfbGlzdCA9ICQoJy5qc19ydWxlIGRkJykubGVuZ3RoIC0gMDtcbiAgICBpZiAoZGRfbGlzdCA9PSAyKSB7XG4gICAgICAgIC8v5Yig6Zmk56ys5LiA5p2h5pWw5o2u5ZCO6Z2i55qE5Yig6Zmk5oyJ6ZKuXG4gICAgICAgICQob2JqKS5wYXJlbnRzKCdkZCcpLnJlbW92ZSgpO1xuICAgICAgICAkKCcuanNfcnVsZSBkZCBpLmpzX3J1bGVkZWxldGUnKS5yZW1vdmUoKTtcbiAgICB9XG4gICAgJChvYmopLnBhcmVudHMoJ2RkJykucmVtb3ZlKCk7XG4gICAgJCgnLmpzX3J1bGVfZXJyb3InKS5yZW1vdmVDbGFzcygnc3Bhbl90aXBzJyk7XG4gICAgJCgnLmpzX2FkZF9hY3Rpdml0eScpLmZpbmQoJy5hZGRfcnVsZScpLmNzcygnZGlzcGxheScsICdpbmxpbmUtYmxvY2snKTtcbiAgICAkKCcuanNfYWRkX2FjdGl2aXR5JykuZmluZCgnLmFkZF9ydWxlX25vJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbn1cbnJlcXVpcmUoWycuLi9yZXF1aXJlLWNvbmZpZyddLCBmdW5jdGlvbigpIHtcbiAgICByZXF1aXJlKFtcInplcHRvXCIsIFwieWFuemhlbmdcIiwgXCJhamF4X3J1bGVcIiwgXCJsb2NhbHN0b3JhZ2VcIiwgXCJpb3NzZWxlY3RcIiwgXCJkYXRlX2dldFwiLCBcImFsZXJ0X3dvcmRcIixcImlmX21lbnVcIl0sIGZ1bmN0aW9uKCQsIHlhbnpoZW5nLCBhamF4X3J1bGUsIGxvY2Fsc3RvcmFnZSwgaW9zc2VsZWN0LCBkYXRlX2dldCwgYWxlcnRfd29yZCxpZl9tZW51KSB7XG4gICAgICAgICQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvL+iuvue9ruiPnOWNleepui0tLeWPlua2iOS6hm5hdGl2ZeeahOW8leeUqDAxMDZcbiAgICAgICAgICAgIC8vIHZhciBtZW51X2RhdGEgPSB7IG1lbnVzOiBbXSB9O1xuICAgICAgICAgICAgLy8gbmF0aXZlLnNldE5hdk1lbnUobWVudV9kYXRhLCBmdW5jdGlvbihjYikge1xuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGNiLnJldCk7XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIHZhciB0b2RheV90aW1lcyA9IGRhdGVfZ2V0Lm5vd1llYXIgKyAnLycgKyBkYXRlX2dldC5ub3dNb250aCArICcvJyArIGRhdGVfZ2V0Lm5vd0RhdGUgKyAnIDAwOjAwOjAwJztcbiAgICAgICAgICAgIC8v6K6+572u5YKo5YC85rS75YqoLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy/liqDovb3mj5DnpLrlvLnmoYZcbiAgICAgICAgICAgICAgICBhbGVydF93b3JkLnRvYXN0X2RhdGFfc2hvcnQoJ2JvZHknLCAn6YeR6aKd6ZyA5aSn5LqOMOS4lOS4jei2hei/hzIwMDAnKTtcbiAgICAgICAgICAgICAgICAvL+iOt+WPluW6l+mTuuWQjeensFxuICAgICAgICAgICAgICAgIHZhciBkYXRhX3Nob3BuYW1lID0ge307XG4gICAgICAgICAgICAgICAgYWpheF9ydWxlLmFqYXhfcnVsZSgnL3ByZXBhaWQvdjEvYXBpL2IvbWVyY2hhbnRfaW5mbycsICdHRVQnLCAnanNvbicsICcnLCAnLnpoZWNlbmcnLCBnZXRfc2hvcG5hbWUpO1xuICAgICAgICAgICAgICAgIC8v6I635Y+W5Yid5aeL5YC8dG9kb1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbmV3IE9iamVjdCgpO1xuICAgICAgICAgICAgICAgIHZhciBhY3Rpdml0eUlkID0gZ2V0UXVlcnlQYXJhbVN0cmluZygnYWN0aXZpdHlfaWQnKTtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZpdHlJZCl7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuYWN0aXZpdHlfaWQgPSBhY3Rpdml0eUlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhamF4X3J1bGUuYWpheF9ydWxlKCcvcHJlcGFpZC92MS9hcGkvYi9hY3Rpdml0eV9kZXRhaWwnLCAnR0VUJywgJ2pzb24nLCBkYXRhLCAnLnpoZWNlbmcxJywgZ2V0X2FsbGRhdGEpO1xuICAgICAgICAgICAgICAgIC8v5rWL6K+V5pWw5o2uLS10b2RvLS3liKDpmaRcbiAgICAgICAgICAgICAgICAvLyByZXR1cm5fZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAvLyAgICAgXCJpbmZvXCI6IHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIFwic3RhcnRfdGltZVwiOiBcIjIwMTYtMDktMDIgMTE6MjI6MzNcIiwgLy8g5rS75Yqo5byA5aeL5pe26Ze0XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBcImVuZF90aW1lXCI6IFwiMjAxNy0wNy0wNiAyMjoyMjoyMlwiLCAvLyDmtLvliqjnu5PmnZ/ml7bpl7RcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIFwiYWN0aXZpdHlfaWRcIjogMTIzNDU2NywgLy8g5rS75YqoSUQs5ZSv5LiA5qCH5b+X5LiA5qyh5rS75YqoXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBcIm1jaF9tb2JpbGVcIjogXCIxMzAxMjM0OTg3NlwiLCAvLyDllYbmiLfogZTns7vnlLXor51cbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIFwiYWN0aXZlXCI6IDEsIC8vIOa0u+WKqOaYr+WQpuacieaViC4gMSDmnInmlYgsIDAg5peg5pWIKOWVhuaIt+S4u+WKqOWBnOatoilcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIFwiZGVzY1wiOiBcIua0u+WKqOivtOaYjlwiIC8vIOa0u+WKqOivtOaYjlxuICAgICAgICAgICAgICAgIC8vICAgICB9LFxuICAgICAgICAgICAgICAgIC8vICAgICBcInJ1bGVzXCI6IFsgLy8g5pyA5aSaNOadoSzoh7PlsJEx5p2hXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgXCJncmlkX2luZGV4XCI6IDEsIC8vIOWCqOWAvOinhOWImeagvOS9jTog55uu5YmN5Y+v6YCJOiAxLCAyLCAzLCA0XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgXCJwYXlfYW10XCI6IDUwMDAsIC8vIOaUr+S7mOmHkeminSwg5Y2V5L2NOiDliIZcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBcInByZXNlbnRfYW10XCI6IDUwMCwgLy8g6LWg6YCB6YeR6aKdLCDljZXkvY06IOWIhlxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIFwiZ3JpZF9pbmRleFwiOiAxLCAvLyDlgqjlgLzop4TliJnmoLzkvY06IOebruWJjeWPr+mAiTogMSwgMiwgMywgNFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIFwicGF5X2FtdFwiOiA1MDAwMCwgLy8g5pSv5LuY6YeR6aKdLCDljZXkvY06IOWIhlxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIFwicHJlc2VudF9hbXRcIjogNTAwMCwgLy8g6LWg6YCB6YeR6aKdLCDljZXkvY06IOWIhlxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIFwiZ3JpZF9pbmRleFwiOiAxLCAvLyDlgqjlgLzop4TliJnmoLzkvY06IOebruWJjeWPr+mAiTogMSwgMiwgMywgNFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIFwicGF5X2FtdFwiOiAxMDAwMCwgLy8g5pSv5LuY6YeR6aKdLCDljZXkvY06IOWIhlxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIFwicHJlc2VudF9hbXRcIjogMTAwMCwgLy8g6LWg6YCB6YeR6aKdLCDljZXkvY06IOWIhlxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSwgXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyAgICAgXCJncmlkX2luZGV4XCI6IDEsIC8vIOWCqOWAvOinhOWImeagvOS9jTog55uu5YmN5Y+v6YCJOiAxLCAyLCAzLCA0XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyAgICAgXCJwYXlfYW10XCI6IDY2MDAwLCAvLyDmlK/ku5jph5Hpop0sIOWNleS9jTog5YiGXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyAgICAgXCJwcmVzZW50X2FtdFwiOiA2MDAsIC8vIOi1oOmAgemHkeminSwg5Y2V5L2NOiDliIZcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIC8vIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgIF0sXG4gICAgICAgICAgICAgICAgLy8gICAgIFwiY291bnRkb3duXCI6IDE3MjgwMCwgLy8g5rS75Yqo6L+Y5pyJ5aSa5bCR56eS5byA5aeLLCDljZXkvY06IOenklxuICAgICAgICAgICAgICAgIC8vICAgICBcImNvdW50ZG93bl9kYXlcIjogMCwgLy8g5rS75Yqo6L+Y5pyJ5aSa5bCR5aSp5byA5aeLLCDljZXkvY06IOWkqS4g5ZCR5LiK5Y+W5pW0LCDlpoIxLjXlpKkgLT4gMuWkqVxuICAgICAgICAgICAgICAgIC8vIH07XG4gICAgICAgICAgICAgICAgLy8gZ2V0X2FsbGRhdGEocmV0dXJuX2RhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL+eCueWHu+W8gOWni+aXtumXtFxuICAgICAgICAgICAgJCgnLmpzX3N0YXJ0aW1lJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNob3dEb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanNfc3RhcnRpbWUnKTtcbiAgICAgICAgICAgICAgICB2YXIgeWVhciA9IHNob3dEb20uZGF0YXNldFsneWVhciddO1xuICAgICAgICAgICAgICAgIHZhciBtb250aCA9IHNob3dEb20uZGF0YXNldFsnbW9udGgnXTtcbiAgICAgICAgICAgICAgICB2YXIgZGF5ID0gc2hvd0RvbS5kYXRhc2V0WydkYXknXTtcblxuICAgICAgICAgICAgICAgIHZhciBiYW5rU2VsZWN0ID0gbmV3IGlvc3NlbGVjdCgzLCBbZGF0ZV9nZXQueWVhckRhdGEsIGRhdGVfZ2V0Lm1vbnRoRGF0YSwgZGF0ZV9nZXQuZGF0ZURhdGFdLCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogJy5pb3Nfc2VsZWN0X2NvbnRhaW5lcicsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6YCJ5oup5byA5aeL5pe26Ze0JyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbUhlaWdodDogNTAsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1TaG93Q291bnQ6IDMsXG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uOiBbMSwgMSwgMCwgMF0sXG4gICAgICAgICAgICAgICAgICAgIG9uZUxldmVsSWQ6IHllYXIsXG4gICAgICAgICAgICAgICAgICAgIHR3b0xldmVsSWQ6IG1vbnRoLFxuICAgICAgICAgICAgICAgICAgICB0aHJlZUxldmVsSWQ6IGRheSxcbiAgICAgICAgICAgICAgICAgICAgLy9zaG93TG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHllYXJfZGF0YSwgbW9udGhfZGF0YSwgZGF5X2RhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dEb20uZGF0YXNldFsneWVhciddID0geWVhcl9kYXRhLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0RvbS5kYXRhc2V0Wydtb250aCddID0gbW9udGhfZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dEb20uZGF0YXNldFsnZGF5J10gPSBkYXlfZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dEb20udmFsdWUgPSBtb250aF9kYXRhLmlkICsgJ+aciCcgKyBkYXlfZGF0YS5pZCArICfml6UnO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3N0YXJ0aW1lJykudmFsKHllYXJfZGF0YS5pZCArICctJyArIG1vbnRoX2RhdGEuaWQgKyAnLScgKyBkYXlfZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+iuvue9rue7k+adn+aXtumXtOeahOm7mOiupOaXtumXtC0t5byA5aeL5pe26Ze0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkKCcuanNfZW5kdGltZScpLmF0dHIoJ2RhdGEteWVhcicsIHllYXJfZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkKCcuanNfZW5kdGltZScpLmF0dHIoJ2RhdGEtbW9udGgnLCBtb250aF9kYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICQoJy5qc19lbmR0aW1lJykuYXR0cignZGF0YS1kYXknLCBkYXlfZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy/ngrnlh7vliLDmnJ/ml7bpl7RcbiAgICAgICAgICAgICQoJy5qc19lbmR0aW1lJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNob3dEb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanNfZW5kdGltZScpO1xuICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gc2hvd0RvbS5kYXRhc2V0Wyd5ZWFyJ107XG4gICAgICAgICAgICAgICAgdmFyIG1vbnRoID0gc2hvd0RvbS5kYXRhc2V0Wydtb250aCddO1xuICAgICAgICAgICAgICAgIHZhciBkYXkgPSBzaG93RG9tLmRhdGFzZXRbJ2RheSddO1xuXG4gICAgICAgICAgICAgICAgdmFyIGJhbmtTZWxlY3QgPSBuZXcgaW9zc2VsZWN0KDMsIFtkYXRlX2dldC55ZWFyRGF0YSwgZGF0ZV9nZXQubW9udGhEYXRhLCBkYXRlX2dldC5kYXRlRGF0YV0sIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiAnLmlvc19zZWxlY3RfY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfpgInmi6nnu5PmnZ/ml7bpl7QnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtSGVpZ2h0OiA1MCxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVNob3dDb3VudDogMyxcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpb246IFsxLCAxLCAwLCAwXSxcbiAgICAgICAgICAgICAgICAgICAgb25lTGV2ZWxJZDogeWVhcixcbiAgICAgICAgICAgICAgICAgICAgdHdvTGV2ZWxJZDogbW9udGgsXG4gICAgICAgICAgICAgICAgICAgIHRocmVlTGV2ZWxJZDogZGF5LFxuICAgICAgICAgICAgICAgICAgICAvL3Nob3dMb2FkaW5nOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oeWVhcl9kYXRhLCBtb250aF9kYXRhLCBkYXlfZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0RvbS5kYXRhc2V0Wyd5ZWFyJ10gPSB5ZWFyX2RhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RG9tLmRhdGFzZXRbJ21vbnRoJ10gPSBtb250aF9kYXRhLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0RvbS5kYXRhc2V0WydkYXknXSA9IGRheV9kYXRhLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0RvbS52YWx1ZSA9IG1vbnRoX2RhdGEuaWQgKyAn5pyIJyArIGRheV9kYXRhLmlkICsgJ+aXpSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjZW5kdGltZScpLnZhbCh5ZWFyX2RhdGEuaWQgKyAnLScgKyBtb250aF9kYXRhLmlkICsgJy0nICsgZGF5X2RhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8v54K55Ye75aKe5Yqg6KeE5YiZXG4gICAgICAgICAgICAkKCcuanNfYWRkX2FjdGl2aXR5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignZGF0YS1jbGljaycpICE9ICcxJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkZF9saXN0ID0gJCgnLmpzX3J1bGUgZGQnKS5sZW5ndGggLSAwO1xuICAgICAgICAgICAgICAgIHZhciBkZF9kZXRhaWwgPSAnPGRkIGRhdGEtaW5kZXg9XCJcIj7lgqjlgLw8aW5wdXQgY2xhc3M9XCJ0ZXh0IHRleHRfc2hvcnQganNfY2h1IGpzX3N0b3J1bGVcIiB0eXBlPVwidGVsXCIgdmFsdWU9XCJcIiBuYW1lPVwicGF5X2FtdFwiIC8+5YWD6YCBPGlucHV0IGNsYXNzPVwidGV4dCB0ZXh0X3Nob3J0IGpzX3NvbmcganNfc3RvcnVsZVwiIHR5cGU9XCJ0ZWxcIiB2YWx1ZT1cIlwiIG5hbWU9XCJwcmVzZW50X2FtdFwiIC8+5YWDPGkgY2xhc3M9XCJkZWxldGUganNfcnVsZWRlbGV0ZVwiIG9uY2xpY2s9XCJkZWxldGVfcnVsZSh0aGlzKVwiPjwvaT48L2RkPic7XG4gICAgICAgICAgICAgICAgaWYgKGRkX2xpc3QgPD0gMykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGRfbGlzdCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+esrOS4gOadoeWinuWKoOWIoOmZpOaMiemSrlxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3J1bGUgZGQnKS5hcHBlbmQoJzxpIGNsYXNzPVwiZGVsZXRlIGpzX3J1bGVkZWxldGVcIiBvbmNsaWNrPVwiZGVsZXRlX3J1bGUodGhpcylcIj48L2k+Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRkX2xpc3QgPT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/orr7nva7kuLrkuI3lj6/mt7vliqDnmoTmjInpkq7moLflvI9cbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmFkZF9ydWxlJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmFkZF9ydWxlX25vJykuY3NzKCdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlJykuYXBwZW5kKGRkX2RldGFpbCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlX2Vycm9yJykucmVtb3ZlQ2xhc3MoJ3NwYW5fdGlwcycpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlX2Vycm9yJykuYWRkQ2xhc3MoJ3NwYW5fdGlwcycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy/ngrnlh7vliKDpmaTop4TliJlcbiAgICAgICAgICAgIC8vICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuanNfcnVsZWRlbGV0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gICAgIHZhciBkZF9saXN0ID0gJCgnLmpzX3J1bGUgZGQnKS5sZW5ndGggLSAwO1xuICAgICAgICAgICAgLy8gICAgIGlmIChkZF9saXN0ID09IDIpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgLy/liKDpmaTnrKzkuIDmnaHmlbDmja7lkI7pnaLnmoTliKDpmaTmjInpkq5cbiAgICAgICAgICAgIC8vICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCdkZCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgLy8gICAgICAgICAkKCcuanNfcnVsZSBkZCBpLmpzX3J1bGVkZWxldGUnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvLyAgICAgJCh0aGlzKS5wYXJlbnRzKCdkZCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgLy8gICAgICQoJy5qc19ydWxlX2Vycm9yJykucmVtb3ZlQ2xhc3MoJ3NwYW5fdGlwcycpO1xuICAgICAgICAgICAgLy8gICAgICQoJy5qc19hZGRfYWN0aXZpdHknKS5maW5kKCcuYWRkX3J1bGUnKS5jc3MoJ2Rpc3BsYXknLCAnaW5saW5lLWJsb2NrJyk7XG4gICAgICAgICAgICAvLyAgICAgJCgnLmpzX2FkZF9hY3Rpdml0eScpLmZpbmQoJy5hZGRfcnVsZV9ubycpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIC8v5aGr5YaZ5YKo5YC86LWg6YCB6YeR6aKdXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignaW5wdXQnLCAnLmpzX3N0b3J1bGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Jhc2hfbm93X3N0ciA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICAgICAgLy/lsIbpnZ7mlbDlrZfnmoTlrZfnrKbmm7/mjaLkuLrnqbpcbiAgICAgICAgICAgICAgICB2YXIgY3Jhc2hfbm93X3N0cmVuZCA9IGNyYXNoX25vd19zdHIucmVwbGFjZSgvW15cXGRdL2csICcnKTtcbiAgICAgICAgICAgICAgICAvL+WmguaenOi+k+WFpeS4uuepuuWxleekuuWFqOmDqOaPkOeOsFxuICAgICAgICAgICAgICAgIGlmIChjcmFzaF9ub3dfc3RyZW5kLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3Jhc2hfbm93X3N0cmVuZC5sZW5ndGggPT0gMSAmJiBjcmFzaF9ub3dfc3RyZW5kID09ICcwJykge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy/mlbTmlbDpg6jliIbmnIDplb805L2Nc3RhcnTvvIzkuJTkuI3lpKfkuo4yMDAwXG4gICAgICAgICAgICAgICAgdmFyIGNyYXNoX2VuZF96ID0gY3Jhc2hfbm93X3N0cmVuZC5zcGxpdCgnLicpWzBdO1xuICAgICAgICAgICAgICAgIC8v5aaC5p6c5pW05pWw6YOo5YiG6aaW5L2N5Li6MO+8jOWImeaIquWPluWQjuS5sOeahCBcbiAgICAgICAgICAgICAgICB2YXIgY3Jhc2hfZW5kX3pfZmlyc3QgPSBjcmFzaF9lbmRfei5zdWJzdHIoMCwgMSk7XG4gICAgICAgICAgICAgICAgaWYgKGNyYXNoX2VuZF96X2ZpcnN0ID09ICcwJykge1xuICAgICAgICAgICAgICAgICAgICBjcmFzaF9lbmRfeiA9IGNyYXNoX2VuZF96LnN1YnN0cigxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNyYXNoX2VuZF96Lmxlbmd0aCA+IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgY3Jhc2hfZW5kX3ogPSBjcmFzaF9lbmRfei5zdWJzdHIoMCwgNCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjcmFzaF9ub3dfc3RyZW5kLnNwbGl0KCcuJykubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3Jhc2hfZW5kX2wgPSBjcmFzaF9ub3dfc3RyZW5kLnNwbGl0KCcuJylbMV0uc3Vic3RyKDAsIDIpO1xuICAgICAgICAgICAgICAgICAgICBjcmFzaF9ub3dfc3RyZW5kID0gKGNyYXNoX2VuZF96IC0gMCkgKyAnLicgKyBjcmFzaF9lbmRfbDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjcmFzaF9ub3dfc3RyZW5kID0gY3Jhc2hfZW5kX3ogLSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL+aVtOaVsOmDqOWIhuacgOmVvzEy5L2NZW5kXG4gICAgICAgICAgICAgICAgLy/mjqfliLbovpPlhaXplb/luqblkI7otYvlgLzlubblsIbor6XlgLzovazljJbkuLrlrZfnrKbkuLLmoLzlvI9cbiAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbChjcmFzaF9ub3dfc3RyZW5kKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy/loavlhpnlpIfms6jpqozor4FcbiAgICAgICAgICAgICQoJy5qc19ub3RlJykub24oJ2lucHV0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxlbl92YWwgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgICAgIHZhciBsZW4gPSBsZW5fdmFsLmxlbmd0aCAtIDA7XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA8PSA0MCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfd29yZHRpcCcpLmZpbmQoJ3NwYW4nKS50ZXh0KDQwIC0gbGVuKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyQoJy5qc19ub3RlJykudmFsKGxlbl92YWwuc3Vic3RyKDAsIDQwKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8v5rWL6K+V6L6T5YWl5qGG5a+55rWP6KeI5Zmo55qE5Y+Y5YyWXG4gICAgICAgICAgICBpZiAod2luZG93Lm5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9pcGhvbmUvZ2kpIHx8ICgvTWFjIE9TIFgvaSkudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICAgICAgICAgICAgICAgICQoJy5qc19ub3RlJykub24oe1xuICAgICAgICAgICAgICAgICAgICAnZm9jdXMnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zZWN0aW9uX2Zvb3RlcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdib2R5PT09JyArICQoJ2JvZHknKS5oZWlnaHQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYXZhaWxIZWlnaHQ9PT0nICsgc2NyZWVuLmF2YWlsSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBhID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0b3A9PT0nICsgYSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdibHVyJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2VjdGlvbl9mb290ZXInKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKCcuanNfdGVsJykub24oe1xuICAgICAgICAgICAgICAgICAgICAnZm9jdXMnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zZWN0aW9uX2Zvb3RlcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ2JsdXInOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zZWN0aW9uX2Zvb3RlcicpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdmb2N1cycsICcuanNfc3RvcnVsZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2VjdGlvbl9mb290ZXInKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2JsdXInLCAnLmpzX3N0b3J1bGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNlY3Rpb25fZm9vdGVyJykuc2hvdygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/ngrnlh7vmj5DkuqTpooTop4hcbiAgICAgICAgICAgICQoJy5qc19hZGRhY3Rpdml0eV9zdWInKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB5YW56aGVuZy50ZWxfYWN0aXZpdHkoJy5qc190ZWwnKTtcbiAgICAgICAgICAgICAgICB5YW56aGVuZy5uYW1lX3Rlc3QoJy5qc19ub3RlJywgMCwgNDApO1xuICAgICAgICAgICAgICAgIHRpbWVfYXJlYSgpO1xuICAgICAgICAgICAgICAgICQoJy5qc19zdG9ydWxlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgeWFuemhlbmcubnVtcHJpY2VfdGVzdCh0aGlzLCAwLCA0LCAyMDAwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKCcuanNfc3RvcnVsZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdlcnJvcl90aXBzJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0X3dvcmQuYWxlcnRfd29yZF9zaG93X3Nob3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JfbGVuID0gJCgnLmVycm9yX3RpcHMnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yX2xlbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL+WtmOWCqOaVsOaNruW5tui/m+WFpeS4i+S4gOatpVxuICAgICAgICAgICAgICAgIGxvY2Fsc3RvcmFnZS5zZXRfc3RvcmFnZSgpO1xuICAgICAgICAgICAgICAgIC8v5a2Y5YKo5YKo5YC86KeE5YiZXG4gICAgICAgICAgICAgICAgdmFyIHJ1bGVzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGNodV9sZW4gPSAkKCcuanNfcnVsZSBkZCcpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNodV9sZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2h1X2h0bWwgPSAkKCcuanNfcnVsZSBkZCcpLmVxKGkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2h1X2tleSA9IGNodV9odG1sLmZpbmQoJy5qc19jaHUnKS5hdHRyKCduYW1lJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaHVfdmFsID0gY2h1X2h0bWwuZmluZCgnLmpzX2NodScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc29uZ19rZXkgPSBjaHVfaHRtbC5maW5kKCcuanNfc29uZycpLmF0dHIoJ25hbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvbmdfdmFsID0gY2h1X2h0bWwuZmluZCgnLmpzX3NvbmcnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGUgPSB7IGdyaWRfaW5kZXg6IGkgKyAxLCBwYXlfYW10OiBjaHVfdmFsICogMTAwLCBwcmVzZW50X2FtdDogc29uZ192YWwgKiAxMDAgfTtcbiAgICAgICAgICAgICAgICAgICAgcnVsZXMucHVzaChydWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbG9jYWxzdG9yYWdlLnNldG9uZV9zdG9yYWdlKCdydWxlcycsIEpTT04uc3RyaW5naWZ5KHJ1bGVzKSk7XG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIGxvY2F0aW9uLmhvc3QgKyAnL3ByZXBhaWQvdjEvcGFnZS9iL2FjdGl2aXR5X3ByZXZpZXcuaHRtbD9lZGl0PW1lbmQnO1xuICAgICAgICAgICAgICAgIGlmX21lbnUuZ290b191cmwodXJsKTtcbiAgICAgICAgICAgICAgICAvLyBpZiAodHlwZW9mIFFGUEFZICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgIHZhciBnb191cmwgPSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB1cmk6IGxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIGxvY2F0aW9uLmhvc3QgKyAnL3ByZXBhaWQvdjEvcGFnZS9iL2FjdGl2aXR5X3ByZXZpZXcuaHRtbD9lZGl0PW1lbmQnLFxuICAgICAgICAgICAgICAgIC8vICAgICB9O1xuICAgICAgICAgICAgICAgIC8vICAgICBuYXRpdmUub3BlblVyaShnb191cmwsIGZ1bmN0aW9uKGNiKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhjYi5yZXQpO1xuICAgICAgICAgICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vICAgICBsb2NhdGlvbi5ocmVmID0gbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdCArICcvcHJlcGFpZC92MS9wYWdlL2IvYWN0aXZpdHlfcHJldmlldy5odG1sP2VkaXQ9bWVuZCc7XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL+W8gOWni+aXtumXtOS4jue7k+adn+aXtumXtOeahOWIpOaWrVxuICAgICAgICAgICAgZnVuY3Rpb24gdGltZV9hcmVhKCkge1xuICAgICAgICAgICAgICAgIHZhciBzdGFydGltZSA9ICQoJy5qc19zdGFydGltZScpO1xuICAgICAgICAgICAgICAgIHZhciBlbmR0aW1lID0gJCgnLmpzX2VuZHRpbWUnKTtcbiAgICAgICAgICAgICAgICB2YXIgdGlwc19waWMgPSAnPGkgY2xhc3M9XCJpY190aXBzXCI+PC9pPic7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0aW1lLnZhbCgpICYmIGVuZHRpbWUudmFsKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNfeWVhciA9IHN0YXJ0aW1lLmF0dHIoJ2RhdGEteWVhcicpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc19tb250aCA9IHN0YXJ0aW1lLmF0dHIoJ2RhdGEtbW9udGgnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNfZGF5ID0gc3RhcnRpbWUuYXR0cignZGF0YS1kYXknKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVfeWVhciA9IGVuZHRpbWUuYXR0cignZGF0YS15ZWFyJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlX21vbnRoID0gZW5kdGltZS5hdHRyKCdkYXRhLW1vbnRoJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlX2RheSA9IGVuZHRpbWUuYXR0cignZGF0YS1kYXknKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNfdGltZSA9IHNfeWVhciArICcvJyArIHNfbW9udGggKyAnLycgKyBzX2RheSArICcgMDA6MDA6MDAnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZV90aW1lID0gZV95ZWFyICsgJy8nICsgZV9tb250aCArICcvJyArIGVfZGF5ICsgJyAyMzo1OTo1OSc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzX3RpbWVfcyA9IG5ldyBEYXRlKHNfdGltZSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZV90aW1lX3MgPSBuZXcgRGF0ZShlX3RpbWUpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvZGF5X3RpbWVfcyA9IG5ldyBEYXRlKHRvZGF5X3RpbWVzKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzX2NoYSA9IGVfdGltZV9zIC0gc190aW1lX3M7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RhcnRpbWUuaGFzQ2xhc3MoJ2dyZXknKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/mtLvliqjlvIDlp4vliY3vvIzliKTmlq3lvIDlp4vml7bpl7RcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzX3RpbWVfcyAtIHRvZGF5X3RpbWVfcyA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuanNfdGltZXRpcHMnKS5hZGRDbGFzcygnZXJyb3JfdGlwcycpLmZpbmQoJ3NwYW4nKS5odG1sKHRpcHNfcGljICsgJ+W8gOWni+S4jeiDveavlOS7iuWkqeaXqScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3RpbWV0aXBzJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX3RpcHMnKS5maW5kKCdzcGFuJykuaHRtbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVfdGltZV9zIC0gc190aW1lX3MgPiAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuanNfdGltZXRpcHMnKS5hZGRDbGFzcygnZXJyb3JfdGlwcycpLmZpbmQoJ3NwYW4nKS5odG1sKHRpcHNfcGljICsgJ+aXtumXtOiMg+WbtOWcqDM2NeWkqeS5i+WGhScpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVfdGltZV9zIC0gc190aW1lX3MgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3RpbWV0aXBzJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX3RpcHMnKS5maW5kKCdzcGFuJykuaHRtbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuanNfdGltZXRpcHMnKS5hZGRDbGFzcygnZXJyb3JfdGlwcycpLmZpbmQoJ3NwYW4nKS5odG1sKHRpcHNfcGljICsgJ+e7k+adn+aXtumXtOS4jeiDveavlOW8gOWni+aXtumXtOaXqScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3RpbWV0aXBzJykuYWRkQ2xhc3MoJ2Vycm9yX3RpcHMnKS5maW5kKCdzcGFuJykuaHRtbCh0aXBzX3BpYyArICfml7bpl7TojIPlm7TlnKgzNjXlpKnkuYvlhoUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL+iOt+WPluaJgOacieS/oeaBr1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0X2FsbGRhdGEocmV0dXJuX2RhdGEpIHtcbiAgICAgICAgICAgICAgICAvL+WIpOaWrea0u+WKqOW8gOWni+WJjeS4jui/m+ihjOS4rVxuICAgICAgICAgICAgICAgIHZhciBjb3VudGRvd24gPSByZXR1cm5fZGF0YS5jb3VudGRvd25fZGF5O1xuICAgICAgICAgICAgICAgIGlmIChjb3VudGRvd24gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8v5rS75Yqo5byA5aeL5YmNXG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19zdGFydGltZScpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJykucmVtb3ZlQ2xhc3MoJ2dyZXknKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3RlbCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJykucmVtb3ZlQ2xhc3MoJ2dyZXknKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL+a0u+WKqOi/m+ihjOS4rVxuICAgICAgICAgICAgICAgICAgICAkKCcuanNfc3RhcnRpbWUnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpLmFkZENsYXNzKCdncmV5Jyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc190ZWwnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpLmFkZENsYXNzKCdncmV5Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8v5pWw5o2u6I635Y+WXG4gICAgICAgICAgICAgICAgdmFyIHJ1bGVzID0gcmV0dXJuX2RhdGEucnVsZXM7XG4gICAgICAgICAgICAgICAgdmFyIG1lcmNoYW50X25hbWUgPSByZXR1cm5fZGF0YS5tZXJjaGFudF9uYW1lO1xuICAgICAgICAgICAgICAgIHZhciBpbmZvID0gcmV0dXJuX2RhdGEuaW5mbztcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRpbWVfZGF0YSA9IGluZm8uc3RhcnRfdGltZTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kdGltZV9kYXRhID0gaW5mby5lbmRfdGltZTtcbiAgICAgICAgICAgICAgICB2YXIgbWNoX21vYmlsZSA9IGluZm8ubWNoX21vYmlsZTtcbiAgICAgICAgICAgICAgICB2YXIgZGVzYyA9IGluZm8uZGVzYztcbiAgICAgICAgICAgICAgICAvL+i1i+WAvOeUteivneWSjOWkh+azqOOAgeW6l+mTuuWQjeensFxuICAgICAgICAgICAgICAgICQoJy5qc19zaG9wbmFtZScpLnZhbChtZXJjaGFudF9uYW1lKTtcbiAgICAgICAgICAgICAgICAkKCcuanNfdGVsJykudmFsKG1jaF9tb2JpbGUpO1xuICAgICAgICAgICAgICAgIC8v5re75Yqg6YCJ5Lit5LqL5Lu277yM5Lul5L6/dGV4dGFyZWHmlbDlgLzmmL7npLogICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAkKCcuanNfZW5kdGltZScpLmZvY3VzKCk7IC8v6K+l6L6T5YWl5qGGaW5wdXTkuLpyZWFkb25seeS4jeS8muinpuWPkei+k+WFpeahhuS6i+S7tu+8jOW8gOWni+aXtumXtOS4umRpc2FibGVk5pe25aSx5pWIXG4gICAgICAgICAgICAgICAgJCgnLmpzX25vdGUnKS52YWwoZGVzYyk7XG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJqc19ub3RlXCIpLnZhbHVlPWRlc2M7XG4gICAgICAgICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImpzX25vdGVcIikuaW5uZXJUZXh0PWRlc2M7XG4gICAgICAgICAgICAgICAgLy/liankvZnlj6/ovpPlhaXlrZfmlbBcbiAgICAgICAgICAgICAgICB2YXIgd29yZHRpcCA9IGRlc2MubGVuZ3RoIC0gMDtcbiAgICAgICAgICAgICAgICAkKCcuanNfd29yZHRpcCBzcGFuJykudGV4dCg0MCAtIHdvcmR0aXApO1xuICAgICAgICAgICAgICAgIC8v5pel5pyfXG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0aW1lID0gc3RhcnRpbWVfZGF0YS5zdWJzdHIoMCwgMTApO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydGltZV96dSA9IHN0YXJ0aW1lLnNwbGl0KCctJyk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19zdGFydGltZScpLmRhdGEoJ3llYXInLCBzdGFydGltZV96dVswXSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19zdGFydGltZScpLmRhdGEoJ21vbnRoJywgbnVtX2NoYW5nZShzdGFydGltZV96dVsxXSkpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfc3RhcnRpbWUnKS5kYXRhKCdkYXknLCBudW1fY2hhbmdlKHN0YXJ0aW1lX3p1WzJdKSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19zdGFydGltZScpLnZhbChudW1fY2hhbmdlKHN0YXJ0aW1lX3p1WzFdKSArICfmnIgnICsgbnVtX2NoYW5nZShzdGFydGltZV96dVsyXSkgKyAn5pelJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNzdGFydGltZScpLnZhbChzdGFydGltZV96dVswXSArICctJyArIG51bV9jaGFuZ2Uoc3RhcnRpbWVfenVbMV0pICsgJy0nICsgbnVtX2NoYW5nZShzdGFydGltZV96dVsyXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZW5kdGltZSA9IGVuZHRpbWVfZGF0YS5zdWJzdHIoMCwgMTApO1xuICAgICAgICAgICAgICAgIHZhciBlbmR0aW1lX3p1ID0gZW5kdGltZS5zcGxpdCgnLScpO1xuICAgICAgICAgICAgICAgIGlmIChlbmR0aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19lbmR0aW1lJykuZGF0YSgneWVhcicsIGVuZHRpbWVfenVbMF0pO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfZW5kdGltZScpLmRhdGEoJ21vbnRoJywgbnVtX2NoYW5nZShlbmR0aW1lX3p1WzFdKSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19lbmR0aW1lJykuZGF0YSgnZGF5JywgbnVtX2NoYW5nZShlbmR0aW1lX3p1WzJdKSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19lbmR0aW1lJykudmFsKG51bV9jaGFuZ2UoZW5kdGltZV96dVsxXSkgKyAn5pyIJyArIG51bV9jaGFuZ2UoZW5kdGltZV96dVsyXSkgKyAn5pelJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNlbmR0aW1lJykudmFsKGVuZHRpbWVfenVbMF0gKyAnLScgKyBudW1fY2hhbmdlKGVuZHRpbWVfenVbMV0pICsgJy0nICsgbnVtX2NoYW5nZShlbmR0aW1lX3p1WzJdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8v5YKo5YC86KeE5YiZLS3mnInpgIDlh7rvvIzmlL7nva7mnIDlkI5cbiAgICAgICAgICAgICAgICBpZiAoIXJ1bGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2h1X3ZhbHVlID0gKHJ1bGVzW2ldLnBheV9hbXQgLyAxMDApLnRvRml4ZWQoMCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb25nX3ZhbHVlID0gKHJ1bGVzW2ldLnByZXNlbnRfYW10IC8gMTAwKS50b0ZpeGVkKDApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhfdmFsdWUgPSBydWxlc1tpXS5ncmlkX2luZGV4O1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGRfZGV0YWlsO1xuICAgICAgICAgICAgICAgICAgICAvL+W8gOWni+WJjeS4jui/m+ihjOS4reWIpOaWrVxuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRkb3duID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGRfZGV0YWlsID0gJzxkZCBkYXRhLWluZGV4PVwiJyArIGluZGV4X3ZhbHVlICsgJ1wiPuWCqOWAvDxpbnB1dCBjbGFzcz1cInRleHQgdGV4dF9zaG9ydCBqc19jaHUganNfc3RvcnVsZVwiIHR5cGU9XCJ0ZWxcIiB2YWx1ZT1cIicgKyBjaHVfdmFsdWUgKyAnXCIgbmFtZT1cImNodVwiIC8+5YWD6YCBPGlucHV0IGNsYXNzPVwidGV4dCB0ZXh0X3Nob3J0IGpzX3NvbmcganNfc3RvcnVsZVwiIHR5cGU9XCJ0ZWxcIiB2YWx1ZT1cIicgKyBzb25nX3ZhbHVlICsgJ1wiIG5hbWU9XCJzb25nXCIgLz7lhYM8aSBjbGFzcz1cImRlbGV0ZSBqc19ydWxlZGVsZXRlXCIgb25jbGljaz1cImRlbGV0ZV9ydWxlKHRoaXMpXCI+PC9pPjwvZGQ+JztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRkX2RldGFpbCA9ICc8ZGQgZGF0YS1pbmRleD1cIicgKyBpbmRleF92YWx1ZSArICdcIj7lgqjlgLw8aW5wdXQgY2xhc3M9XCJ0ZXh0IHRleHRfc2hvcnQganNfY2h1IGpzX3N0b3J1bGVcIiB0eXBlPVwidGVsXCIgdmFsdWU9XCInICsgY2h1X3ZhbHVlICsgJ1wiIG5hbWU9XCJjaHVcIiAvPuWFg+mAgTxpbnB1dCBjbGFzcz1cInRleHQgdGV4dF9zaG9ydCBqc19zb25nIGpzX3N0b3J1bGVcIiB0eXBlPVwidGVsXCIgdmFsdWU9XCInICsgc29uZ192YWx1ZSArICdcIiBuYW1lPVwic29uZ1wiIC8+5YWDPC9kZD4nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlJykuYXBwZW5kKGRkX2RldGFpbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8v5byA5aeL5YmN5LiO6L+b6KGM5Lit5Yik5patXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ZG93biA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy/mtLvliqjlvIDlp4vliY1cbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3N0b3J1bGUnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpLnJlbW92ZUNsYXNzKCdncmV5Jyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19hZGRfYWN0aXZpdHknKS5hdHRyKCdkYXRhLWNsaWNrJywgJzEnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL+a0u+WKqOi/m+ihjOS4rVxuICAgICAgICAgICAgICAgICAgICAkKCcuanNfc3RvcnVsZScpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJykuYWRkQ2xhc3MoJ2dyZXknKTtcbiAgICAgICAgICAgICAgICAgICAgLy/mnZznu53mt7vliqDmjInpkq7nmoTngrnlh7vml7bpl7RcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX2FkZF9hY3Rpdml0eScpLmF0dHIoJ2RhdGEtY2xpY2snLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICAvL+aYvuekuuS4jeWPr+a3u+WKoOeahOWbvuagh1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZScpLmZpbmQoJy5hZGRfcnVsZScpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlJykuZmluZCgnLmFkZF9ydWxlX25vJykuY3NzKCdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChydWxlcy5sZW5ndGggPD0gMSkge1xuICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcuanNfcnVsZSBkZCcpLmVxKDApLmZpbmQoJ2kuanNfcnVsZWRlbGV0ZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocnVsZXMubGVuZ3RoID49IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3J1bGUnKS5maW5kKCcuYWRkX3J1bGUnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZScpLmZpbmQoJy5hZGRfcnVsZV9ubycpLmNzcygnZGlzcGxheScsICdpbmxpbmUtYmxvY2snKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZScpLmZpbmQoJy5hZGRfcnVsZScpLmNzcygnZGlzcGxheScsICdpbmxpbmUtYmxvY2snKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3J1bGUnKS5maW5kKCcuYWRkX3J1bGVfbm8nKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v5oqK5bCP5LqOMTDnmoTmlbDlgLzlj5jmiJAx5L2N5pWwXG4gICAgICAgICAgICBmdW5jdGlvbiBudW1fY2hhbmdlKG51bSkge1xuICAgICAgICAgICAgICAgIGlmIChudW0gPCAxMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVtLnN1YnN0cigtMSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL+iOt+WPluW6l+mTuuWQjeensFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0X3Nob3BuYW1lKHJldHVybl9kYXRhKSB7XG4gICAgICAgICAgICAgICAgJCgnLmpzX3Nob3BuYW1lJykudmFsKHJldHVybl9kYXRhLm1lcmNoYW50X25hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/ojrflj5bmn6Xor6Llj4LmlbBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1TdHJpbmcobmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKFwiKF58JilcIiArIG5hbWUgKyBcIj0oW14mXSopKCZ8JClcIik7XG4gICAgICAgICAgICAgICAgdmFyIHIgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKS5tYXRjaChyZWcpO1xuICAgICAgICAgICAgICAgIGlmIChyICE9IG51bGwpcmV0dXJuIHVuZXNjYXBlKHJbMl0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl19
