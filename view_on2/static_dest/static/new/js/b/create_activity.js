"use strict";function delete_rule(e){var t=$(".js_rule dd").length-0;2==t&&($(e).parents("dd").remove(),$(".js_rule dd i.js_ruledelete").remove()),$(e).parents("dd").remove(),$(".js_rule_error").removeClass("span_tips"),$(".js_add_activity").find(".add_rule").css("display","inline-block"),$(".js_add_activity").find(".add_rule_no").css("display","none")}require(["../require-config"],function(){require(["zepto","yanzheng","ajax_rule","localstorage","iosselect","date_get","alert_word","if_menu"],function($,e,t,a,s,n,i,r){$(function(){function d(){var e=$(".js_startime"),t=$(".js_endtime"),a='<i class="ic_tips"></i>';if(e.val()&&t.val()){var s=e.attr("data-year"),n=e.attr("data-month"),i=e.attr("data-day"),r=t.attr("data-year"),d=t.attr("data-month"),o=t.attr("data-day"),l=s+"/"+n+"/"+i+" 00:00:00",u=r+"/"+d+"/"+o+" 23:59:59",c=new Date(l).getTime(),m=new Date(u).getTime(),j=new Date(_).getTime();if(c-j<0)return $(".js_timetips").addClass("error_tips").find("span").html(a+"开始不能比今天早"),!1;$(".js_timetips").removeClass("error_tips").find("span").html(""),m-c>31536e6?$(".js_timetips").addClass("error_tips").find("span").html(a+"时间范围在365天之内"):m-c>=0?$(".js_timetips").removeClass("error_tips").find("span").html(""):$(".js_timetips").addClass("error_tips").find("span").html(a+"结束时间不能比开始时间早")}else $(".js_timetips").addClass("error_tips").find("span").html(a+"时间范围在365天之内")}function o(){$(".js_endtime").focus();var e=$(".js_note").val().length-0;$(".js_wordtip span").text(40-e);var t=$("#startime").val(),s=t.split("-");t?($(".js_startime").data("year",s[0]),$(".js_startime").data("month",s[1]),$(".js_startime").data("day",s[2]),$(".js_startime").val(s[1]+"月"+s[2]+"日")):($(".js_startime").data("year",n.nowYear),$(".js_startime").data("month",n.nowMonth),$(".js_startime").data("day",n.nowDate),$("#startime").val(n.nowYear+"-"+n.nowMonth+"-"+n.nowDate),$(".js_startime").val("今天"));var i=$("#endtime").val(),r=i.split("-");i?($(".js_endtime").data("year",r[0]),$(".js_endtime").data("month",r[1]),$(".js_endtime").data("day",r[2]),$(".js_endtime").val(r[1]+"月"+r[2]+"日")):($(".js_endtime").data("year",n.nowYear),$(".js_endtime").data("month",n.nowMonth),$(".js_endtime").data("day",n.nowDate),$("#endtime").val(n.nowYear+"-"+n.nowMonth+"-"+n.nowDate),$(".js_endtime").val(""));var d=a.getone_storage("rules");if(!d)return!1;var o=JSON.parse(d);o.length>1?$(".js_rule dd").eq(0).append('<i class="delete js_ruledelete" onclick="delete_rule(this)"></i>'):$(".js_rule dd").eq(0).find("i.js_ruledelete").remove(),o.length>=4?($(".js_rule").find(".add_rule").css("display","none"),$(".js_rule").find(".add_rule_no").css("display","inline-block")):($(".js_rule").find(".add_rule").css("display","inline-block"),$(".js_rule").find(".add_rule_no").css("display","none"));for(var l=0;l<o.length;l++){var _=(o[l].pay_amt/100).toFixed(0),u=(o[l].present_amt/100).toFixed(0),c=o[l].grid_index;if(0==l)$(".js_rule dd").eq(0).find(".js_chu").val(_),$(".js_rule dd").eq(0).find(".js_song").val(u),$(".js_rule dd").eq(0).attr("data-index",c);else{var m='<dd data-index="'+c+'">储值<input class="text text_short js_chu js_storule" type="tel" value="'+_+'" name="chu" />元送<input class="text text_short js_song js_storule" type="tel" value="'+u+'" name="song" />元<i class="delete js_ruledelete" onclick="delete_rule(this)"></i></dd>';$(".js_rule").append(m)}}}function l(e){$(".js_shopname").val(e.merchant_name)}i.toast_data_short("body","金额需大于0且不超过2000");var _=n.nowYear+"/"+n.nowMonth+"/"+n.nowDate+" 00:00:00";$(document).ready(function(){t.ajax_rule("/prepaid/v1/api/b/merchant_info","GET","json","",".zheceng",l),a.get_storage(o)}),$(".js_startime").on("click",function(){var e=document.querySelector(".js_startime"),t=e.dataset.year,a=e.dataset.month,i=e.dataset.day;new s(3,[n.yearData,n.monthData,n.dateData],{container:".ios_select_container",title:"选择开始时间",itemHeight:50,itemShowCount:3,relation:[1,1,0,0],oneLevelId:t,twoLevelId:a,threeLevelId:i,callback:function(t,a,s){e.dataset.year=t.id,e.dataset.month=a.id,e.dataset.day=s.id,e.value=a.id+"月"+s.id+"日",$("#startime").val(t.id+"-"+a.id+"-"+s.id)}})}),$(".js_endtime").on("click",function(){var e=document.querySelector(".js_endtime"),t=e.dataset.year,a=e.dataset.month,i=e.dataset.day;new s(3,[n.yearData,n.monthData,n.dateData],{container:".ios_select_container",title:"选择结束时间",itemHeight:50,itemShowCount:3,relation:[1,1,0,0],oneLevelId:t,twoLevelId:a,threeLevelId:i,callback:function(t,a,s){e.dataset.year=t.id,e.dataset.month=a.id,e.dataset.day=s.id,e.value=a.id+"月"+s.id+"日",$("#endtime").val(t.id+"-"+a.id+"-"+s.id)}})}),$(".js_add_activity").on("click",function(){var e=$(".js_rule dd").length-0,t='<dd data-index="">储值<input class="text text_short js_chu js_storule" type="tel" value="" name="pay_amt" />元送<input class="text text_short js_song js_storule" type="tel" value="" name="present_amt" />元<i class="delete js_ruledelete" onclick="delete_rule(this)"></i></dd>';e<=3?(1==e&&$(".js_rule dd").append('<i class="delete js_ruledelete" onclick="delete_rule(this)"></i>'),3==e&&($(this).find(".add_rule").css("display","none"),$(this).find(".add_rule_no").css("display","inline-block")),$(".js_rule").append(t),$(".js_rule_error").removeClass("span_tips")):$(".js_rule_error").addClass("span_tips")}),$(document).on("input",".js_storule",function(){var e=$(this).val(),t=e.replace(/[^\d]/g,"");if(0==t.length)return $(this).val(""),!1;if(1==t.length&&"0"==t)return $(this).val(""),!1;var a=t.split(".")[0],s=a.substr(0,1);if("0"==s&&(a=a.substr(1)),a.length>4&&(a=a.substr(0,4)),t.split(".").length>1){var n=t.split(".")[1].substr(0,2);t=a-0+"."+n}else t=a-0;$(this).val(t)}),$(".js_note").on("input",function(){var e=$(this).val(),t=e.length-0;return t<=40&&void $(".js_wordtip").find("span").text(40-t)}),(window.navigator.appVersion.match(/iphone/gi)||/Mac OS X/i.test(navigator.userAgent))&&($(".js_note").on({focus:function(){$(".section_footer").hide()},blur:function(){$(".section_footer").show()}}),$(".js_tel").on({focus:function(){$(".section_footer").hide()},blur:function(){$(".section_footer").show()}}),$(document).on("focus",".js_storule",function(){$(".section_footer").hide()}),$(document).on("blur",".js_storule",function(){$(".section_footer").show()})),$(".js_addactivity_sub").on("click",function(){e.tel_activity(".js_tel"),e.name_test(".js_note",0,40),d(),$(".js_storule").each(function(){e.numprice_test(this,0,4,2e3)}),$(".js_storule").each(function(){if($(this).hasClass("error_tips"))return i.alert_word_show_short(),!1});var t=$(".error_tips").length;if(t>0)return!1;a.set_storage();for(var s=[],n=$(".js_rule dd").length,o=0;o<n;o++){var l=$(".js_rule dd").eq(o),_=(l.find(".js_chu").attr("name"),l.find(".js_chu").val()),u=(l.find(".js_song").attr("name"),l.find(".js_song").val()),c={grid_index:o+1,pay_amt:100*_,present_amt:100*u};s.push(c)}a.setone_storage("rules",JSON.stringify(s));var m=location.protocol+"//"+location.host+"/prepaid/v1/page/b/activity_preview.html";r.goto_url(m)})})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImIvY3JlYXRlX2FjdGl2aXR5LmpzIl0sIm5hbWVzIjpbImRlbGV0ZV9ydWxlIiwib2JqIiwiZGRfbGlzdCIsIiQiLCJsZW5ndGgiLCJwYXJlbnRzIiwicmVtb3ZlIiwicmVtb3ZlQ2xhc3MiLCJmaW5kIiwiY3NzIiwicmVxdWlyZSIsInlhbnpoZW5nIiwiYWpheF9ydWxlIiwibG9jYWxzdG9yYWdlIiwiaW9zc2VsZWN0IiwiZGF0ZV9nZXQiLCJhbGVydF93b3JkIiwiaWZfbWVudSIsInRpbWVfYXJlYSIsInN0YXJ0aW1lIiwiZW5kdGltZSIsInRpcHNfcGljIiwidmFsIiwic195ZWFyIiwiYXR0ciIsInNfbW9udGgiLCJzX2RheSIsImVfeWVhciIsImVfbW9udGgiLCJlX2RheSIsInNfdGltZSIsImVfdGltZSIsInNfdGltZV9zIiwiRGF0ZSIsImdldFRpbWUiLCJlX3RpbWVfcyIsInRvZGF5X3RpbWVfcyIsInRvZGF5X3RpbWVzIiwiYWRkQ2xhc3MiLCJodG1sIiwiZ2V0X2RhdGEiLCJmb2N1cyIsIndvcmR0aXAiLCJ0ZXh0Iiwic3RhcnRpbWVfenUiLCJzcGxpdCIsImRhdGEiLCJub3dZZWFyIiwibm93TW9udGgiLCJub3dEYXRlIiwiZW5kdGltZV96dSIsInJ1bGVzX3QiLCJnZXRvbmVfc3RvcmFnZSIsInJ1bGVzIiwiSlNPTiIsInBhcnNlIiwiZXEiLCJhcHBlbmQiLCJpIiwiY2h1X3ZhbHVlIiwicGF5X2FtdCIsInRvRml4ZWQiLCJzb25nX3ZhbHVlIiwicHJlc2VudF9hbXQiLCJpbmRleF92YWx1ZSIsImdyaWRfaW5kZXgiLCJkZF9kZXRhaWwiLCJnZXRfc2hvcG5hbWUiLCJyZXR1cm5fZGF0YSIsIm1lcmNoYW50X25hbWUiLCJ0b2FzdF9kYXRhX3Nob3J0IiwiZG9jdW1lbnQiLCJyZWFkeSIsImdldF9zdG9yYWdlIiwib24iLCJzaG93RG9tIiwicXVlcnlTZWxlY3RvciIsInllYXIiLCJkYXRhc2V0IiwibW9udGgiLCJkYXkiLCJ5ZWFyRGF0YSIsIm1vbnRoRGF0YSIsImRhdGVEYXRhIiwiY29udGFpbmVyIiwidGl0bGUiLCJpdGVtSGVpZ2h0IiwiaXRlbVNob3dDb3VudCIsInJlbGF0aW9uIiwib25lTGV2ZWxJZCIsInR3b0xldmVsSWQiLCJ0aHJlZUxldmVsSWQiLCJjYWxsYmFjayIsInllYXJfZGF0YSIsIm1vbnRoX2RhdGEiLCJkYXlfZGF0YSIsImlkIiwidmFsdWUiLCJ0aGlzIiwiY3Jhc2hfbm93X3N0ciIsImNyYXNoX25vd19zdHJlbmQiLCJyZXBsYWNlIiwiY3Jhc2hfZW5kX3oiLCJjcmFzaF9lbmRfel9maXJzdCIsInN1YnN0ciIsImNyYXNoX2VuZF9sIiwibGVuX3ZhbCIsImxlbiIsIndpbmRvdyIsIm5hdmlnYXRvciIsImFwcFZlcnNpb24iLCJtYXRjaCIsInRlc3QiLCJ1c2VyQWdlbnQiLCJoaWRlIiwiYmx1ciIsInNob3ciLCJ0ZWxfYWN0aXZpdHkiLCJuYW1lX3Rlc3QiLCJlYWNoIiwibnVtcHJpY2VfdGVzdCIsImhhc0NsYXNzIiwiYWxlcnRfd29yZF9zaG93X3Nob3J0IiwiZXJyb3JfbGVuIiwic2V0X3N0b3JhZ2UiLCJjaHVfbGVuIiwiY2h1X2h0bWwiLCJjaHVfdmFsIiwic29uZ192YWwiLCJydWxlIiwicHVzaCIsInNldG9uZV9zdG9yYWdlIiwic3RyaW5naWZ5IiwidXJsIiwibG9jYXRpb24iLCJwcm90b2NvbCIsImhvc3QiLCJnb3RvX3VybCJdLCJtYXBwaW5ncyI6IllBQ0EsU0FBU0EsYUFBWUMsR0FDakIsR0FBSUMsR0FBVUMsRUFBRSxlQUFlQyxPQUFTLENBQ3pCLElBQVhGLElBRUFDLEVBQUVGLEdBQUtJLFFBQVEsTUFBTUMsU0FDckJILEVBQUUsK0JBQStCRyxVQUVyQ0gsRUFBRUYsR0FBS0ksUUFBUSxNQUFNQyxTQUNyQkgsRUFBRSxrQkFBa0JJLFlBQVksYUFDaENKLEVBQUUsb0JBQW9CSyxLQUFLLGFBQWFDLElBQUksVUFBVyxnQkFDdkROLEVBQUUsb0JBQW9CSyxLQUFLLGdCQUFnQkMsSUFBSSxVQUFXLFFB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QWUsV0FDbEN2RSxFQUFFLG1CQUFtQmlILFVBSTdCakgsRUFBRSx1QkFBdUJ1RSxHQUFHLFFBQVMsV0FDakMvRCxFQUFTMEcsYUFBYSxXQUN0QjFHLEVBQVMyRyxVQUFVLFdBQVksRUFBRyxJQUNsQ3BHLElBQ0FmLEVBQUUsZUFBZW9ILEtBQUssV0FDbEI1RyxFQUFTNkcsY0FBY3RCLEtBQU0sRUFBRyxFQUFHLE9BRXZDL0YsRUFBRSxlQUFlb0gsS0FBSyxXQUNsQixHQUFHcEgsRUFBRStGLE1BQU11QixTQUFTLGNBRWhCLE1BREF6RyxHQUFXMEcseUJBQ0osR0FHZixJQUFJQyxHQUFZeEgsRUFBRSxlQUFlQyxNQUNqQyxJQUFJdUgsRUFBWSxFQUNaLE9BQU8sQ0FHWDlHLEdBQWErRyxhQUliLEtBQUssR0FGRHZFLE1BQ0F3RSxFQUFVMUgsRUFBRSxlQUFlQyxPQUN0QnNELEVBQUksRUFBR0EsRUFBSW1FLEVBQVNuRSxJQUFLLENBQzlCLEdBQUlvRSxHQUFXM0gsRUFBRSxlQUFlcUQsR0FBR0UsR0FFL0JxRSxHQURVRCxFQUFTdEgsS0FBSyxXQUFXZ0IsS0FBSyxRQUM5QnNHLEVBQVN0SCxLQUFLLFdBQVdjLE9BRW5DMEcsR0FEV0YsRUFBU3RILEtBQUssWUFBWWdCLEtBQUssUUFDL0JzRyxFQUFTdEgsS0FBSyxZQUFZYyxPQUNyQzJHLEdBQVNoRSxXQUFZUCxFQUFJLEVBQUdFLFFBQW1CLElBQVZtRSxFQUFlaEUsWUFBd0IsSUFBWGlFLEVBQ3JFM0UsR0FBTTZFLEtBQUtELEdBRWZwSCxFQUFhc0gsZUFBZSxRQUFTN0UsS0FBSzhFLFVBQVUvRSxHQUNwRCxJQUFJZ0YsR0FBTUMsU0FBU0MsU0FBVyxLQUFPRCxTQUFTRSxLQUFPLDBDQUNyRHZILEdBQVF3SCxTQUFTSiIsImZpbGUiOiJiL2NyZWF0ZV9hY3Rpdml0eS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8v5Yig6Zmk6KeE5YiZXG5mdW5jdGlvbiBkZWxldGVfcnVsZShvYmopIHtcbiAgICB2YXIgZGRfbGlzdCA9ICQoJy5qc19ydWxlIGRkJykubGVuZ3RoIC0gMDtcbiAgICBpZiAoZGRfbGlzdCA9PSAyKSB7XG4gICAgICAgIC8v5Yig6Zmk56ys5LiA5p2h5pWw5o2u5ZCO6Z2i55qE5Yig6Zmk5oyJ6ZKuXG4gICAgICAgICQob2JqKS5wYXJlbnRzKCdkZCcpLnJlbW92ZSgpO1xuICAgICAgICAkKCcuanNfcnVsZSBkZCBpLmpzX3J1bGVkZWxldGUnKS5yZW1vdmUoKTtcbiAgICB9XG4gICAgJChvYmopLnBhcmVudHMoJ2RkJykucmVtb3ZlKCk7XG4gICAgJCgnLmpzX3J1bGVfZXJyb3InKS5yZW1vdmVDbGFzcygnc3Bhbl90aXBzJyk7XG4gICAgJCgnLmpzX2FkZF9hY3Rpdml0eScpLmZpbmQoJy5hZGRfcnVsZScpLmNzcygnZGlzcGxheScsICdpbmxpbmUtYmxvY2snKTtcbiAgICAkKCcuanNfYWRkX2FjdGl2aXR5JykuZmluZCgnLmFkZF9ydWxlX25vJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbn1cbnJlcXVpcmUoWycuLi9yZXF1aXJlLWNvbmZpZyddLCBmdW5jdGlvbigpIHtcbiAgICByZXF1aXJlKFtcInplcHRvXCIsIFwieWFuemhlbmdcIiwgXCJhamF4X3J1bGVcIiwgXCJsb2NhbHN0b3JhZ2VcIiwgXCJpb3NzZWxlY3RcIiwgXCJkYXRlX2dldFwiLCBcImFsZXJ0X3dvcmRcIixcImlmX21lbnVcIl0sIGZ1bmN0aW9uKCQsIHlhbnpoZW5nLCBhamF4X3J1bGUsIGxvY2Fsc3RvcmFnZSwgaW9zc2VsZWN0LCBkYXRlX2dldCwgYWxlcnRfd29yZCxpZl9tZW51KSB7XG4gICAgICAgICQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvL+iuvue9ruiPnOWNleepui0tLeWPlua2iOS6hm5hdGl2ZeeahOW8leeUqDAxMDZcbiAgICAgICAgICAgIC8vIHZhciBtZW51X2RhdGEgPSB7IG1lbnVzOiBbXSB9O1xuICAgICAgICAgICAgLy8gbmF0aXZlLnNldE5hdk1lbnUobWVudV9kYXRhLCBmdW5jdGlvbihjYikge1xuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGNiLnJldCk7XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIC8v5Yqg6L295o+Q56S65by55qGGXG4gICAgICAgICAgICBhbGVydF93b3JkLnRvYXN0X2RhdGFfc2hvcnQoJ2JvZHknLCfph5Hpop3pnIDlpKfkuo4w5LiU5LiN6LaF6L+HMjAwMCcpO1xuICAgICAgICAgICAgdmFyIHRvZGF5X3RpbWVzID0gZGF0ZV9nZXQubm93WWVhciArICcvJyArIGRhdGVfZ2V0Lm5vd01vbnRoICsgJy8nICsgZGF0ZV9nZXQubm93RGF0ZSArICcgMDA6MDA6MDAnO1xuICAgICAgICAgICAgLy/orr7nva7lgqjlgLzmtLvliqgtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvL+iOt+WPluW6l+mTuuWQjeensFxuICAgICAgICAgICAgICAgIHZhciBkYXRhX3Nob3BuYW1lID0ge307XG4gICAgICAgICAgICAgICAgYWpheF9ydWxlLmFqYXhfcnVsZSgnL3ByZXBhaWQvdjEvYXBpL2IvbWVyY2hhbnRfaW5mbycsICdHRVQnLCAnanNvbicsICcnLCAnLnpoZWNlbmcnLCBnZXRfc2hvcG5hbWUpO1xuICAgICAgICAgICAgICAgIC8v6I635Y+W5Yid5aeL5YC8XG4gICAgICAgICAgICAgICAgbG9jYWxzdG9yYWdlLmdldF9zdG9yYWdlKGdldF9kYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy/ngrnlh7vlvIDlp4vml7bpl7RcbiAgICAgICAgICAgICQoJy5qc19zdGFydGltZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBzaG93RG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzX3N0YXJ0aW1lJyk7XG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSBzaG93RG9tLmRhdGFzZXRbJ3llYXInXTtcbiAgICAgICAgICAgICAgICB2YXIgbW9udGggPSBzaG93RG9tLmRhdGFzZXRbJ21vbnRoJ107XG4gICAgICAgICAgICAgICAgdmFyIGRheSA9IHNob3dEb20uZGF0YXNldFsnZGF5J107XG5cbiAgICAgICAgICAgICAgICB2YXIgYmFua1NlbGVjdCA9IG5ldyBpb3NzZWxlY3QoMywgW2RhdGVfZ2V0LnllYXJEYXRhLCBkYXRlX2dldC5tb250aERhdGEsIGRhdGVfZ2V0LmRhdGVEYXRhXSwge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6ICcuaW9zX3NlbGVjdF9jb250YWluZXInLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+mAieaLqeW8gOWni+aXtumXtCcsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1IZWlnaHQ6IDUwLFxuICAgICAgICAgICAgICAgICAgICBpdGVtU2hvd0NvdW50OiAzLFxuICAgICAgICAgICAgICAgICAgICByZWxhdGlvbjogWzEsIDEsIDAsIDBdLFxuICAgICAgICAgICAgICAgICAgICBvbmVMZXZlbElkOiB5ZWFyLFxuICAgICAgICAgICAgICAgICAgICB0d29MZXZlbElkOiBtb250aCxcbiAgICAgICAgICAgICAgICAgICAgdGhyZWVMZXZlbElkOiBkYXksXG4gICAgICAgICAgICAgICAgICAgIC8vc2hvd0xvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih5ZWFyX2RhdGEsIG1vbnRoX2RhdGEsIGRheV9kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RG9tLmRhdGFzZXRbJ3llYXInXSA9IHllYXJfZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dEb20uZGF0YXNldFsnbW9udGgnXSA9IG1vbnRoX2RhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RG9tLmRhdGFzZXRbJ2RheSddID0gZGF5X2RhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RG9tLnZhbHVlID0gbW9udGhfZGF0YS5pZCArICfmnIgnICsgZGF5X2RhdGEuaWQgKyAn5pelJztcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzdGFydGltZScpLnZhbCh5ZWFyX2RhdGEuaWQgKyAnLScgKyBtb250aF9kYXRhLmlkICsgJy0nICsgZGF5X2RhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/orr7nva7nu5PmnZ/ml7bpl7TnmoTpu5jorqTml7bpl7QtLeW8gOWni+aXtumXtFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJCgnLmpzX2VuZHRpbWUnKS5hdHRyKCdkYXRhLXllYXInLCB5ZWFyX2RhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJCgnLmpzX2VuZHRpbWUnKS5hdHRyKCdkYXRhLW1vbnRoJywgbW9udGhfZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkKCcuanNfZW5kdGltZScpLmF0dHIoJ2RhdGEtZGF5JywgZGF5X2RhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8v54K55Ye75Yiw5pyf5pe26Ze0XG4gICAgICAgICAgICAkKCcuanNfZW5kdGltZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBzaG93RG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzX2VuZHRpbWUnKTtcbiAgICAgICAgICAgICAgICB2YXIgeWVhciA9IHNob3dEb20uZGF0YXNldFsneWVhciddO1xuICAgICAgICAgICAgICAgIHZhciBtb250aCA9IHNob3dEb20uZGF0YXNldFsnbW9udGgnXTtcbiAgICAgICAgICAgICAgICB2YXIgZGF5ID0gc2hvd0RvbS5kYXRhc2V0WydkYXknXTtcblxuICAgICAgICAgICAgICAgIHZhciBiYW5rU2VsZWN0ID0gbmV3IGlvc3NlbGVjdCgzLCBbZGF0ZV9nZXQueWVhckRhdGEsIGRhdGVfZ2V0Lm1vbnRoRGF0YSwgZGF0ZV9nZXQuZGF0ZURhdGFdLCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogJy5pb3Nfc2VsZWN0X2NvbnRhaW5lcicsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6YCJ5oup57uT5p2f5pe26Ze0JyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbUhlaWdodDogNTAsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1TaG93Q291bnQ6IDMsXG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uOiBbMSwgMSwgMCwgMF0sXG4gICAgICAgICAgICAgICAgICAgIG9uZUxldmVsSWQ6IHllYXIsXG4gICAgICAgICAgICAgICAgICAgIHR3b0xldmVsSWQ6IG1vbnRoLFxuICAgICAgICAgICAgICAgICAgICB0aHJlZUxldmVsSWQ6IGRheSxcbiAgICAgICAgICAgICAgICAgICAgLy9zaG93TG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHllYXJfZGF0YSwgbW9udGhfZGF0YSwgZGF5X2RhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dEb20uZGF0YXNldFsneWVhciddID0geWVhcl9kYXRhLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0RvbS5kYXRhc2V0Wydtb250aCddID0gbW9udGhfZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dEb20uZGF0YXNldFsnZGF5J10gPSBkYXlfZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dEb20udmFsdWUgPSBtb250aF9kYXRhLmlkICsgJ+aciCcgKyBkYXlfZGF0YS5pZCArICfml6UnO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2VuZHRpbWUnKS52YWwoeWVhcl9kYXRhLmlkICsgJy0nICsgbW9udGhfZGF0YS5pZCArICctJyArIGRheV9kYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL+eCueWHu+WinuWKoOinhOWImVxuICAgICAgICAgICAgJCgnLmpzX2FkZF9hY3Rpdml0eScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBkZF9saXN0ID0gJCgnLmpzX3J1bGUgZGQnKS5sZW5ndGggLSAwO1xuICAgICAgICAgICAgICAgIHZhciBkZF9kZXRhaWwgPSAnPGRkIGRhdGEtaW5kZXg9XCJcIj7lgqjlgLw8aW5wdXQgY2xhc3M9XCJ0ZXh0IHRleHRfc2hvcnQganNfY2h1IGpzX3N0b3J1bGVcIiB0eXBlPVwidGVsXCIgdmFsdWU9XCJcIiBuYW1lPVwicGF5X2FtdFwiIC8+5YWD6YCBPGlucHV0IGNsYXNzPVwidGV4dCB0ZXh0X3Nob3J0IGpzX3NvbmcganNfc3RvcnVsZVwiIHR5cGU9XCJ0ZWxcIiB2YWx1ZT1cIlwiIG5hbWU9XCJwcmVzZW50X2FtdFwiIC8+5YWDPGkgY2xhc3M9XCJkZWxldGUganNfcnVsZWRlbGV0ZVwiIG9uY2xpY2s9XCJkZWxldGVfcnVsZSh0aGlzKVwiPjwvaT48L2RkPic7XG4gICAgICAgICAgICAgICAgaWYgKGRkX2xpc3QgPD0gMykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGRfbGlzdCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+esrOS4gOadoeWinuWKoOWIoOmZpOaMiemSrlxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3J1bGUgZGQnKS5hcHBlbmQoJzxpIGNsYXNzPVwiZGVsZXRlIGpzX3J1bGVkZWxldGVcIiBvbmNsaWNrPVwiZGVsZXRlX3J1bGUodGhpcylcIj48L2k+Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRkX2xpc3QgPT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/orr7nva7kuLrkuI3lj6/mt7vliqDnmoTmjInpkq7moLflvI9cbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmFkZF9ydWxlJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmFkZF9ydWxlX25vJykuY3NzKCdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlJykuYXBwZW5kKGRkX2RldGFpbCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlX2Vycm9yJykucmVtb3ZlQ2xhc3MoJ3NwYW5fdGlwcycpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlX2Vycm9yJykuYWRkQ2xhc3MoJ3NwYW5fdGlwcycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy/ngrnlh7vliKDpmaTop4TliJlcbiAgICAgICAgICAgIC8vICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuanNfcnVsZWRlbGV0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gICAgIHZhciBkZF9saXN0ID0gJCgnLmpzX3J1bGUgZGQnKS5sZW5ndGggLSAwO1xuICAgICAgICAgICAgLy8gICAgIGlmIChkZF9saXN0ID09IDIpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgLy/liKDpmaTnrKzkuIDmnaHmlbDmja7lkI7pnaLnmoTliKDpmaTmjInpkq5cbiAgICAgICAgICAgIC8vICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCdkZCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgLy8gICAgICAgICAkKCcuanNfcnVsZSBkZCBpLmpzX3J1bGVkZWxldGUnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvLyAgICAgJCh0aGlzKS5wYXJlbnRzKCdkZCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgLy8gICAgICQoJy5qc19ydWxlX2Vycm9yJykucmVtb3ZlQ2xhc3MoJ3NwYW5fdGlwcycpO1xuICAgICAgICAgICAgLy8gICAgICQoJy5qc19hZGRfYWN0aXZpdHknKS5maW5kKCcuYWRkX3J1bGUnKS5jc3MoJ2Rpc3BsYXknLCAnaW5saW5lLWJsb2NrJyk7XG4gICAgICAgICAgICAvLyAgICAgJCgnLmpzX2FkZF9hY3Rpdml0eScpLmZpbmQoJy5hZGRfcnVsZV9ubycpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIC8v5aGr5YaZ5YKo5YC86LWg6YCB6YeR6aKdXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignaW5wdXQnLCAnLmpzX3N0b3J1bGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Jhc2hfbm93X3N0ciA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICAgICAgLy/lsIbpnZ7mlbDlrZfnmoTlrZfnrKbmm7/mjaLkuLrnqbpcbiAgICAgICAgICAgICAgICB2YXIgY3Jhc2hfbm93X3N0cmVuZCA9IGNyYXNoX25vd19zdHIucmVwbGFjZSgvW15cXGRdL2csICcnKTtcbiAgICAgICAgICAgICAgICAvL+WmguaenOi+k+WFpeS4uuepuuWxleekuuWFqOmDqOaPkOeOsFxuICAgICAgICAgICAgICAgIGlmIChjcmFzaF9ub3dfc3RyZW5kLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3Jhc2hfbm93X3N0cmVuZC5sZW5ndGggPT0gMSAmJiBjcmFzaF9ub3dfc3RyZW5kID09ICcwJykge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy/mlbTmlbDpg6jliIbmnIDplb805L2Nc3RhcnTvvIzkuJTkuI3lpKfkuo4yMDAwXG4gICAgICAgICAgICAgICAgdmFyIGNyYXNoX2VuZF96ID0gY3Jhc2hfbm93X3N0cmVuZC5zcGxpdCgnLicpWzBdO1xuICAgICAgICAgICAgICAgIC8v5aaC5p6c5pW05pWw6YOo5YiG6aaW5L2N5Li6MO+8jOWImeaIquWPluWQjuS5sOeahCBcbiAgICAgICAgICAgICAgICB2YXIgY3Jhc2hfZW5kX3pfZmlyc3QgPSBjcmFzaF9lbmRfei5zdWJzdHIoMCwgMSk7XG4gICAgICAgICAgICAgICAgaWYgKGNyYXNoX2VuZF96X2ZpcnN0ID09ICcwJykge1xuICAgICAgICAgICAgICAgICAgICBjcmFzaF9lbmRfeiA9IGNyYXNoX2VuZF96LnN1YnN0cigxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNyYXNoX2VuZF96Lmxlbmd0aCA+IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgY3Jhc2hfZW5kX3ogPSBjcmFzaF9lbmRfei5zdWJzdHIoMCwgNCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjcmFzaF9ub3dfc3RyZW5kLnNwbGl0KCcuJykubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3Jhc2hfZW5kX2wgPSBjcmFzaF9ub3dfc3RyZW5kLnNwbGl0KCcuJylbMV0uc3Vic3RyKDAsIDIpO1xuICAgICAgICAgICAgICAgICAgICBjcmFzaF9ub3dfc3RyZW5kID0gKGNyYXNoX2VuZF96IC0gMCkgKyAnLicgKyBjcmFzaF9lbmRfbDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjcmFzaF9ub3dfc3RyZW5kID0gY3Jhc2hfZW5kX3ogLSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpZihjcmFzaF9ub3dfc3RyZW5kPjIwMDApe1xuICAgICAgICAgICAgICAgIC8vICAgICAkKHRoaXMpLmFkZENsYXNzKCdlcnJvcl90aXBzJyk7XG4gICAgICAgICAgICAgICAgLy8gfWVsc2V7XG4gICAgICAgICAgICAgICAgLy8gICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yX3RpcHMnKTtcbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgLy/mlbTmlbDpg6jliIbmnIDplb8xMuS9jWVuZFxuICAgICAgICAgICAgICAgIC8v5o6n5Yi26L6T5YWl6ZW/5bqm5ZCO6LWL5YC85bm25bCG6K+l5YC86L2s5YyW5Li65a2X56ym5Liy5qC85byPXG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoY3Jhc2hfbm93X3N0cmVuZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8v5aGr5YaZ5aSH5rOo6aqM6K+BXG4gICAgICAgICAgICAkKCcuanNfbm90ZScpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBsZW5fdmFsID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgICAgICB2YXIgbGVuID0gbGVuX3ZhbC5sZW5ndGggLSAwO1xuICAgICAgICAgICAgICAgIGlmIChsZW4gPD0gNDApIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3dvcmR0aXAnKS5maW5kKCdzcGFuJykudGV4dCg0MCAtIGxlbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8kKCcuanNfbm90ZScpLnZhbChsZW5fdmFsLnN1YnN0cigwLCA0MCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL+a1i+ivlei+k+WFpeahhuWvuea1j+iniOWZqOeahOWPmOWMllxuICAgICAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvaXBob25lL2dpKSB8fCAoL01hYyBPUyBYL2kpLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgICAgICAgICAkKCcuanNfbm90ZScpLm9uKHtcbiAgICAgICAgICAgICAgICAgICAgJ2ZvY3VzJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2VjdGlvbl9mb290ZXInKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYm9keT09PScgKyAkKCdib2R5JykuaGVpZ2h0KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2F2YWlsSGVpZ2h0PT09JyArIHNjcmVlbi5hdmFpbEhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgYSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndG9wPT09JyArIGEpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnYmx1cic6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNlY3Rpb25fZm9vdGVyJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJCgnLmpzX3RlbCcpLm9uKHtcbiAgICAgICAgICAgICAgICAgICAgJ2ZvY3VzJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2VjdGlvbl9mb290ZXInKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdibHVyJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2VjdGlvbl9mb290ZXInKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbignZm9jdXMnLCAnLmpzX3N0b3J1bGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNlY3Rpb25fZm9vdGVyJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdibHVyJywgJy5qc19zdG9ydWxlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5zZWN0aW9uX2Zvb3RlcicpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v54K55Ye75o+Q5Lqk6aKE6KeIXG4gICAgICAgICAgICAkKCcuanNfYWRkYWN0aXZpdHlfc3ViJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgeWFuemhlbmcudGVsX2FjdGl2aXR5KCcuanNfdGVsJyk7XG4gICAgICAgICAgICAgICAgeWFuemhlbmcubmFtZV90ZXN0KCcuanNfbm90ZScsIDAsIDQwKTtcbiAgICAgICAgICAgICAgICB0aW1lX2FyZWEoKTtcbiAgICAgICAgICAgICAgICAkKCcuanNfc3RvcnVsZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHlhbnpoZW5nLm51bXByaWNlX3Rlc3QodGhpcywgMCwgNCwgMjAwMCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJCgnLmpzX3N0b3J1bGUnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZigkKHRoaXMpLmhhc0NsYXNzKCdlcnJvcl90aXBzJykpe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnRfd29yZC5hbGVydF93b3JkX3Nob3dfc2hvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBlcnJvcl9sZW4gPSAkKCcuZXJyb3JfdGlwcycpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JfbGVuID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8v5a2Y5YKo5pWw5o2u5bm26L+b5YWl5LiL5LiA5q2lXG4gICAgICAgICAgICAgICAgbG9jYWxzdG9yYWdlLnNldF9zdG9yYWdlKCk7XG4gICAgICAgICAgICAgICAgLy/lrZjlgqjlgqjlgLzop4TliJlcbiAgICAgICAgICAgICAgICB2YXIgcnVsZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgY2h1X2xlbiA9ICQoJy5qc19ydWxlIGRkJykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1X2xlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaHVfaHRtbCA9ICQoJy5qc19ydWxlIGRkJykuZXEoaSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaHVfa2V5ID0gY2h1X2h0bWwuZmluZCgnLmpzX2NodScpLmF0dHIoJ25hbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNodV92YWwgPSBjaHVfaHRtbC5maW5kKCcuanNfY2h1JykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb25nX2tleSA9IGNodV9odG1sLmZpbmQoJy5qc19zb25nJykuYXR0cignbmFtZScpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc29uZ192YWwgPSBjaHVfaHRtbC5maW5kKCcuanNfc29uZycpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZSA9IHsgZ3JpZF9pbmRleDogaSArIDEsIHBheV9hbXQ6IGNodV92YWwgKiAxMDAsIHByZXNlbnRfYW10OiBzb25nX3ZhbCAqIDEwMCB9O1xuICAgICAgICAgICAgICAgICAgICBydWxlcy5wdXNoKHJ1bGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsb2NhbHN0b3JhZ2Uuc2V0b25lX3N0b3JhZ2UoJ3J1bGVzJywgSlNPTi5zdHJpbmdpZnkocnVsZXMpKTtcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdCArICcvcHJlcGFpZC92MS9wYWdlL2IvYWN0aXZpdHlfcHJldmlldy5odG1sJztcbiAgICAgICAgICAgICAgICBpZl9tZW51LmdvdG9fdXJsKHVybCk7XG4gICAgICAgICAgICAgICAgLy8gaWYgKHR5cGVvZiBRRlBBWSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIC8vICAgICB2YXIgZ29fdXJsID0ge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgdXJpOiBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0ICsgJy9wcmVwYWlkL3YxL3BhZ2UvYi9hY3Rpdml0eV9wcmV2aWV3Lmh0bWwnLFxuICAgICAgICAgICAgICAgIC8vICAgICB9O1xuICAgICAgICAgICAgICAgIC8vICAgICBuYXRpdmUub3BlblVyaShnb191cmwsIGZ1bmN0aW9uKGNiKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhjYi5yZXQpO1xuICAgICAgICAgICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vICAgICBsb2NhdGlvbi5ocmVmID0gbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdCArICcvcHJlcGFpZC92MS9wYWdlL2IvYWN0aXZpdHlfcHJldmlldy5odG1sJztcbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8v5byA5aeL5pe26Ze05LiO57uT5p2f5pe26Ze055qE5Yik5patXG4gICAgICAgICAgICBmdW5jdGlvbiB0aW1lX2FyZWEoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0aW1lID0gJCgnLmpzX3N0YXJ0aW1lJyk7XG4gICAgICAgICAgICAgICAgdmFyIGVuZHRpbWUgPSAkKCcuanNfZW5kdGltZScpO1xuICAgICAgICAgICAgICAgIHZhciB0aXBzX3BpYyA9ICc8aSBjbGFzcz1cImljX3RpcHNcIj48L2k+JztcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRpbWUudmFsKCkgJiYgZW5kdGltZS52YWwoKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc195ZWFyID0gc3RhcnRpbWUuYXR0cignZGF0YS15ZWFyJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzX21vbnRoID0gc3RhcnRpbWUuYXR0cignZGF0YS1tb250aCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc19kYXkgPSBzdGFydGltZS5hdHRyKCdkYXRhLWRheScpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZV95ZWFyID0gZW5kdGltZS5hdHRyKCdkYXRhLXllYXInKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVfbW9udGggPSBlbmR0aW1lLmF0dHIoJ2RhdGEtbW9udGgnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVfZGF5ID0gZW5kdGltZS5hdHRyKCdkYXRhLWRheScpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc190aW1lID0gc195ZWFyICsgJy8nICsgc19tb250aCArICcvJyArIHNfZGF5ICsgJyAwMDowMDowMCc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlX3RpbWUgPSBlX3llYXIgKyAnLycgKyBlX21vbnRoICsgJy8nICsgZV9kYXkgKyAnIDIzOjU5OjU5JztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNfdGltZV9zID0gbmV3IERhdGUoc190aW1lKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlX3RpbWVfcyA9IG5ldyBEYXRlKGVfdGltZSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9kYXlfdGltZV9zID0gbmV3IERhdGUodG9kYXlfdGltZXMpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNfY2hhID0gZV90aW1lX3MgLSBzX3RpbWVfcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNfdGltZV9zIC0gdG9kYXlfdGltZV9zIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3RpbWV0aXBzJykuYWRkQ2xhc3MoJ2Vycm9yX3RpcHMnKS5maW5kKCdzcGFuJykuaHRtbCh0aXBzX3BpYyArICflvIDlp4vkuI3og73mr5Tku4rlpKnml6knKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qc190aW1ldGlwcycpLnJlbW92ZUNsYXNzKCdlcnJvcl90aXBzJykuZmluZCgnc3BhbicpLmh0bWwoJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlX3RpbWVfcyAtIHNfdGltZV9zID4gMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3RpbWV0aXBzJykuYWRkQ2xhc3MoJ2Vycm9yX3RpcHMnKS5maW5kKCdzcGFuJykuaHRtbCh0aXBzX3BpYyArICfml7bpl7TojIPlm7TlnKgzNjXlpKnkuYvlhoUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlX3RpbWVfcyAtIHNfdGltZV9zID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qc190aW1ldGlwcycpLnJlbW92ZUNsYXNzKCdlcnJvcl90aXBzJykuZmluZCgnc3BhbicpLmh0bWwoJycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3RpbWV0aXBzJykuYWRkQ2xhc3MoJ2Vycm9yX3RpcHMnKS5maW5kKCdzcGFuJykuaHRtbCh0aXBzX3BpYyArICfnu5PmnZ/ml7bpl7TkuI3og73mr5TlvIDlp4vml7bpl7Tml6knKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc190aW1ldGlwcycpLmFkZENsYXNzKCdlcnJvcl90aXBzJykuZmluZCgnc3BhbicpLmh0bWwodGlwc19waWMgKyAn5pe26Ze06IyD5Zu05ZyoMzY15aSp5LmL5YaFJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/ojrflj5bml7bpl7TlkI7orr7nva7ml6XmnJ/mmL7npLpcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldF9kYXRhKCkge1xuICAgICAgICAgICAgICAgIC8v5re75Yqg6YCJ5Lit5LqL5Lu277yM5Lul5L6/dGV4dGFyZWHmlbDlgLzmmL7npLpcbiAgICAgICAgICAgICAgICAkKCcuanNfZW5kdGltZScpLmZvY3VzKCk7IC8v6K+l6L6T5YWl5qGGaW5wdXTkuLpyZWFkb25seeS4jeS8muinpuWPkei+k+WFpeahhuS6i+S7tlxuICAgICAgICAgICAgICAgIC8v5Ymp5L2Z5Y+v6L6T5YWl5a2X5pWwXG4gICAgICAgICAgICAgICAgdmFyIHdvcmR0aXAgPSAkKCcuanNfbm90ZScpLnZhbCgpLmxlbmd0aCAtIDA7XG4gICAgICAgICAgICAgICAgJCgnLmpzX3dvcmR0aXAgc3BhbicpLnRleHQoNDAgLSB3b3JkdGlwKTtcbiAgICAgICAgICAgICAgICAvL+aXpeacn1xuICAgICAgICAgICAgICAgIHZhciBzdGFydGltZSA9ICQoJyNzdGFydGltZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydGltZV96dSA9IHN0YXJ0aW1lLnNwbGl0KCctJyk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19zdGFydGltZScpLmRhdGEoJ3llYXInLCBzdGFydGltZV96dVswXSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19zdGFydGltZScpLmRhdGEoJ21vbnRoJywgc3RhcnRpbWVfenVbMV0pO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfc3RhcnRpbWUnKS5kYXRhKCdkYXknLCBzdGFydGltZV96dVsyXSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19zdGFydGltZScpLnZhbChzdGFydGltZV96dVsxXSArICfmnIgnICsgc3RhcnRpbWVfenVbMl0gKyAn5pelJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3N0YXJ0aW1lJykuZGF0YSgneWVhcicsIGRhdGVfZ2V0Lm5vd1llYXIpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfc3RhcnRpbWUnKS5kYXRhKCdtb250aCcsIGRhdGVfZ2V0Lm5vd01vbnRoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3N0YXJ0aW1lJykuZGF0YSgnZGF5JywgZGF0ZV9nZXQubm93RGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNzdGFydGltZScpLnZhbChkYXRlX2dldC5ub3dZZWFyICsgJy0nICsgZGF0ZV9nZXQubm93TW9udGggKyAnLScgKyBkYXRlX2dldC5ub3dEYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3N0YXJ0aW1lJykudmFsKCfku4rlpKknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGVuZHRpbWUgPSAkKCcjZW5kdGltZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgIHZhciBlbmR0aW1lX3p1ID0gZW5kdGltZS5zcGxpdCgnLScpO1xuICAgICAgICAgICAgICAgIGlmIChlbmR0aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19lbmR0aW1lJykuZGF0YSgneWVhcicsIGVuZHRpbWVfenVbMF0pO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfZW5kdGltZScpLmRhdGEoJ21vbnRoJywgZW5kdGltZV96dVsxXSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19lbmR0aW1lJykuZGF0YSgnZGF5JywgZW5kdGltZV96dVsyXSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19lbmR0aW1lJykudmFsKGVuZHRpbWVfenVbMV0gKyAn5pyIJyArIGVuZHRpbWVfenVbMl0gKyAn5pelJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX2VuZHRpbWUnKS5kYXRhKCd5ZWFyJywgZGF0ZV9nZXQubm93WWVhcik7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19lbmR0aW1lJykuZGF0YSgnbW9udGgnLCBkYXRlX2dldC5ub3dNb250aCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19lbmR0aW1lJykuZGF0YSgnZGF5JywgZGF0ZV9nZXQubm93RGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNlbmR0aW1lJykudmFsKGRhdGVfZ2V0Lm5vd1llYXIgKyAnLScgKyBkYXRlX2dldC5ub3dNb250aCArICctJyArIGRhdGVfZ2V0Lm5vd0RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfZW5kdGltZScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8v5YKo5YC86KeE5YiZLS3mnInpgIDlh7rvvIzmlL7nva7mnIDlkI5cbiAgICAgICAgICAgICAgICB2YXIgcnVsZXNfdCA9IGxvY2Fsc3RvcmFnZS5nZXRvbmVfc3RvcmFnZSgncnVsZXMnKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJ1bGVzX3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcnVsZXMgPSBKU09OLnBhcnNlKHJ1bGVzX3QpO1xuICAgICAgICAgICAgICAgIGlmIChydWxlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlIGRkJykuZXEoMCkuYXBwZW5kKCc8aSBjbGFzcz1cImRlbGV0ZSBqc19ydWxlZGVsZXRlXCIgb25jbGljaz1cImRlbGV0ZV9ydWxlKHRoaXMpXCI+PC9pPicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlIGRkJykuZXEoMCkuZmluZCgnaS5qc19ydWxlZGVsZXRlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChydWxlcy5sZW5ndGggPj0gNCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZScpLmZpbmQoJy5hZGRfcnVsZScpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlJykuZmluZCgnLmFkZF9ydWxlX25vJykuY3NzKCdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlJykuZmluZCgnLmFkZF9ydWxlJykuY3NzKCdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZScpLmZpbmQoJy5hZGRfcnVsZV9ubycpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNodV92YWx1ZSA9IChydWxlc1tpXS5wYXlfYW10IC8gMTAwKS50b0ZpeGVkKDApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc29uZ192YWx1ZSA9IChydWxlc1tpXS5wcmVzZW50X2FtdCAvIDEwMCkudG9GaXhlZCgwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4X3ZhbHVlID0gcnVsZXNbaV0uZ3JpZF9pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3J1bGUgZGQnKS5lcSgwKS5maW5kKCcuanNfY2h1JykudmFsKGNodV92YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZSBkZCcpLmVxKDApLmZpbmQoJy5qc19zb25nJykudmFsKHNvbmdfdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3J1bGUgZGQnKS5lcSgwKS5hdHRyKCdkYXRhLWluZGV4JywgaW5kZXhfdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRkX2RldGFpbCA9ICc8ZGQgZGF0YS1pbmRleD1cIicgKyBpbmRleF92YWx1ZSArICdcIj7lgqjlgLw8aW5wdXQgY2xhc3M9XCJ0ZXh0IHRleHRfc2hvcnQganNfY2h1IGpzX3N0b3J1bGVcIiB0eXBlPVwidGVsXCIgdmFsdWU9XCInICsgY2h1X3ZhbHVlICsgJ1wiIG5hbWU9XCJjaHVcIiAvPuWFg+mAgTxpbnB1dCBjbGFzcz1cInRleHQgdGV4dF9zaG9ydCBqc19zb25nIGpzX3N0b3J1bGVcIiB0eXBlPVwidGVsXCIgdmFsdWU9XCInICsgc29uZ192YWx1ZSArICdcIiBuYW1lPVwic29uZ1wiIC8+5YWDPGkgY2xhc3M9XCJkZWxldGUganNfcnVsZWRlbGV0ZVwiIG9uY2xpY2s9XCJkZWxldGVfcnVsZSh0aGlzKVwiPjwvaT48L2RkPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZScpLmFwcGVuZChkZF9kZXRhaWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL+iOt+WPluW6l+mTuuWQjeensFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0X3Nob3BuYW1lKHJldHVybl9kYXRhKSB7XG4gICAgICAgICAgICAgICAgJCgnLmpzX3Nob3BuYW1lJykudmFsKHJldHVybl9kYXRhLm1lcmNoYW50X25hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl19
