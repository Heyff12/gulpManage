"use strict";function delete_rule(e){var t=$(".js_rule dd").length-0;2==t&&($(e).parents("dd").remove(),$(".js_rule dd i.js_ruledelete").remove()),$(e).parents("dd").remove(),$(".js_rule_error").removeClass("span_tips"),$(".js_add_activity").find(".add_rule").css("display","inline-block"),$(".js_add_activity").find(".add_rule_no").css("display","none")}require(["../require-config"],function(){require(["zepto","yanzheng","ajax_rule","localstorage","iosselect","date_get","alert_word","if_menu"],function($,e,t,a,s,i,n,r){$(function(){function t(){var e=$(".js_startime"),t=$(".js_endtime"),a='<i class="ic_tips"></i>';if(e.val()&&t.val()){var s=e.attr("data-year"),i=e.attr("data-month"),n=e.attr("data-day"),r=t.attr("data-year"),d=t.attr("data-month"),o=t.attr("data-day"),_=s+"/"+i+"/"+n+" 00:00:00",u=r+"/"+d+"/"+o+" 23:59:59",c=new Date(_).getTime(),m=new Date(u).getTime(),j=new Date(l).getTime();if(c-j<0)return $(".js_timetips").addClass("error_tips").find("span").html(a+"开始不能比今天早"),!1;$(".js_timetips").removeClass("error_tips").find("span").html(""),m-c>31536e6?$(".js_timetips").addClass("error_tips").find("span").html(a+"时间范围在365天之内"):m-c>=0?$(".js_timetips").removeClass("error_tips").find("span").html(""):$(".js_timetips").addClass("error_tips").find("span").html(a+"结束时间不能比开始时间早")}else $(".js_timetips").addClass("error_tips").find("span").html(a+"时间范围在365天之内")}function d(){$(".js_startime").focus();var e=$(".js_note").val().length-0;$(".js_wordtip span").text(40-e);var t=$("#startime").val(),s=t.split("-");t?($(".js_startime").data("year",s[0]),$(".js_startime").data("month",s[1]),$(".js_startime").data("day",s[2]),$(".js_startime").val(s[1]+"月"+s[2]+"日")):($(".js_startime").data("year",i.nowYear),$(".js_startime").data("month",i.nowMonth),$(".js_startime").data("day",i.nowDate),$("#startime").val(i.nowYear+"-"+i.nowMonth+"-"+i.nowDate),$(".js_startime").val("今天"));var n=$("#endtime").val(),r=n.split("-");n?($(".js_endtime").data("year",r[0]),$(".js_endtime").data("month",r[1]),$(".js_endtime").data("day",r[2]),$(".js_endtime").val(r[1]+"月"+r[2]+"日")):($(".js_endtime").data("year",i.nowYear),$(".js_endtime").data("month",i.nowMonth),$(".js_endtime").data("day",i.nowDate),$("#endtime").val(i.nowYear+"-"+i.nowMonth+"-"+i.nowDate),$(".js_endtime").val(""));var d=a.getone_storage("rules");if(!d)return!1;var l=JSON.parse(d);l.length>1?$(".js_rule dd").eq(0).append('<i class="delete js_ruledelete" onclick="delete_rule(this)"></i>'):$(".js_rule dd").eq(0).find("i.js_ruledelete").remove(),l.length>=4?($(".js_rule").find(".add_rule").css("display","none"),$(".js_rule").find(".add_rule_no").css("display","inline-block")):($(".js_rule").find(".add_rule").css("display","inline-block"),$(".js_rule").find(".add_rule_no").css("display","none"));for(var o=0;o<l.length;o++){var _=(l[o].pay_amt/100).toFixed(0),u=(l[o].present_amt/100).toFixed(0),c=l[o].grid_index;if(0==o)$(".js_rule dd").eq(0).find(".js_chu").val(_),$(".js_rule dd").eq(0).find(".js_song").val(u),$(".js_rule dd").eq(0).attr("data-index",c);else{var m='<dd data-index="'+c+'">储值<input class="text text_short js_chu js_storule" type="tel" value="'+_+'" name="chu" />元送<input class="text text_short js_song js_storule" type="tel" value="'+u+'" name="song" />元<i class="delete js_ruledelete" onclick="delete_rule(this)"></i></dd>';$(".js_rule").append(m)}}}n.toast_data_short("body","储值金额不可超过2000元");var l=i.nowYear+"/"+i.nowMonth+"/"+i.nowDate+" 00:00:00";$(document).ready(function(){a.get_storage(d)}),$(".js_startime").on("click",function(){var e=document.querySelector(".js_startime"),t=e.dataset.year,a=e.dataset.month,n=e.dataset.day;new s(3,[i.yearData,i.monthData,i.dateData],{container:".ios_select_container",title:"选择开始时间",itemHeight:50,itemShowCount:3,relation:[1,1,0,0],oneLevelId:t,twoLevelId:a,threeLevelId:n,callback:function(t,a,s){e.dataset.year=t.id,e.dataset.month=a.id,e.dataset.day=s.id,e.value=a.id+"月"+s.id+"日",$("#startime").val(t.id+"-"+a.id+"-"+s.id)}})}),$(".js_endtime").on("click",function(){var e=document.querySelector(".js_endtime"),t=e.dataset.year,a=e.dataset.month,n=e.dataset.day;new s(3,[i.yearData,i.monthData,i.dateData],{container:".ios_select_container",title:"选择结束时间",itemHeight:50,itemShowCount:3,relation:[1,1,0,0],oneLevelId:t,twoLevelId:a,threeLevelId:n,callback:function(t,a,s){e.dataset.year=t.id,e.dataset.month=a.id,e.dataset.day=s.id,e.value=a.id+"月"+s.id+"日",$("#endtime").val(t.id+"-"+a.id+"-"+s.id)}})}),$(".js_add_activity").on("click",function(){var e=$(".js_rule dd").length-0,t='<dd data-index="">储值<input class="text text_short js_chu js_storule" type="tel" value="" name="pay_amt" />元送<input class="text text_short js_song js_storule" type="tel" value="" name="present_amt" />元<i class="delete js_ruledelete" onclick="delete_rule(this)"></i></dd>';e<=3?(1==e&&$(".js_rule dd").append('<i class="delete js_ruledelete" onclick="delete_rule(this)"></i>'),3==e&&($(this).find(".add_rule").css("display","none"),$(this).find(".add_rule_no").css("display","inline-block")),$(".js_rule").append(t),$(".js_rule_error").removeClass("span_tips")):$(".js_rule_error").addClass("span_tips")}),$(document).on("input",".js_storule",function(){var e=$(this).val(),t=e.replace(/[^\d]/g,"");if(0==t.length)return $(this).val(""),!1;if(1==t.length&&"0"==t)return $(this).val(""),!1;var a=t.split(".")[0],s=a.substr(0,1);if("0"==s&&(a=a.substr(1)),a.length>4&&(a=a.substr(0,4)),t.split(".").length>1){var i=t.split(".")[1].substr(0,2);t=a-0+"."+i}else t=a-0;$(this).val(t)}),$(".js_note").on("input",function(){var e=$(this).val(),t=e.length-0;return t<=40&&void $(".js_wordtip").find("span").text(40-t)}),$(".js_addactivity_sub").on("click",function(){e.tel_activity(".js_tel"),e.name_test(".js_note",0,40),t(),$(".js_storule").each(function(){e.numprice_test(this,0,4,2e3)}),$(".js_storule").each(function(){if($(this).hasClass("error_tips"))return n.alert_word_show_short(),!1});var s=$(".error_tips").length;if(s>0)return!1;a.set_storage();for(var i=[],d=$(".js_rule dd").length,l=0;l<d;l++){var o=$(".js_rule dd").eq(l),_=(o.find(".js_chu").attr("name"),o.find(".js_chu").val()),u=(o.find(".js_song").attr("name"),o.find(".js_song").val()),c={grid_index:l+1,pay_amt:100*_,present_amt:100*u};i.push(c)}a.setone_storage("rules",JSON.stringify(i));var m=location.protocol+"//"+location.host+"/prepaid/v1/page/b/activity_preview.html";r.goto_url(m)})})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImIvY3JlYXRlX2FjdGl2aXR5X2xvY2FsLmpzIl0sIm5hbWVzIjpbImRlbGV0ZV9ydWxlIiwib2JqIiwiZGRfbGlzdCIsIiQiLCJsZW5ndGgiLCJwYXJlbnRzIiwicmVtb3ZlIiwicmVtb3ZlQ2xhc3MiLCJmaW5kIiwiY3NzIiwicmVxdWlyZSIsInlhbnpoZW5nIiwiYWpheF9ydWxlIiwibG9jYWxzdG9yYWdlIiwiaW9zc2VsZWN0IiwiZGF0ZV9nZXQiLCJhbGVydF93b3JkIiwiaWZfbWVudSIsInRpbWVfYXJlYSIsInN0YXJ0aW1lIiwiZW5kdGltZSIsInRpcHNfcGljIiwidmFsIiwic195ZWFyIiwiYXR0ciIsInNfbW9udGgiLCJzX2RheSIsImVfeWVhciIsImVfbW9udGgiLCJlX2RheSIsInNfdGltZSIsImVfdGltZSIsInNfdGltZV9zIiwiRGF0ZSIsImdldFRpbWUiLCJlX3RpbWVfcyIsInRvZGF5X3RpbWVfcyIsInRvZGF5X3RpbWVzIiwiYWRkQ2xhc3MiLCJodG1sIiwiZ2V0X2RhdGEiLCJmb2N1cyIsIndvcmR0aXAiLCJ0ZXh0Iiwic3RhcnRpbWVfenUiLCJzcGxpdCIsImRhdGEiLCJub3dZZWFyIiwibm93TW9udGgiLCJub3dEYXRlIiwiZW5kdGltZV96dSIsInJ1bGVzX3QiLCJnZXRvbmVfc3RvcmFnZSIsInJ1bGVzIiwiSlNPTiIsInBhcnNlIiwiZXEiLCJhcHBlbmQiLCJpIiwiY2h1X3ZhbHVlIiwicGF5X2FtdCIsInRvRml4ZWQiLCJzb25nX3ZhbHVlIiwicHJlc2VudF9hbXQiLCJpbmRleF92YWx1ZSIsImdyaWRfaW5kZXgiLCJkZF9kZXRhaWwiLCJ0b2FzdF9kYXRhX3Nob3J0IiwiZG9jdW1lbnQiLCJyZWFkeSIsImdldF9zdG9yYWdlIiwib24iLCJzaG93RG9tIiwicXVlcnlTZWxlY3RvciIsInllYXIiLCJkYXRhc2V0IiwibW9udGgiLCJkYXkiLCJ5ZWFyRGF0YSIsIm1vbnRoRGF0YSIsImRhdGVEYXRhIiwiY29udGFpbmVyIiwidGl0bGUiLCJpdGVtSGVpZ2h0IiwiaXRlbVNob3dDb3VudCIsInJlbGF0aW9uIiwib25lTGV2ZWxJZCIsInR3b0xldmVsSWQiLCJ0aHJlZUxldmVsSWQiLCJjYWxsYmFjayIsInllYXJfZGF0YSIsIm1vbnRoX2RhdGEiLCJkYXlfZGF0YSIsImlkIiwidmFsdWUiLCJ0aGlzIiwiY3Jhc2hfbm93X3N0ciIsImNyYXNoX25vd19zdHJlbmQiLCJyZXBsYWNlIiwiY3Jhc2hfZW5kX3oiLCJjcmFzaF9lbmRfel9maXJzdCIsInN1YnN0ciIsImNyYXNoX2VuZF9sIiwibGVuX3ZhbCIsImxlbiIsInRlbF9hY3Rpdml0eSIsIm5hbWVfdGVzdCIsImVhY2giLCJudW1wcmljZV90ZXN0IiwiaGFzQ2xhc3MiLCJhbGVydF93b3JkX3Nob3dfc2hvcnQiLCJlcnJvcl9sZW4iLCJzZXRfc3RvcmFnZSIsImNodV9sZW4iLCJjaHVfaHRtbCIsImNodV92YWwiLCJzb25nX3ZhbCIsInJ1bGUiLCJwdXNoIiwic2V0b25lX3N0b3JhZ2UiLCJzdHJpbmdpZnkiLCJ1cmwiLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdCIsImdvdG9fdXJsIl0sIm1hcHBpbmdzIjoiWUFDQSxTQUFTQSxhQUFZQyxHQUNqQixHQUFJQyxHQUFVQyxFQUFFLGVBQWVDLE9BQVMsQ0FDekIsSUFBWEYsSUFFQUMsRUFBRUYsR0FBS0ksUUFBUSxNQUFNQyxTQUNyQkgsRUFBRSwrQkFBK0JHLFVBRXJDSCxFQUFFRixHQUFLSSxRQUFRLE1BQU1DLFNBQ3JCSCxFQUFFLGtCQUFrQkksWUFBWSxhQUNoQ0osRUFBRSxvQkFBb0JLLEtBQUssYUFBYUMsSUFBSSxVQUFXLGdCQUN2RE4sRUFBRSxvQkFBb0JLLEtBQUssZ0JBQWdCQyxJQUFJLFVBQVcsUUFFOURDLFNBQVMscUJBQXNCLFdBQzNCQSxTQUFTLFFBQVMsV0FBWSxZQUFhLGVBQWdCLFlBQWEsV0FBWSxhQUFhLFdBQVksU0FBU1AsRUFBR1EsRUFBVUMsRUFBV0MsRUFBY0MsRUFBV0MsRUFBVUMsRUFBV0MsR0FDeExkLEVBQUUsV0FtT0UsUUFBU2UsS0FDTCxHQUFJQyxHQUFXaEIsRUFBRSxnQkFDYmlCLEVBQVVqQixFQUFFLGVBQ1prQixFQUFXLHlCQUNmLElBQUlGLEVBQVNHLE9BQVNGLEVBQVFFLE1BQU8sQ0FDakMsR0FBSUMsR0FBU0osRUFBU0ssS0FBSyxhQUN2QkMsRUFBVU4sRUFBU0ssS0FBSyxjQUN4QkUsRUFBUVAsRUFBU0ssS0FBSyxZQUN0QkcsRUFBU1AsRUFBUUksS0FBSyxhQUN0QkksRUFBVVIsRUFBUUksS0FBSyxjQUN2QkssRUFBUVQsRUFBUUksS0FBSyxZQUNyQk0sRUFBU1AsRUFBUyxJQUFNRSxFQUFVLElBQU1DLEVBQVEsWUFDaERLLEVBQVNKLEVBQVMsSUFBTUMsRUFBVSxJQUFNQyxFQUFRLFlBQ2hERyxFQUFXLEdBQUlDLE1BQUtILEdBQVFJLFVBQzVCQyxFQUFXLEdBQUlGLE1BQUtGLEdBQVFHLFVBQzVCRSxFQUFlLEdBQUlILE1BQUtJLEdBQWFILFNBRXpDLElBQUlGLEVBQVdJLEVBQWUsRUFFMUIsTUFEQWpDLEdBQUUsZ0JBQWdCbUMsU0FBUyxjQUFjOUIsS0FBSyxRQUFRK0IsS0FBS2xCLEVBQVcsYUFDL0QsQ0FFUGxCLEdBQUUsZ0JBQWdCSSxZQUFZLGNBQWNDLEtBQUssUUFBUStCLEtBQUssSUFFOURKLEVBQVdILEVBQVcsUUFDdEI3QixFQUFFLGdCQUFnQm1DLFNBQVMsY0FBYzlCLEtBQUssUUFBUStCLEtBQUtsQixFQUFXLGVBQy9EYyxFQUFXSCxHQUFZLEVBQzlCN0IsRUFBRSxnQkFBZ0JJLFlBQVksY0FBY0MsS0FBSyxRQUFRK0IsS0FBSyxJQUU5RHBDLEVBQUUsZ0JBQWdCbUMsU0FBUyxjQUFjOUIsS0FBSyxRQUFRK0IsS0FBS2xCLEVBQVcsb0JBRzFFbEIsR0FBRSxnQkFBZ0JtQyxTQUFTLGNBQWM5QixLQUFLLFFBQVErQixLQUFLbEIsRUFBVyxlQUk5RSxRQUFTbUIsS0FFTHJDLEVBQUUsZ0JBQWdCc0MsT0FFbEIsSUFBSUMsR0FBVXZDLEVBQUUsWUFBWW1CLE1BQU1sQixPQUFTLENBQzNDRCxHQUFFLG9CQUFvQndDLEtBQUssR0FBS0QsRUFFaEMsSUFBSXZCLEdBQVdoQixFQUFFLGFBQWFtQixNQUMxQnNCLEVBQWN6QixFQUFTMEIsTUFBTSxJQUM3QjFCLElBQ0FoQixFQUFFLGdCQUFnQjJDLEtBQUssT0FBUUYsRUFBWSxJQUMzQ3pDLEVBQUUsZ0JBQWdCMkMsS0FBSyxRQUFTRixFQUFZLElBQzVDekMsRUFBRSxnQkFBZ0IyQyxLQUFLLE1BQU9GLEVBQVksSUFDMUN6QyxFQUFFLGdCQUFnQm1CLElBQUlzQixFQUFZLEdBQUssSUFBTUEsRUFBWSxHQUFLLE9BRTlEekMsRUFBRSxnQkFBZ0IyQyxLQUFLLE9BQVEvQixFQUFTZ0MsU0FDeEM1QyxFQUFFLGdCQUFnQjJDLEtBQUssUUFBUy9CLEVBQVNpQyxVQUN6QzdDLEVBQUUsZ0JBQWdCMkMsS0FBSyxNQUFPL0IsRUFBU2tDLFNBQ3ZDOUMsRUFBRSxhQUFhbUIsSUFBSVAsRUFBU2dDLFFBQVUsSUFBTWhDLEVBQVNpQyxTQUFXLElBQU1qQyxFQUFTa0MsU0FDL0U5QyxFQUFFLGdCQUFnQm1CLElBQUksTUFFMUIsSUFBSUYsR0FBVWpCLEVBQUUsWUFBWW1CLE1BQ3hCNEIsRUFBYTlCLEVBQVF5QixNQUFNLElBQzNCekIsSUFDQWpCLEVBQUUsZUFBZTJDLEtBQUssT0FBUUksRUFBVyxJQUN6Qy9DLEVBQUUsZUFBZTJDLEtBQUssUUFBU0ksRUFBVyxJQUMxQy9DLEVBQUUsZUFBZTJDLEtBQUssTUFBT0ksRUFBVyxJQUN4Qy9DLEVBQUUsZUFBZW1CLElBQUk0QixFQUFXLEdBQUssSUFBTUEsRUFBVyxHQUFLLE9BRTNEL0MsRUFBRSxlQUFlMkMsS0FBSyxPQUFRL0IsRUFBU2dDLFNBQ3ZDNUMsRUFBRSxlQUFlMkMsS0FBSyxRQUFTL0IsRUFBU2lDLFVBQ3hDN0MsRUFBRSxlQUFlMkMsS0FBSyxNQUFPL0IsRUFBU2tDLFNBQ3RDOUMsRUFBRSxZQUFZbUIsSUFBSVAsRUFBU2dDLFFBQVUsSUFBTWhDLEVBQVNpQyxTQUFXLElBQU1qQyxFQUFTa0MsU0FDOUU5QyxFQUFFLGVBQWVtQixJQUFJLElBR3pCLElBQUk2QixHQUFVdEMsRUFBYXVDLGVBQWUsUUFDMUMsS0FBS0QsRUFDRCxPQUFPLENBRVgsSUFBSUUsR0FBUUMsS0FBS0MsTUFBTUosRUFDbkJFLEdBQU1qRCxPQUFTLEVBQ2ZELEVBQUUsZUFBZXFELEdBQUcsR0FBR0MsT0FBTyxvRUFFOUJ0RCxFQUFFLGVBQWVxRCxHQUFHLEdBQUdoRCxLQUFLLG1CQUFtQkYsU0FFL0MrQyxFQUFNakQsUUFBVSxHQUNoQkQsRUFBRSxZQUFZSyxLQUFLLGFBQWFDLElBQUksVUFBVyxRQUMvQ04sRUFBRSxZQUFZSyxLQUFLLGdCQUFnQkMsSUFBSSxVQUFXLGtCQUVsRE4sRUFBRSxZQUFZSyxLQUFLLGFBQWFDLElBQUksVUFBVyxnQkFDL0NOLEVBQUUsWUFBWUssS0FBSyxnQkFBZ0JDLElBQUksVUFBVyxRQUV0RCxLQUFLLEdBQUlpRCxHQUFJLEVBQUdBLEVBQUlMLEVBQU1qRCxPQUFRc0QsSUFBSyxDQUNuQyxHQUFJQyxJQUFhTixFQUFNSyxHQUFHRSxRQUFVLEtBQUtDLFFBQVEsR0FDN0NDLEdBQWNULEVBQU1LLEdBQUdLLFlBQWMsS0FBS0YsUUFBUSxHQUNsREcsRUFBY1gsRUFBTUssR0FBR08sVUFDM0IsSUFBUyxHQUFMUCxFQUNBdkQsRUFBRSxlQUFlcUQsR0FBRyxHQUFHaEQsS0FBSyxXQUFXYyxJQUFJcUMsR0FDM0N4RCxFQUFFLGVBQWVxRCxHQUFHLEdBQUdoRCxLQUFLLFlBQVljLElBQUl3QyxHQUM1QzNELEVBQUUsZUFBZXFELEdBQUcsR0FBR2hDLEtBQUssYUFBY3dDLE9BQ3ZDLENBQ0gsR0FBSUUsR0FBWSxtQkFBcUJGLEVBQWMsMEVBQTRFTCxFQUFZLHdGQUEwRkcsRUFBYSx3RkFDbFAzRCxHQUFFLFlBQVlzRCxPQUFPUyxLQW5VakNsRCxFQUFXbUQsaUJBQWlCLE9BQVEsZ0JBQ3BDLElBQUk5QixHQUFjdEIsRUFBU2dDLFFBQVUsSUFBTWhDLEVBQVNpQyxTQUFXLElBQU1qQyxFQUFTa0MsUUFBVSxXQUV4RjlDLEdBQUVpRSxVQUFVQyxNQUFNLFdBS2R4RCxFQUFheUQsWUFBWTlCLEtBRzdCckMsRUFBRSxnQkFBZ0JvRSxHQUFHLFFBQVMsV0FDMUIsR0FBSUMsR0FBVUosU0FBU0ssY0FBYyxnQkFDakNDLEVBQU9GLEVBQVFHLFFBQVIsS0FDUEMsRUFBUUosRUFBUUcsUUFBUixNQUNSRSxFQUFNTCxFQUFRRyxRQUFSLEdBRU8sSUFBSTdELEdBQVUsR0FBSUMsRUFBUytELFNBQVUvRCxFQUFTZ0UsVUFBV2hFLEVBQVNpRSxXQUMvRUMsVUFBVyx3QkFDWEMsTUFBTyxTQUNQQyxXQUFZLEdBQ1pDLGNBQWUsRUFDZkMsVUFBVyxFQUFHLEVBQUcsRUFBRyxHQUNwQkMsV0FBWVosRUFDWmEsV0FBWVgsRUFDWlksYUFBY1gsRUFFZFksU0FBVSxTQUFTQyxFQUFXQyxFQUFZQyxHQUN0Q3BCLEVBQVFHLFFBQVIsS0FBMEJlLEVBQVVHLEdBQ3BDckIsRUFBUUcsUUFBUixNQUEyQmdCLEVBQVdFLEdBQ3RDckIsRUFBUUcsUUFBUixJQUF5QmlCLEVBQVNDLEdBQ2xDckIsRUFBUXNCLE1BQVFILEVBQVdFLEdBQUssSUFBTUQsRUFBU0MsR0FBSyxJQUNwRDFGLEVBQUUsYUFBYW1CLElBQUlvRSxFQUFVRyxHQUFLLElBQU1GLEVBQVdFLEdBQUssSUFBTUQsRUFBU0MsU0FTbkYxRixFQUFFLGVBQWVvRSxHQUFHLFFBQVMsV0FDekIsR0FBSUMsR0FBVUosU0FBU0ssY0FBYyxlQUNqQ0MsRUFBT0YsRUFBUUcsUUFBUixLQUNQQyxFQUFRSixFQUFRRyxRQUFSLE1BQ1JFLEVBQU1MLEVBQVFHLFFBQVIsR0FFTyxJQUFJN0QsR0FBVSxHQUFJQyxFQUFTK0QsU0FBVS9ELEVBQVNnRSxVQUFXaEUsRUFBU2lFLFdBQy9FQyxVQUFXLHdCQUNYQyxNQUFPLFNBQ1BDLFdBQVksR0FDWkMsY0FBZSxFQUNmQyxVQUFXLEVBQUcsRUFBRyxFQUFHLEdBQ3BCQyxXQUFZWixFQUNaYSxXQUFZWCxFQUNaWSxhQUFjWCxFQUVkWSxTQUFVLFNBQVNDLEVBQVdDLEVBQVlDLEdBQ3RDcEIsRUFBUUcsUUFBUixLQUEwQmUsRUFBVUcsR0FDcENyQixFQUFRRyxRQUFSLE1BQTJCZ0IsRUFBV0UsR0FDdENyQixFQUFRRyxRQUFSLElBQXlCaUIsRUFBU0MsR0FDbENyQixFQUFRc0IsTUFBUUgsRUFBV0UsR0FBSyxJQUFNRCxFQUFTQyxHQUFLLElBQ3BEMUYsRUFBRSxZQUFZbUIsSUFBSW9FLEVBQVVHLEdBQUssSUFBTUYsRUFBV0UsR0FBSyxJQUFNRCxFQUFTQyxTQUtsRjFGLEVBQUUsb0JBQW9Cb0UsR0FBRyxRQUFTLFdBQzlCLEdBQUlyRSxHQUFVQyxFQUFFLGVBQWVDLE9BQVMsRUFDcEM4RCxFQUFZLCtRQUNaaEUsSUFBVyxHQUNJLEdBQVhBLEdBRUFDLEVBQUUsZUFBZXNELE9BQU8sb0VBRWIsR0FBWHZELElBRUFDLEVBQUU0RixNQUFNdkYsS0FBSyxhQUFhQyxJQUFJLFVBQVcsUUFDekNOLEVBQUU0RixNQUFNdkYsS0FBSyxnQkFBZ0JDLElBQUksVUFBVyxpQkFFaEROLEVBQUUsWUFBWXNELE9BQU9TLEdBQ3JCL0QsRUFBRSxrQkFBa0JJLFlBQVksY0FFaENKLEVBQUUsa0JBQWtCbUMsU0FBUyxlQWlCckNuQyxFQUFFaUUsVUFBVUcsR0FBRyxRQUFTLGNBQWUsV0FDbkMsR0FBSXlCLEdBQWdCN0YsRUFBRTRGLE1BQU16RSxNQUV4QjJFLEVBQW1CRCxFQUFjRSxRQUFRLFNBQVUsR0FFdkQsSUFBK0IsR0FBM0JELEVBQWlCN0YsT0FFakIsTUFEQUQsR0FBRTRGLE1BQU16RSxJQUFJLEtBQ0wsQ0FFWCxJQUErQixHQUEzQjJFLEVBQWlCN0YsUUFBbUMsS0FBcEI2RixFQUVoQyxNQURBOUYsR0FBRTRGLE1BQU16RSxJQUFJLEtBQ0wsQ0FHWCxJQUFJNkUsR0FBY0YsRUFBaUJwRCxNQUFNLEtBQUssR0FFMUN1RCxFQUFvQkQsRUFBWUUsT0FBTyxFQUFHLEVBTzlDLElBTnlCLEtBQXJCRCxJQUNBRCxFQUFjQSxFQUFZRSxPQUFPLElBRWpDRixFQUFZL0YsT0FBUyxJQUNyQitGLEVBQWNBLEVBQVlFLE9BQU8sRUFBRyxJQUVwQ0osRUFBaUJwRCxNQUFNLEtBQUt6QyxPQUFTLEVBQUcsQ0FDeEMsR0FBSWtHLEdBQWNMLEVBQWlCcEQsTUFBTSxLQUFLLEdBQUd3RCxPQUFPLEVBQUcsRUFDM0RKLEdBQW9CRSxFQUFjLEVBQUssSUFBTUcsTUFFN0NMLEdBQW1CRSxFQUFjLENBU3JDaEcsR0FBRTRGLE1BQU16RSxJQUFJMkUsS0FHaEI5RixFQUFFLFlBQVlvRSxHQUFHLFFBQVMsV0FDdEIsR0FBSWdDLEdBQVVwRyxFQUFFNEYsTUFBTXpFLE1BQ2xCa0YsRUFBTUQsRUFBUW5HLE9BQVMsQ0FDM0IsT0FBSW9HLElBQU8sUUFDUHJHLEdBQUUsZUFBZUssS0FBSyxRQUFRbUMsS0FBSyxHQUFLNkQsS0E2Q2hEckcsRUFBRSx1QkFBdUJvRSxHQUFHLFFBQVMsV0FDakM1RCxFQUFTOEYsYUFBYSxXQUN0QjlGLEVBQVMrRixVQUFVLFdBQVksRUFBRyxJQUNsQ3hGLElBQ0FmLEVBQUUsZUFBZXdHLEtBQUssV0FDbEJoRyxFQUFTaUcsY0FBY2IsS0FBTSxFQUFHLEVBQUcsT0FFdkM1RixFQUFFLGVBQWV3RyxLQUFLLFdBQ2xCLEdBQUl4RyxFQUFFNEYsTUFBTWMsU0FBUyxjQUVqQixNQURBN0YsR0FBVzhGLHlCQUNKLEdBR2YsSUFBSUMsR0FBWTVHLEVBQUUsZUFBZUMsTUFDakMsSUFBSTJHLEVBQVksRUFDWixPQUFPLENBR1hsRyxHQUFhbUcsYUFJYixLQUFLLEdBRkQzRCxNQUNBNEQsRUFBVTlHLEVBQUUsZUFBZUMsT0FDdEJzRCxFQUFJLEVBQUdBLEVBQUl1RCxFQUFTdkQsSUFBSyxDQUM5QixHQUFJd0QsR0FBVy9HLEVBQUUsZUFBZXFELEdBQUdFLEdBRS9CeUQsR0FEVUQsRUFBUzFHLEtBQUssV0FBV2dCLEtBQUssUUFDOUIwRixFQUFTMUcsS0FBSyxXQUFXYyxPQUVuQzhGLEdBRFdGLEVBQVMxRyxLQUFLLFlBQVlnQixLQUFLLFFBQy9CMEYsRUFBUzFHLEtBQUssWUFBWWMsT0FDckMrRixHQUFTcEQsV0FBWVAsRUFBSSxFQUFHRSxRQUFtQixJQUFWdUQsRUFBZXBELFlBQXdCLElBQVhxRCxFQUNyRS9ELEdBQU1pRSxLQUFLRCxHQUVmeEcsRUFBYTBHLGVBQWUsUUFBU2pFLEtBQUtrRSxVQUFVbkUsR0FFcEQsSUFBSW9FLEdBQU1DLFNBQVNDLFNBQVcsS0FBT0QsU0FBU0UsS0FBTywwQ0FDckQzRyxHQUFRNEcsU0FBU0oiLCJmaWxlIjoiYi9jcmVhdGVfYWN0aXZpdHlfbG9jYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL+WIoOmZpOinhOWImVxuZnVuY3Rpb24gZGVsZXRlX3J1bGUob2JqKSB7XG4gICAgdmFyIGRkX2xpc3QgPSAkKCcuanNfcnVsZSBkZCcpLmxlbmd0aCAtIDA7XG4gICAgaWYgKGRkX2xpc3QgPT0gMikge1xuICAgICAgICAvL+WIoOmZpOesrOS4gOadoeaVsOaNruWQjumdoueahOWIoOmZpOaMiemSrlxuICAgICAgICAkKG9iaikucGFyZW50cygnZGQnKS5yZW1vdmUoKTtcbiAgICAgICAgJCgnLmpzX3J1bGUgZGQgaS5qc19ydWxlZGVsZXRlJykucmVtb3ZlKCk7XG4gICAgfVxuICAgICQob2JqKS5wYXJlbnRzKCdkZCcpLnJlbW92ZSgpO1xuICAgICQoJy5qc19ydWxlX2Vycm9yJykucmVtb3ZlQ2xhc3MoJ3NwYW5fdGlwcycpO1xuICAgICQoJy5qc19hZGRfYWN0aXZpdHknKS5maW5kKCcuYWRkX3J1bGUnKS5jc3MoJ2Rpc3BsYXknLCAnaW5saW5lLWJsb2NrJyk7XG4gICAgJCgnLmpzX2FkZF9hY3Rpdml0eScpLmZpbmQoJy5hZGRfcnVsZV9ubycpLmNzcygnZGlzcGxheScsICdub25lJyk7XG59XG5yZXF1aXJlKFsnLi4vcmVxdWlyZS1jb25maWcnXSwgZnVuY3Rpb24oKSB7XG4gICAgcmVxdWlyZShbXCJ6ZXB0b1wiLCBcInlhbnpoZW5nXCIsIFwiYWpheF9ydWxlXCIsIFwibG9jYWxzdG9yYWdlXCIsIFwiaW9zc2VsZWN0XCIsIFwiZGF0ZV9nZXRcIiwgXCJhbGVydF93b3JkXCIsXCJpZl9tZW51XCJdLCBmdW5jdGlvbigkLCB5YW56aGVuZywgYWpheF9ydWxlLCBsb2NhbHN0b3JhZ2UsIGlvc3NlbGVjdCwgZGF0ZV9nZXQsIGFsZXJ0X3dvcmQsaWZfbWVudSkge1xuICAgICAgICAkKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy/liqDovb3mj5DnpLrlvLnmoYZcbiAgICAgICAgICAgIGFsZXJ0X3dvcmQudG9hc3RfZGF0YV9zaG9ydCgnYm9keScsICflgqjlgLzph5Hpop3kuI3lj6/otoXov4cyMDAw5YWDJyk7XG4gICAgICAgICAgICB2YXIgdG9kYXlfdGltZXMgPSBkYXRlX2dldC5ub3dZZWFyICsgJy8nICsgZGF0ZV9nZXQubm93TW9udGggKyAnLycgKyBkYXRlX2dldC5ub3dEYXRlICsgJyAwMDowMDowMCc7XG4gICAgICAgICAgICAvL+iuvue9ruWCqOWAvOa0u+WKqC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8v6I635Y+W5bqX6ZO65ZCN56ewXG4gICAgICAgICAgICAgICAgdmFyIGRhdGFfc2hvcG5hbWUgPSB7fTtcbiAgICAgICAgICAgICAgICAvL2FqYXhfcnVsZS5hamF4X3J1bGUoJy9wcmVwYWlkL3YxL2FwaS9iL21lcmNoYW50X2luZm8nLCAnR0VUJywgJ2pzb24nLCAnJywgJy56aGVjZW5nJywgZ2V0X3Nob3BuYW1lKTtcbiAgICAgICAgICAgICAgICAvL+iOt+WPluWIneWni+WAvFxuICAgICAgICAgICAgICAgIGxvY2Fsc3RvcmFnZS5nZXRfc3RvcmFnZShnZXRfZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8v54K55Ye75byA5aeL5pe26Ze0XG4gICAgICAgICAgICAkKCcuanNfc3RhcnRpbWUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2hvd0RvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qc19zdGFydGltZScpO1xuICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gc2hvd0RvbS5kYXRhc2V0Wyd5ZWFyJ107XG4gICAgICAgICAgICAgICAgdmFyIG1vbnRoID0gc2hvd0RvbS5kYXRhc2V0Wydtb250aCddO1xuICAgICAgICAgICAgICAgIHZhciBkYXkgPSBzaG93RG9tLmRhdGFzZXRbJ2RheSddO1xuXG4gICAgICAgICAgICAgICAgdmFyIGJhbmtTZWxlY3QgPSBuZXcgaW9zc2VsZWN0KDMsIFtkYXRlX2dldC55ZWFyRGF0YSwgZGF0ZV9nZXQubW9udGhEYXRhLCBkYXRlX2dldC5kYXRlRGF0YV0sIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiAnLmlvc19zZWxlY3RfY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfpgInmi6nlvIDlp4vml7bpl7QnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtSGVpZ2h0OiA1MCxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVNob3dDb3VudDogMyxcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpb246IFsxLCAxLCAwLCAwXSxcbiAgICAgICAgICAgICAgICAgICAgb25lTGV2ZWxJZDogeWVhcixcbiAgICAgICAgICAgICAgICAgICAgdHdvTGV2ZWxJZDogbW9udGgsXG4gICAgICAgICAgICAgICAgICAgIHRocmVlTGV2ZWxJZDogZGF5LFxuICAgICAgICAgICAgICAgICAgICAvL3Nob3dMb2FkaW5nOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oeWVhcl9kYXRhLCBtb250aF9kYXRhLCBkYXlfZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0RvbS5kYXRhc2V0Wyd5ZWFyJ10gPSB5ZWFyX2RhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RG9tLmRhdGFzZXRbJ21vbnRoJ10gPSBtb250aF9kYXRhLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0RvbS5kYXRhc2V0WydkYXknXSA9IGRheV9kYXRhLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0RvbS52YWx1ZSA9IG1vbnRoX2RhdGEuaWQgKyAn5pyIJyArIGRheV9kYXRhLmlkICsgJ+aXpSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjc3RhcnRpbWUnKS52YWwoeWVhcl9kYXRhLmlkICsgJy0nICsgbW9udGhfZGF0YS5pZCArICctJyArIGRheV9kYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v6K6+572u57uT5p2f5pe26Ze055qE6buY6K6k5pe26Ze0LS3lvIDlp4vml7bpl7RcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICQoJy5qc19lbmR0aW1lJykuYXR0cignZGF0YS15ZWFyJywgeWVhcl9kYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICQoJy5qc19lbmR0aW1lJykuYXR0cignZGF0YS1tb250aCcsIG1vbnRoX2RhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJCgnLmpzX2VuZHRpbWUnKS5hdHRyKCdkYXRhLWRheScsIGRheV9kYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL+eCueWHu+WIsOacn+aXtumXtFxuICAgICAgICAgICAgJCgnLmpzX2VuZHRpbWUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2hvd0RvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qc19lbmR0aW1lJyk7XG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSBzaG93RG9tLmRhdGFzZXRbJ3llYXInXTtcbiAgICAgICAgICAgICAgICB2YXIgbW9udGggPSBzaG93RG9tLmRhdGFzZXRbJ21vbnRoJ107XG4gICAgICAgICAgICAgICAgdmFyIGRheSA9IHNob3dEb20uZGF0YXNldFsnZGF5J107XG5cbiAgICAgICAgICAgICAgICB2YXIgYmFua1NlbGVjdCA9IG5ldyBpb3NzZWxlY3QoMywgW2RhdGVfZ2V0LnllYXJEYXRhLCBkYXRlX2dldC5tb250aERhdGEsIGRhdGVfZ2V0LmRhdGVEYXRhXSwge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6ICcuaW9zX3NlbGVjdF9jb250YWluZXInLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+mAieaLqee7k+adn+aXtumXtCcsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1IZWlnaHQ6IDUwLFxuICAgICAgICAgICAgICAgICAgICBpdGVtU2hvd0NvdW50OiAzLFxuICAgICAgICAgICAgICAgICAgICByZWxhdGlvbjogWzEsIDEsIDAsIDBdLFxuICAgICAgICAgICAgICAgICAgICBvbmVMZXZlbElkOiB5ZWFyLFxuICAgICAgICAgICAgICAgICAgICB0d29MZXZlbElkOiBtb250aCxcbiAgICAgICAgICAgICAgICAgICAgdGhyZWVMZXZlbElkOiBkYXksXG4gICAgICAgICAgICAgICAgICAgIC8vc2hvd0xvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih5ZWFyX2RhdGEsIG1vbnRoX2RhdGEsIGRheV9kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RG9tLmRhdGFzZXRbJ3llYXInXSA9IHllYXJfZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dEb20uZGF0YXNldFsnbW9udGgnXSA9IG1vbnRoX2RhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RG9tLmRhdGFzZXRbJ2RheSddID0gZGF5X2RhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RG9tLnZhbHVlID0gbW9udGhfZGF0YS5pZCArICfmnIgnICsgZGF5X2RhdGEuaWQgKyAn5pelJztcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNlbmR0aW1lJykudmFsKHllYXJfZGF0YS5pZCArICctJyArIG1vbnRoX2RhdGEuaWQgKyAnLScgKyBkYXlfZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy/ngrnlh7vlop7liqDop4TliJlcbiAgICAgICAgICAgICQoJy5qc19hZGRfYWN0aXZpdHknKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGRfbGlzdCA9ICQoJy5qc19ydWxlIGRkJykubGVuZ3RoIC0gMDtcbiAgICAgICAgICAgICAgICB2YXIgZGRfZGV0YWlsID0gJzxkZCBkYXRhLWluZGV4PVwiXCI+5YKo5YC8PGlucHV0IGNsYXNzPVwidGV4dCB0ZXh0X3Nob3J0IGpzX2NodSBqc19zdG9ydWxlXCIgdHlwZT1cInRlbFwiIHZhbHVlPVwiXCIgbmFtZT1cInBheV9hbXRcIiAvPuWFg+mAgTxpbnB1dCBjbGFzcz1cInRleHQgdGV4dF9zaG9ydCBqc19zb25nIGpzX3N0b3J1bGVcIiB0eXBlPVwidGVsXCIgdmFsdWU9XCJcIiBuYW1lPVwicHJlc2VudF9hbXRcIiAvPuWFgzxpIGNsYXNzPVwiZGVsZXRlIGpzX3J1bGVkZWxldGVcIiBvbmNsaWNrPVwiZGVsZXRlX3J1bGUodGhpcylcIj48L2k+PC9kZD4nO1xuICAgICAgICAgICAgICAgIGlmIChkZF9saXN0IDw9IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRkX2xpc3QgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/nrKzkuIDmnaHlop7liqDliKDpmaTmjInpkq5cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlIGRkJykuYXBwZW5kKCc8aSBjbGFzcz1cImRlbGV0ZSBqc19ydWxlZGVsZXRlXCIgb25jbGljaz1cImRlbGV0ZV9ydWxlKHRoaXMpXCI+PC9pPicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZF9saXN0ID09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v6K6+572u5Li65LiN5Y+v5re75Yqg55qE5oyJ6ZKu5qC35byPXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5hZGRfcnVsZScpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5hZGRfcnVsZV9ubycpLmNzcygnZGlzcGxheScsICdpbmxpbmUtYmxvY2snKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZScpLmFwcGVuZChkZF9kZXRhaWwpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZV9lcnJvcicpLnJlbW92ZUNsYXNzKCdzcGFuX3RpcHMnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZV9lcnJvcicpLmFkZENsYXNzKCdzcGFuX3RpcHMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8v54K55Ye75Yig6Zmk6KeE5YiZXG4gICAgICAgICAgICAvLyAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmpzX3J1bGVkZWxldGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vICAgICB2YXIgZGRfbGlzdCA9ICQoJy5qc19ydWxlIGRkJykubGVuZ3RoIC0gMDtcbiAgICAgICAgICAgIC8vICAgICBpZiAoZGRfbGlzdCA9PSAyKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIC8v5Yig6Zmk56ys5LiA5p2h5pWw5o2u5ZCO6Z2i55qE5Yig6Zmk5oyJ6ZKuXG4gICAgICAgICAgICAvLyAgICAgICAgICQodGhpcykucGFyZW50cygnZGQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgJCgnLmpzX3J1bGUgZGQgaS5qc19ydWxlZGVsZXRlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gICAgICQodGhpcykucGFyZW50cygnZGQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIC8vICAgICAkKCcuanNfcnVsZV9lcnJvcicpLnJlbW92ZUNsYXNzKCdzcGFuX3RpcHMnKTtcbiAgICAgICAgICAgIC8vICAgICAkKCcuanNfYWRkX2FjdGl2aXR5JykuZmluZCgnLmFkZF9ydWxlJykuY3NzKCdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycpO1xuICAgICAgICAgICAgLy8gICAgICQoJy5qc19hZGRfYWN0aXZpdHknKS5maW5kKCcuYWRkX3J1bGVfbm8nKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAvL+Whq+WGmeWCqOWAvOi1oOmAgemHkeminVxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2lucHV0JywgJy5qc19zdG9ydWxlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNyYXNoX25vd19zdHIgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgICAgIC8v5bCG6Z2e5pWw5a2X55qE5a2X56ym5pu/5o2i5Li656m6XG4gICAgICAgICAgICAgICAgdmFyIGNyYXNoX25vd19zdHJlbmQgPSBjcmFzaF9ub3dfc3RyLnJlcGxhY2UoL1teXFxkXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgLy/lpoLmnpzovpPlhaXkuLrnqbrlsZXnpLrlhajpg6jmj5DnjrBcbiAgICAgICAgICAgICAgICBpZiAoY3Jhc2hfbm93X3N0cmVuZC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNyYXNoX25vd19zdHJlbmQubGVuZ3RoID09IDEgJiYgY3Jhc2hfbm93X3N0cmVuZCA9PSAnMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJycpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8v5pW05pWw6YOo5YiG5pyA6ZW/NOS9jXN0YXJ077yM5LiU5LiN5aSn5LqOMjAwMFxuICAgICAgICAgICAgICAgIHZhciBjcmFzaF9lbmRfeiA9IGNyYXNoX25vd19zdHJlbmQuc3BsaXQoJy4nKVswXTtcbiAgICAgICAgICAgICAgICAvL+WmguaenOaVtOaVsOmDqOWIhummluS9jeS4ujDvvIzliJnmiKrlj5blkI7kubDnmoQgXG4gICAgICAgICAgICAgICAgdmFyIGNyYXNoX2VuZF96X2ZpcnN0ID0gY3Jhc2hfZW5kX3ouc3Vic3RyKDAsIDEpO1xuICAgICAgICAgICAgICAgIGlmIChjcmFzaF9lbmRfel9maXJzdCA9PSAnMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3Jhc2hfZW5kX3ogPSBjcmFzaF9lbmRfei5zdWJzdHIoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjcmFzaF9lbmRfei5sZW5ndGggPiA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNyYXNoX2VuZF96ID0gY3Jhc2hfZW5kX3ouc3Vic3RyKDAsIDQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3Jhc2hfbm93X3N0cmVuZC5zcGxpdCgnLicpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNyYXNoX2VuZF9sID0gY3Jhc2hfbm93X3N0cmVuZC5zcGxpdCgnLicpWzFdLnN1YnN0cigwLCAyKTtcbiAgICAgICAgICAgICAgICAgICAgY3Jhc2hfbm93X3N0cmVuZCA9IChjcmFzaF9lbmRfeiAtIDApICsgJy4nICsgY3Jhc2hfZW5kX2w7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY3Jhc2hfbm93X3N0cmVuZCA9IGNyYXNoX2VuZF96IC0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaWYoY3Jhc2hfbm93X3N0cmVuZD4yMDAwKXtcbiAgICAgICAgICAgICAgICAvLyAgICAgJCh0aGlzKS5hZGRDbGFzcygnZXJyb3JfdGlwcycpO1xuICAgICAgICAgICAgICAgIC8vIH1lbHNle1xuICAgICAgICAgICAgICAgIC8vICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdlcnJvcl90aXBzJyk7XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIC8v5pW05pWw6YOo5YiG5pyA6ZW/MTLkvY1lbmRcbiAgICAgICAgICAgICAgICAvL+aOp+WItui+k+WFpemVv+W6puWQjui1i+WAvOW5tuWwhuivpeWAvOi9rOWMluS4uuWtl+espuS4suagvOW8j1xuICAgICAgICAgICAgICAgICQodGhpcykudmFsKGNyYXNoX25vd19zdHJlbmQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL+Whq+WGmeWkh+azqOmqjOivgVxuICAgICAgICAgICAgJCgnLmpzX25vdGUnKS5vbignaW5wdXQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuX3ZhbCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IGxlbl92YWwubGVuZ3RoIC0gMDtcbiAgICAgICAgICAgICAgICBpZiAobGVuIDw9IDQwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc193b3JkdGlwJykuZmluZCgnc3BhbicpLnRleHQoNDAgLSBsZW4pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vJCgnLmpzX25vdGUnKS52YWwobGVuX3ZhbC5zdWJzdHIoMCwgNDApKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gJCgnLmpzX25vdGUnKS5vbih7XG4gICAgICAgICAgICAvLyAgICAgLy8gJ2tleWRvd24nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vICAgICAvLyAgICAgdmFyIGxlbl92YWwgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgLy8gICAgIC8vICAgICB2YXIgbGVuID0gbGVuX3ZhbC5sZW5ndGggLSAwO1xuICAgICAgICAgICAgLy8gICAgIC8vICAgICBpZiAobGVuIDw9IDQwKSB7XG4gICAgICAgICAgICAvLyAgICAgLy8gICAgICAgICAkKCcuanNfd29yZHRpcCcpLmZpbmQoJ3NwYW4nKS50ZXh0KDQwIC0gbGVuKTtcbiAgICAgICAgICAgIC8vICAgICAvLyAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vICAgICAvLyAgICAgICAgICQoJy5qc19ub3RlJykudmFsKGxlbl92YWwuc3Vic3RyKDAsIDQwMCkpO1xuICAgICAgICAgICAgLy8gICAgIC8vICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgLy8gICAgIC8vICAgICB9XG4gICAgICAgICAgICAvLyAgICAgLy8gICAgIGNvbnNvbGUubG9nKGxlbl92YWwpO1xuICAgICAgICAgICAgLy8gICAgIC8vICAgICBjb25zb2xlLmxvZyhsZW4pO1xuICAgICAgICAgICAgLy8gICAgIC8vIH0sXG4gICAgICAgICAgICAvLyAgICAgJ2lucHV0JzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIHZhciBsZW5fdmFsID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgdmFyIGxlbiA9IGxlbl92YWwubGVuZ3RoIC0gMDtcbiAgICAgICAgICAgIC8vICAgICAgICAgaWYgKGxlbiA8PSA0MCkge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgJCgnLmpzX3dvcmR0aXAnKS5maW5kKCdzcGFuJykudGV4dCg0MCAtIGxlbik7XG4gICAgICAgICAgICAvLyAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAvLyQoJy5qc19ub3RlJykudmFsKGxlbl92YWwuc3Vic3RyKDAsIDQwKSk7ICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2cobGVuX3ZhbCk7XG4gICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGxlbik7XG4gICAgICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgICAgIC8vICAgICAvLyAnaW5wdXQnOmZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvLyAgICAgLy8gICAgIHZhciBsZW5fdmFsID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgIC8vICAgICAvLyAgICAgJCgnLmpzX25vdGUnKS52YWwobGVuX3ZhbC5zdWJzdHIoMCwgNDApKTtcbiAgICAgICAgICAgIC8vICAgICAvLyB9LFxuICAgICAgICAgICAgLy8gICAgIC8vICdrZXl1cCc6ZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vICAgICAvLyAgICAgdmFyIGxlbl92YWwgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgLy8gICAgIC8vICAgICAkKCcuanNfbm90ZScpLnZhbChsZW5fdmFsLnN1YnN0cigwLCA0MCkpO1xuICAgICAgICAgICAgLy8gICAgIC8vIH1cbiAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgZnVuY3Rpb24gY2FsbGJhY2soKXtcbiAgICAgICAgICAgICAgICB2YXIgbGVuX3ZhbCA9ICQoJy5qc19ub3RlJykudmFsKCk7XG4gICAgICAgICAgICAgICAgJCgnLmpzX25vdGUnKS52YWwobGVuX3ZhbC5zdWJzdHIoMCwgNDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v54K55Ye75o+Q5Lqk6aKE6KeIXG4gICAgICAgICAgICAkKCcuanNfYWRkYWN0aXZpdHlfc3ViJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgeWFuemhlbmcudGVsX2FjdGl2aXR5KCcuanNfdGVsJyk7XG4gICAgICAgICAgICAgICAgeWFuemhlbmcubmFtZV90ZXN0KCcuanNfbm90ZScsIDAsIDQwKTtcbiAgICAgICAgICAgICAgICB0aW1lX2FyZWEoKTtcbiAgICAgICAgICAgICAgICAkKCcuanNfc3RvcnVsZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHlhbnpoZW5nLm51bXByaWNlX3Rlc3QodGhpcywgMCwgNCwgMjAwMCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJCgnLmpzX3N0b3J1bGUnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnZXJyb3JfdGlwcycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydF93b3JkLmFsZXJ0X3dvcmRfc2hvd19zaG9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yX2xlbiA9ICQoJy5lcnJvcl90aXBzJykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcl9sZW4gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy/lrZjlgqjmlbDmja7lubbov5vlhaXkuIvkuIDmraVcbiAgICAgICAgICAgICAgICBsb2NhbHN0b3JhZ2Uuc2V0X3N0b3JhZ2UoKTtcbiAgICAgICAgICAgICAgICAvL+WtmOWCqOWCqOWAvOinhOWImVxuICAgICAgICAgICAgICAgIHZhciBydWxlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBjaHVfbGVuID0gJCgnLmpzX3J1bGUgZGQnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVfbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNodV9odG1sID0gJCgnLmpzX3J1bGUgZGQnKS5lcShpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNodV9rZXkgPSBjaHVfaHRtbC5maW5kKCcuanNfY2h1JykuYXR0cignbmFtZScpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2h1X3ZhbCA9IGNodV9odG1sLmZpbmQoJy5qc19jaHUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvbmdfa2V5ID0gY2h1X2h0bWwuZmluZCgnLmpzX3NvbmcnKS5hdHRyKCduYW1lJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb25nX3ZhbCA9IGNodV9odG1sLmZpbmQoJy5qc19zb25nJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBydWxlID0geyBncmlkX2luZGV4OiBpICsgMSwgcGF5X2FtdDogY2h1X3ZhbCAqIDEwMCwgcHJlc2VudF9hbXQ6IHNvbmdfdmFsICogMTAwIH07XG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzLnB1c2gocnVsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxvY2Fsc3RvcmFnZS5zZXRvbmVfc3RvcmFnZSgncnVsZXMnLCBKU09OLnN0cmluZ2lmeShydWxlcykpO1xuICAgICAgICAgICAgICAgIC8vbG9jYXRpb24uaHJlZiA9IGxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIGxvY2F0aW9uLmhvc3QgKyAnL1VzZXJzL3lheWEvRG9jdW1lbnRzL2pvYi9sb2NhbC/lgqjlgLxC56uvMi9zdG9yZS9odG1sL2IvYWN0aXZpdHlfcHJldmlldy5odG1sJztcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdCArICcvcHJlcGFpZC92MS9wYWdlL2IvYWN0aXZpdHlfcHJldmlldy5odG1sJztcbiAgICAgICAgICAgICAgICBpZl9tZW51LmdvdG9fdXJsKHVybCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8v5byA5aeL5pe26Ze05LiO57uT5p2f5pe26Ze055qE5Yik5patXG4gICAgICAgICAgICBmdW5jdGlvbiB0aW1lX2FyZWEoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0aW1lID0gJCgnLmpzX3N0YXJ0aW1lJyk7XG4gICAgICAgICAgICAgICAgdmFyIGVuZHRpbWUgPSAkKCcuanNfZW5kdGltZScpO1xuICAgICAgICAgICAgICAgIHZhciB0aXBzX3BpYyA9ICc8aSBjbGFzcz1cImljX3RpcHNcIj48L2k+JztcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRpbWUudmFsKCkgJiYgZW5kdGltZS52YWwoKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc195ZWFyID0gc3RhcnRpbWUuYXR0cignZGF0YS15ZWFyJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzX21vbnRoID0gc3RhcnRpbWUuYXR0cignZGF0YS1tb250aCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc19kYXkgPSBzdGFydGltZS5hdHRyKCdkYXRhLWRheScpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZV95ZWFyID0gZW5kdGltZS5hdHRyKCdkYXRhLXllYXInKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVfbW9udGggPSBlbmR0aW1lLmF0dHIoJ2RhdGEtbW9udGgnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVfZGF5ID0gZW5kdGltZS5hdHRyKCdkYXRhLWRheScpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc190aW1lID0gc195ZWFyICsgJy8nICsgc19tb250aCArICcvJyArIHNfZGF5ICsgJyAwMDowMDowMCc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlX3RpbWUgPSBlX3llYXIgKyAnLycgKyBlX21vbnRoICsgJy8nICsgZV9kYXkgKyAnIDIzOjU5OjU5JztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNfdGltZV9zID0gbmV3IERhdGUoc190aW1lKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlX3RpbWVfcyA9IG5ldyBEYXRlKGVfdGltZSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9kYXlfdGltZV9zID0gbmV3IERhdGUodG9kYXlfdGltZXMpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNfY2hhID0gZV90aW1lX3MgLSBzX3RpbWVfcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNfdGltZV9zIC0gdG9kYXlfdGltZV9zIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3RpbWV0aXBzJykuYWRkQ2xhc3MoJ2Vycm9yX3RpcHMnKS5maW5kKCdzcGFuJykuaHRtbCh0aXBzX3BpYyArICflvIDlp4vkuI3og73mr5Tku4rlpKnml6knKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qc190aW1ldGlwcycpLnJlbW92ZUNsYXNzKCdlcnJvcl90aXBzJykuZmluZCgnc3BhbicpLmh0bWwoJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlX3RpbWVfcyAtIHNfdGltZV9zID4gMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3RpbWV0aXBzJykuYWRkQ2xhc3MoJ2Vycm9yX3RpcHMnKS5maW5kKCdzcGFuJykuaHRtbCh0aXBzX3BpYyArICfml7bpl7TojIPlm7TlnKgzNjXlpKnkuYvlhoUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlX3RpbWVfcyAtIHNfdGltZV9zID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qc190aW1ldGlwcycpLnJlbW92ZUNsYXNzKCdlcnJvcl90aXBzJykuZmluZCgnc3BhbicpLmh0bWwoJycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3RpbWV0aXBzJykuYWRkQ2xhc3MoJ2Vycm9yX3RpcHMnKS5maW5kKCdzcGFuJykuaHRtbCh0aXBzX3BpYyArICfnu5PmnZ/ml7bpl7TkuI3og73mr5TlvIDlp4vml7bpl7Tml6knKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc190aW1ldGlwcycpLmFkZENsYXNzKCdlcnJvcl90aXBzJykuZmluZCgnc3BhbicpLmh0bWwodGlwc19waWMgKyAn5pe26Ze06IyD5Zu05ZyoMzY15aSp5LmL5YaFJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/ojrflj5bml7bpl7TlkI7orr7nva7ml6XmnJ/mmL7npLpcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldF9kYXRhKCkge1xuICAgICAgICAgICAgICAgIC8v5re75Yqg6YCJ5Lit5LqL5Lu277yM5Lul5L6/dGV4dGFyZWHmlbDlgLzmmL7npLpcbiAgICAgICAgICAgICAgICAkKCcuanNfc3RhcnRpbWUnKS5mb2N1cygpOyAvL+ivpei+k+WFpeahhmlucHV05Li6cmVhZG9ubHnkuI3kvJrop6blj5HovpPlhaXmoYbkuovku7ZcbiAgICAgICAgICAgICAgICAvL+WJqeS9meWPr+i+k+WFpeWtl+aVsFxuICAgICAgICAgICAgICAgIHZhciB3b3JkdGlwID0gJCgnLmpzX25vdGUnKS52YWwoKS5sZW5ndGggLSAwO1xuICAgICAgICAgICAgICAgICQoJy5qc193b3JkdGlwIHNwYW4nKS50ZXh0KDQwIC0gd29yZHRpcCk7XG4gICAgICAgICAgICAgICAgLy/ml6XmnJ9cbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRpbWUgPSAkKCcjc3RhcnRpbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRpbWVfenUgPSBzdGFydGltZS5zcGxpdCgnLScpO1xuICAgICAgICAgICAgICAgIGlmIChzdGFydGltZSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfc3RhcnRpbWUnKS5kYXRhKCd5ZWFyJywgc3RhcnRpbWVfenVbMF0pO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfc3RhcnRpbWUnKS5kYXRhKCdtb250aCcsIHN0YXJ0aW1lX3p1WzFdKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3N0YXJ0aW1lJykuZGF0YSgnZGF5Jywgc3RhcnRpbWVfenVbMl0pO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfc3RhcnRpbWUnKS52YWwoc3RhcnRpbWVfenVbMV0gKyAn5pyIJyArIHN0YXJ0aW1lX3p1WzJdICsgJ+aXpScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19zdGFydGltZScpLmRhdGEoJ3llYXInLCBkYXRlX2dldC5ub3dZZWFyKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3N0YXJ0aW1lJykuZGF0YSgnbW9udGgnLCBkYXRlX2dldC5ub3dNb250aCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19zdGFydGltZScpLmRhdGEoJ2RheScsIGRhdGVfZ2V0Lm5vd0RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjc3RhcnRpbWUnKS52YWwoZGF0ZV9nZXQubm93WWVhciArICctJyArIGRhdGVfZ2V0Lm5vd01vbnRoICsgJy0nICsgZGF0ZV9nZXQubm93RGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19zdGFydGltZScpLnZhbCgn5LuK5aSpJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBlbmR0aW1lID0gJCgnI2VuZHRpbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kdGltZV96dSA9IGVuZHRpbWUuc3BsaXQoJy0nKTtcbiAgICAgICAgICAgICAgICBpZiAoZW5kdGltZSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfZW5kdGltZScpLmRhdGEoJ3llYXInLCBlbmR0aW1lX3p1WzBdKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX2VuZHRpbWUnKS5kYXRhKCdtb250aCcsIGVuZHRpbWVfenVbMV0pO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfZW5kdGltZScpLmRhdGEoJ2RheScsIGVuZHRpbWVfenVbMl0pO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfZW5kdGltZScpLnZhbChlbmR0aW1lX3p1WzFdICsgJ+aciCcgKyBlbmR0aW1lX3p1WzJdICsgJ+aXpScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5qc19lbmR0aW1lJykuZGF0YSgneWVhcicsIGRhdGVfZ2V0Lm5vd1llYXIpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfZW5kdGltZScpLmRhdGEoJ21vbnRoJywgZGF0ZV9nZXQubm93TW9udGgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfZW5kdGltZScpLmRhdGEoJ2RheScsIGRhdGVfZ2V0Lm5vd0RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjZW5kdGltZScpLnZhbChkYXRlX2dldC5ub3dZZWFyICsgJy0nICsgZGF0ZV9nZXQubm93TW9udGggKyAnLScgKyBkYXRlX2dldC5ub3dEYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX2VuZHRpbWUnKS52YWwoJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL+WCqOWAvOinhOWImS0t5pyJ6YCA5Ye677yM5pS+572u5pyA5ZCOXG4gICAgICAgICAgICAgICAgdmFyIHJ1bGVzX3QgPSBsb2NhbHN0b3JhZ2UuZ2V0b25lX3N0b3JhZ2UoJ3J1bGVzJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFydWxlc190KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJ1bGVzID0gSlNPTi5wYXJzZShydWxlc190KTtcbiAgICAgICAgICAgICAgICBpZiAocnVsZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZSBkZCcpLmVxKDApLmFwcGVuZCgnPGkgY2xhc3M9XCJkZWxldGUganNfcnVsZWRlbGV0ZVwiIG9uY2xpY2s9XCJkZWxldGVfcnVsZSh0aGlzKVwiPjwvaT4nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZSBkZCcpLmVxKDApLmZpbmQoJ2kuanNfcnVsZWRlbGV0ZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocnVsZXMubGVuZ3RoID49IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3J1bGUnKS5maW5kKCcuYWRkX3J1bGUnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZScpLmZpbmQoJy5hZGRfcnVsZV9ubycpLmNzcygnZGlzcGxheScsICdpbmxpbmUtYmxvY2snKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcuanNfcnVsZScpLmZpbmQoJy5hZGRfcnVsZScpLmNzcygnZGlzcGxheScsICdpbmxpbmUtYmxvY2snKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3J1bGUnKS5maW5kKCcuYWRkX3J1bGVfbm8nKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaHVfdmFsdWUgPSAocnVsZXNbaV0ucGF5X2FtdCAvIDEwMCkudG9GaXhlZCgwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvbmdfdmFsdWUgPSAocnVsZXNbaV0ucHJlc2VudF9hbXQgLyAxMDApLnRvRml4ZWQoMCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleF92YWx1ZSA9IHJ1bGVzW2ldLmdyaWRfaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlIGRkJykuZXEoMCkuZmluZCgnLmpzX2NodScpLnZhbChjaHVfdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3J1bGUgZGQnKS5lcSgwKS5maW5kKCcuanNfc29uZycpLnZhbChzb25nX3ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qc19ydWxlIGRkJykuZXEoMCkuYXR0cignZGF0YS1pbmRleCcsIGluZGV4X3ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZF9kZXRhaWwgPSAnPGRkIGRhdGEtaW5kZXg9XCInICsgaW5kZXhfdmFsdWUgKyAnXCI+5YKo5YC8PGlucHV0IGNsYXNzPVwidGV4dCB0ZXh0X3Nob3J0IGpzX2NodSBqc19zdG9ydWxlXCIgdHlwZT1cInRlbFwiIHZhbHVlPVwiJyArIGNodV92YWx1ZSArICdcIiBuYW1lPVwiY2h1XCIgLz7lhYPpgIE8aW5wdXQgY2xhc3M9XCJ0ZXh0IHRleHRfc2hvcnQganNfc29uZyBqc19zdG9ydWxlXCIgdHlwZT1cInRlbFwiIHZhbHVlPVwiJyArIHNvbmdfdmFsdWUgKyAnXCIgbmFtZT1cInNvbmdcIiAvPuWFgzxpIGNsYXNzPVwiZGVsZXRlIGpzX3J1bGVkZWxldGVcIiBvbmNsaWNrPVwiZGVsZXRlX3J1bGUodGhpcylcIj48L2k+PC9kZD4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzX3J1bGUnKS5hcHBlbmQoZGRfZGV0YWlsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v6I635Y+W5bqX6ZO65ZCN56ewXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRfc2hvcG5hbWUocmV0dXJuX2RhdGEpIHtcbiAgICAgICAgICAgICAgICAkKCcuanNfc2hvcG5hbWUnKS52YWwocmV0dXJuX2RhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl19
