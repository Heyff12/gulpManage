/**
 * rechargeB - rechargeB详情
 * @version v1.0.0
 * @link 
 * @license ISC
 */
function hideMenu(){WeixinJSBridge.call("hideOptionMenu"),WeixinJSBridge.call("hideToolbar")}function click_chulist(e){$(e).addClass("li_choose").siblings("li").removeClass("li_choose")}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",hideMenu,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",hideMenu),document.attachEvent("onWeixinJSBridgeReady",hideMenu)):hideMenu(),require(["../require-config"],function(){require(["zepto","ajax_rule"],function($,e){$(function(){function i(){return!!(f&&g&&v)&&(j=$("body").height(),void(j+p-u>=0?($(".js_fixed_button").hide(),$(".js_relative_button").show(),$(".js_section_mark").removeClass("margin_b")):($(".js_fixed_button").show(),$(".js_relative_button").hide(),$(".js_section_mark").addClass("margin_b"))))}function n(e){var n=e.expired;if("1"==n)return $(".js_li_none").show(),$(".js_li_show").hide(),!1;$(".js_li_none").hide(),$(".js_li_show").show();var a=e.rules,s=[];$(a).each(function(e,i){var n=(a[e].present_amt/100).toFixed(0),c=(a[e].pay_amt/100).toFixed(0);n>=1&&c>=1&&s.push(i)});var c=s.length;return"0"==c?($(".js_content_sub_disa").show().css("display","inline-block"),$(".js_content_sub").hide(),!1):($(".js_content_sub_disa").hide(),$(".js_content_sub").show().css("display","inline-block"),$(s).each(function(e,i){var n,a=(s[e].present_amt/100).toFixed(0),r=(s[e].pay_amt/100).toFixed(0),t=s[e].grid_index;n="1"==c?'<li class="li_one" onclick="click_chulist(this)" data-index="'+t+'"><p class="font_17">储值<span class="js_rechar_num">'+r+'</span>元</p><p>送<span class="js_rechar_sendnum">'+a+'</span>元</p><span class="choose"><i class="choose_i"></i></span></li>':"2"==c?'<li class="li_two" onclick="click_chulist(this)" data-index="'+t+'"><p class="font_17">储值<span class="js_rechar_num">'+r+'</span>元</p><p>送<span class="js_rechar_sendnum">'+a+'</span>元</p><span class="choose"><i class="choose_i"></i></span></li>':'<li onclick="click_chulist(this)" data-index="'+t+'"><p class="font_17">储值<span class="js_rechar_num">'+r+'</span>元</p><p>送<span class="js_rechar_sendnum">'+a+'</span>元</p><span class="choose"><i class="choose_i"></i></span></li>',$(".js_rechage_ul").append(n)}),$(".js_rechage_ul li").eq(0).addClass("li_choose"),g="ture",void i())}function a(e){for(var n=e,a=n.length,s=0;s<a;s++){var c="<li><span>"+n[s]+"</span></li>";$(".js_note_ul_detail").append(c)}v="ture",i()}function s(e){var i=e.shopname;$(".js_shopname").text(i)}function c(e){var n=e.mobile;return n?($(".js_mobile").text(n),f="ture",void i()):($(".js_mobilehang").hide(),!1)}function r(){$(".js_mobilehang").hide(),f="ture",i()}function t(e){var i=(e.balance/100).toFixed(2);$(".js_balance").text(i)}function o(i){var n=i,a=n.recharge,s=n.url;if("0"==a)window.location.href=s;else{var c={c:d("c"),h:d("h"),o:d("o"),grid_index:$(".js_rechage_ul li.li_choose").attr("data-index")};e.ajax_rule("/prepaid/v1/api/c/recharge","POST","json",c,".zheceng2",l)}}function l(e){window.location.href=e.url}function h(n){var a=n.recharge;if("0"==a)$(".js_mobilehang").hide(),f="ture",i();else{var s={c:d("c")};e.ajax_rule(" /prepaid/v1/api/c/bindinfo","GET","json",s,".zheceng1",c,r)}}function _(){f="ture",i()}function d(e){var i;if(location.href.split("?").length<2)return!1;for(var n=location.href.split("?")[1].split("&"),a=n.length,s=0;s<a;s++){var c=n[s].split("=");if(c[0]==e)return i=c[1]}}location.href.split("?").length>1&&$(".js_protol_url").attr("href","/prepaid/v1/page/c/pacp.html?"+location.href.split("?")[1]);var u=window.innerHeight,p=$(".js_fixed_button").height(),j=$("body").height(),f=!1,g=!1,v=!1;$(document).ready(function(){var i={c:d("c"),h:d("h")};e.ajax_rule("/prepaid/v1/api/c/recharge/rules","GET","json",i,".zheceng",n);var c={c:d("c"),h:d("h")};e.ajax_rule("/prepaid/v1/api/c/rulexplain","GET","json",c,".zheceng1",a);var r={h:d("h")};e.ajax_rule("/prepaid/v1/api/c/merchant_info","GET","json",r,".zheceng1",s);var o={c:d("c"),h:d("h"),o:d("o"),grid_index:"1"};e.ajax_rule("/prepaid/v1/api/c/recharge/before","GET","json",o,".zheceng2",h,_);var l={c:d("c"),h:d("h")};e.ajax_rule("/prepaid/v1/api/c/balance","GET","json",l,".zheceng1",t)}),$(".js_content_sub").on("click",function(){_hmt.push(["_trackEvent","recharge","click","recharge_buy"]);var i={c:d("c"),h:d("h"),o:d("o"),grid_index:$(".js_rechage_ul li.li_choose").attr("data-index")};e.ajax_rule("/prepaid/v1/api/c/recharge/before","GET","json",i,".zheceng2",o)})})})});