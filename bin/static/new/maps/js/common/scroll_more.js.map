{"version":3,"sources":["common/scroll_more.js"],"names":["define","$","scroll_more","more_data","window","on","e","history_top","document","documentElement","scrollTop","body","console","log","scroll_data","body_height","window_height","clearTimeout","timer_rt","stopPropagation","scroll_if","show","setTimeout","nomor_show","nomoredata_show","nomoredata_hide","add_load_img","id","text","append","load_img","nomore_word","animate","opacity","height","innerHeight"],"mappings":"AAAAA,QAAQ,SAAU,SAASC,GAevB,QAASC,GAAYC,GACjBF,EAAEG,QAAQC,GAAG,SAAU,SAASC,GAI5B,GAAIC,GAAcC,SAASC,gBAAgBC,WAAaF,SAASG,KAAKD,SAEtEE,SAAQC,IAAI,4BAA4BN,GACxCK,QAAQC,IAAIC,EAAYC,YAAcC,GAClCT,EAAcO,EAAYC,YAAcC,EACxCC,aAAaH,EAAYI,WAEzBZ,EAAEa,kBACEL,EAAYM,YACZnB,EAAE,SAASoB,OACXP,EAAYM,WAAY,EACxBN,EAAYI,SAAWd,OAAOkB,WAAWnB,EAAW,MAEpDW,EAAYS,aACZC,IACApB,OAAOkB,WAAWG,EAAiB,KACnCX,EAAYS,YAAa,MASzC,QAASG,GAAaC,EAAGC,GAErB3B,EAAE0B,GAAIE,OAAOf,EAAYgB,UACzB7B,EAAE0B,GAAIE,OAAOf,EAAYiB,aACtBH,EACC3B,EAAE,eAAe2B,KAAKA,GAEtB3B,EAAE,eAAe2B,KAAK,WAM9B,QAASH,KACLxB,EAAE,eAAe+B,SAAUC,QAAS,GAAM,IAAK,YAInD,QAAST,KACLvB,EAAE,eAAe+B,SAAUC,QAAS,IAAQ,IAAK,YA9DrD,GAAInB,IACAI,SAAU,KACVE,WAAW,EACXG,YAAY,EACZR,YAAad,EAAE,QAAQiC,SACvBJ,SAAU,2BACVC,YAAa,kDAGbf,EAAgBZ,OAAO+B,WAyD3B,QACIjC,YAAaA,EACbuB,gBAAiBA,EACjBD,gBAAiBA,EACjBV,YAAaA,EACbY,aAAcA","file":"../../../js/common/scroll_more.js","sourcesContent":["define([\"zepto\"], function($) {　\n    //滚动下拉-------start--------------------------------------------------------\n    var scroll_data = {\n        timer_rt: null, //清空定时器=参数\n        scroll_if: false, //是否再次进行数据加载,默认false不加载\n        nomor_show: false, //控制 没有更多数据了的 提示 是否显示，默认false不出现\n        body_height: $('body').height(),\n        load_img: '<div class=\"load\"></div>', //加载动画图标\n        nomore_word: '<div class=\"nomoredata\" id=\"nomoredata\"></div>',//加载到最后的提示\n    };\n    // console.log(scroll_data.scroll_if);\n    var window_height = window.innerHeight;\n    // console.log(window_height);\n    // console.log(scroll_data.body_height); \n    //ajax规则\n    function scroll_more(more_data) {\n        $(window).on('scroll', function(e) {\n            // console.log(scroll_if); \n            //var history_top = $(document).scrollTop();\n            //console.log(history_top); \n            var history_top = document.documentElement.scrollTop || document.body.scrollTop;\n            //console.log('document.documentElement.scrollTop--'+document.documentElement.scrollTop);\n            console.log('document.body.scrollTop--'+history_top);\n            console.log(scroll_data.body_height - window_height);\n            if (history_top < scroll_data.body_height - window_height) {\n                clearTimeout(scroll_data.timer_rt);\n            } else {\n                e.stopPropagation();\n                if (scroll_data.scroll_if) {\n                    $('.load').show();\n                    scroll_data.scroll_if = false;\n                    scroll_data.timer_rt = window.setTimeout(more_data, 2000);\n                }\n                if (scroll_data.nomor_show) {\n                    nomoredata_show();\n                    window.setTimeout(nomoredata_hide, 2000);\n                    scroll_data.nomor_show = false;\n                }\n                // console.log('scroll:scroll_if==' + scroll_data.scroll_if);\n                // console.log('scroll:nomor_show==' + scroll_data.nomor_show);\n            }\n        });\n    }\n    \n    //加载图标和文字提示 添加在页面中，并可以修改加载提示文字-----必须单独引入到页面\n    function add_load_img(id,text){\n        //id为需要将加载图标和没有信息时的提示添加在的div，text用来重新设置加载到最后的文字提示，如果没有text则用默认的文字显示\n        $(id).append(scroll_data.load_img);\n        $(id).append(scroll_data.nomore_word);\n        if(text){\n            $('#nomoredata').text(text);\n        }else{\n            $('#nomoredata').text('没有更多数据了');\n        }\n        // console.log('测试--sourcemaps');\n    }\n    \n    //提示文字隐藏动画\n    function nomoredata_hide() {\n        $(\"#nomoredata\").animate({ opacity: 0, }, 500, 'ease-out');\n    }\n    \n    //提示文字显示动画 \n    function nomoredata_show() {\n        $(\"#nomoredata\").animate({ opacity: 0.7, }, 500, 'ease-out');\n    }\n\n\n    return {\n        scroll_more: scroll_more,\n        nomoredata_hide: nomoredata_hide,\n        nomoredata_show: nomoredata_show,\n        scroll_data: scroll_data,\n        add_load_img: add_load_img,\n    };　\n});\n"]}