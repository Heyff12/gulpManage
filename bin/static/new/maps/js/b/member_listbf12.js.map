{"version":3,"sources":["b/member_listbf12.js"],"names":["memberto","obj","c","$","attr","url_val","location","protocol","host","href","require","yanzheng","close_tip","ajax_rule","scroll_more","if_menu","append_ul","list","con_list","con_list1","b","times_add","hide","last_len","i","append","scroll_data","body_height","Math","floor","height","toFixed","nomoredata_show","window","setTimeout","nomoredata_hide","nomor_show","scroll_if","console","log","add_load_img","get","document","ready"],"mappings":"AAAA,YAGA,SAAAA,UAAAC,GACA,GAAAC,GAAAC,EAAAF,GAAAG,KAAA,UACAC,EAAAC,SAAAC,SAAA,KAAAD,SAAAE,KAAA,4CAAAN,CACAI,UAAAG,KAAAJ,EAEAK,SAAA,sBAAA,WACAA,SAAA,QAAA,WAAA,YAAA,YAAA,cAAA,WAAA,SAAAP,EAAAQ,EAAAC,EAAAC,EAAAC,EAAAC,GACAZ,EAAA,WAoBA,QAAAa,KACA,GAGAC,GAHAC,EAAA,qUACAC,EAAA,8UAYA,IATA,KAAAC,GACAH,EAAAE,EACAC,EAAA,IAEAH,EAAAC,EACAE,EAAA,GAGAC,IACAA,EAAA,EAAA,CACAlB,EAAA,SAAAmB,MAGA,KAAA,GADAC,GAAA,EACAC,EAAA,EAAAA,EAAAD,EAAAC,IACArB,EAAA,kBAAAsB,OAAAR,EAaA,OAXAH,GAAAY,YAAAC,YAAAC,KAAAC,MAAA1B,EAAA,QAAA2B,UAAAC,QAAA,GACAR,GAAA,GACAT,EAAAkB,kBACAC,OAAAC,WAAApB,EAAAqB,gBAAA,KACArB,EAAAY,YAAAU,YAAA,GAEAtB,EAAAY,YAAAU,YAAA,EAEAtB,EAAAY,YAAAW,WAAA,EACAC,QAAAC,IAAA,mBAAAzB,EAAAY,YAAAW,WACAC,QAAAC,IAAA,oBAAAzB,EAAAY,YAAAU,aACA,EAGA,IAAA,GAAAZ,GAAA,EAAAA,EAAA,GAAAA,IACArB,EAAA,kBAAAsB,OAAAR,EAEAd,GAAA,SAAAmB,OACAR,EAAAY,YAAAW,WAAA,EACAvB,EAAAY,YAAAC,YAAAC,KAAAC,MAAA1B,EAAA,QAAA2B,UAAAC,QAAA,GACAO,QAAAC,IAAA,mBAAAzB,EAAAY,YAAAW,WACAC,QAAAC,IAAA,oBAAAzB,EAAAY,YAAAU,YA5DArB,EAAAA,SAEA,IAAAK,GAAA,EAEAC,EAAA,CAEAP,GAAA0B,aAAA,mBAEA1B,EAAAA,YAAAE,GAEAb,EAAA,mBAAAsC,IAAA,KAAA,WACAtC,EAAAuC,UAAAC,MAAA,WAGA3B,SA8FAJ,EAAAA","file":"../../../js/b/member_listbf12.js","sourcesContent":["//点击会员列表\nfunction memberto(obj) {\n    var c = $(obj).attr('data-c');\n    var url_val = location.protocol + '//' + location.host + '/prepaid/v1/page/b/members/detail.html?c=' + c;\n    location.href = url_val;\n};\nrequire(['../require-config2'], function() {\n    require([\"zepto\", \"yanzheng\", \"close_tip\", \"ajax_rule\", \"scroll_more\", \"if_menu\"], function($, yanzheng, close_tip, ajax_rule, scroll_more, if_menu) {\n        $(function() {\n            //判断 处置活动首页显示右上角导航\n            if_menu.if_menu();\n            //滚动加载---------------------------------------------------------------   \n            var b = 1, //测试专用--变更加载数据\n                times_add = 0; //测试专用--控制停止加载数据判断依据  \n            //添加图标和没有更多文字提示\n            scroll_more.add_load_img('.js_member_list');\n            //默认执行--测试专用    \n            scroll_more.scroll_more(append_ul);\n            //活动储值详情----------------------------------------------------------------------------------------------------------------------------------------------------\n            $('.js_member_list').get(0) && (~ function() {\n                $(document).ready(function() {\n                    //获取会员列表todo-show\n                    //get_rechargeli();\n                    append_ul();\n                });\n            }());\n            //测试\n            function append_ul() {\n                var con_list = '<li><dl><dt><img src=\"../../../bin/static/img/wxchar.png\"></dt><dd>韩梅梅</dd><dd class=\"grey\"><i class=\"icon_tel\"></i>13189569856</dd><dd class=\"grey\">储值<span class=\"orange\">2次</span></dd><div class=\"clearfix\"></div></dl><p><span class=\"grey\">余额</span><br/><span class=\"orange\">￥<i class=\"i_normal\">35.26</i></span></p></li>';\n                var con_list1 = '<li><dl><dt><img src=\"../../../bin/static/img/ic_shop_round@3x.png\"></dt><dd>韩梅梅</dd><dd class=\"grey\"><i class=\"icon_tel\"></i>13189569856</dd><dd class=\"grey\">储值<span class=\"orange\">2次</span></dd><div class=\"clearfix\"></div></dl><p><span class=\"grey\">余额</span><br/><span class=\"orange\">￥<i class=\"i_normal\">35.26</i></span></p></li>';\n\n                var list;\n                if (b == '1') {\n                    list = con_list1;\n                    b = 0;\n                } else {\n                    list = con_list;\n                    b = 1;\n                }\n                //判断终止添加数据\n                times_add++;\n                if (times_add > 3) {\n                    $('.load').hide();\n                    //最后添加的数据\n                    var last_len = 5;\n                    for (var i = 0; i < last_len; i++) {\n                        $('.js_ul_members').append(list);\n                    }\n                    scroll_more.scroll_data.body_height = Math.floor($('body').height()).toFixed(0);\n                    if (last_len <= 0) {\n                        scroll_more.nomoredata_show();\n                        window.setTimeout(scroll_more.nomoredata_hide, 2000);\n                        scroll_more.scroll_data.nomor_show = false;\n                    } else {\n                        scroll_more.scroll_data.nomor_show = true;\n                    }\n                    scroll_more.scroll_data.scroll_if = false;\n                    console.log('AJAX:scroll_if==' + scroll_more.scroll_data.scroll_if);\n                    console.log('AJAX:nomor_show==' + scroll_more.scroll_data.nomor_show);\n                    return false;\n                }\n                //正常添加数据\n                for (var i = 0; i < 20; i++) {\n                    $('.js_ul_members').append(list);\n                }\n                $('.load').hide();\n                scroll_more.scroll_data.scroll_if = true;\n                scroll_more.scroll_data.body_height = Math.floor($('body').height()).toFixed(0);\n                console.log('AJAX:scroll_if==' + scroll_more.scroll_data.scroll_if);\n                console.log('AJAX:nomor_show==' + scroll_more.scroll_data.nomor_show);\n                // console.log(body_height); \n            }\n            //获取会员列表\n            function get_rechargeli() {\n                var data = {\n                    'pos': $('#js_pos').val(),\n                    'count': 20,\n                };\n                ajax_rule.ajax_rule('/prepaid/v1/api/b/members', 'GET', 'json', data, '.zheceng', get_list);\n            }\n            //获取会员列表成功函数\n            function get_list(return_data) {\n                if ($('#js_pos').val() == '0' && return_data.length == 0) {\n                    $('.js_li_none').show();\n                    $('.js_member_detail').hide();\n                    return false;\n                }\n                $('.js_li_none').hide();\n                $('.js_member_detail').show();\n                $(return_data).each(function(i, item) {\n                    var cz_avatar = return_data[i].avatar;\n                    var cz_recharge_times = return_data[i].recharge_times;\n                    var cz_mobile = return_data[i].mobile;\n                    var cz_name = return_data[i].name;\n                    var cz_balance = (return_data[i].balance / 100).toFixed(2);\n                    var cz_c = return_data[i].c;\n                    var li_detail = '<li data-c=\"' + cz_c + '\" onclick=\"memberto(this)\"><dl><dt><img src=\"' + cz_avatar + '\"></dt><dd>' + cz_name + '</dd><dd class=\"grey\"><i class=\"icon_tel\"></i>' + cz_mobile + '</dd><dd class=\"grey\">储值<span class=\"orange\">' + cz_recharge_times + '次</span></dd><div class=\"clearfix\"></div></dl><p><span class=\"grey\">余额</span><br/><span class=\"orange\">￥<i class=\"i_normal\">' + cz_balance + '</i></span></p></li>';\n                    $(\".js_ul_members\").append(li_detail);\n                });\n                var pos_val = $('#js_pos').val() - 0;\n                if (return_data.length < 20) {\n                    if (return_data.length > 0) {\n                        scroll_more.scroll_data.nomor_show = true;\n                    } else {\n                        scroll_more.nomoredata_show();\n                        window.setTimeout(scroll_more.nomoredata_hide, 2000);\n                        scroll_more.scroll_data.nomor_show = false;\n                    }\n                    scroll_more.scroll_data.scroll_if = false;\n                } else {\n                    pos_val += 20;\n                    $('#js_pos').val(pos_val);\n                    scroll_more.scroll_data.scroll_if = true;\n                }\n                scroll_more.scroll_data.body_height = $('body').height();\n            }\n            //关闭弹框\n            close_tip.close_tip();\n        })\n    })\n})\n"]}