{"version":3,"sources":["b/member_list.js"],"names":["memberto","obj","_hmt","push","c","$","attr","url_val","location","protocol","host","href","require","yanzheng","ajax_rule","scroll_more","add_load_img","Vue","el","data","searchkey","members_all","members","members_count","members_pos","apiUrl","getdata","pos","count","mounted","this","get_members","get_moredata","updated","scroll_data","body_height","Math","floor","height","toFixed","console","log","methods","member_ser","key","length","filter","member","name","indexOf","mobile","vm","$http","get","before","show","then","response","hide","data_return","JSON","parse","respcd","slice","nomoredata_show","window","setTimeout","nomoredata_hide","nomor_show","scroll_if","respmsg","html","resperr","catch"],"mappings":"AAAA,YAGA,SAAAA,UAAAC,GACAC,KAAAC,MAAA,cAAA,SAAA,QAAA,iBACA,IAAAC,GAAAC,EAAAJ,GAAAK,KAAA,UACAC,EAAAC,SAAAC,SAAA,KAAAD,SAAAE,KAAA,4CAAAN,CACAI,UAAAG,KAAAJ,EAEAK,SAAA,sBAAA,WACAA,SAAA,QAAA,WAAA,YAAA,eAAA,SAAAP,EAAAQ,EAAAC,EAAAC,GACAV,EAAA,WAOAU,EAAAC,aAAA,kBAEA,IAAAC,MACAC,GAAA,oBACAC,MACAC,UAAA,GACAC,YAAA,GACAC,QAAA,GACAC,cAAA,GACAC,YAAA,GACAC,OAAAjB,SAAAC,SAAA,KAAAD,SAAAE,KAAA,4BACAgB,SACAC,IAAA,EACAC,MAAA,MAGAC,QAAA,WACAC,KAAAC,cACAhB,EAAAA,YAAAe,KAAAE,eAEAC,QAAA,WACAlB,EAAAmB,YAAAC,YAAAC,KAAAC,MAAAhC,EAAA,QAAAiC,UAAAC,QAAA,GACAC,QAAAC,IAAA,qBAAA1B,EAAAmB,YAAAC,cAEAO,SACAC,WAAA,SAAArB,GACA,GAAAsB,GAAAd,KAAAV,SACA,SAAAE,EAAAuB,QAAA,IAGAvB,EAAAwB,OAAA,SAAAC,GACA,MAAA,MAAAA,EAAAC,KAAAC,QAAAL,IAAA,MAAAG,EAAAG,OAAAD,QAAAL,MAIAb,YAAA,WACA,GAAAoB,GAAArB,IACAA,MAAAsB,MAAAC,IAAAvB,KAAAL,QACA6B,OAAA,WACAjD,EAAA,kBAAAkD,UAEAC,KAAA,SAAAC,GACApD,EAAA,kBAAAqD,MACA,IAAAC,GAAAC,KAAAC,MAAAJ,EAAAtC,KACA,IAAA,QAAAwC,EAAAG,OAAA,CAGA,GAFAX,EAAA9B,YAAAsC,EAAAxC,KAEA,GAAAgC,EAAA9B,YAAAwB,OAGA,MAFAxC,GAAA,eAAAkD,OACAlD,EAAA,qBAAAqD,QACA,CAEArD,GAAA,eAAAqD,OACArD,EAAA,qBAAAkD,OACAJ,EAAA7B,QAAA6B,EAAA9B,YAAA0C,MAAA,EAAAZ,EAAA3B,aACA2B,EAAA9B,YAAAwB,OAAAM,EAAA3B,aAAA,GACAT,EAAAiD,kBACAC,OAAAC,WAAAnD,EAAAoD,gBAAA,KACApD,EAAAmB,YAAAkC,YAAA,EACArD,EAAAmB,YAAAmC,WAAA,IAEAlB,EAAA3B,aAAA2B,EAAA5B,cACAR,EAAAmB,YAAAmC,WAAA,GAEAtD,EAAAmB,YAAAC,YAAAC,KAAAC,MAAAhC,EAAA,QAAAiC,UAAAC,QAAA,GACAlC,EAAA,SAAAqD,WAIArD,GAAA,gBAAAkD,OACAlD,EAAA,YAAAkD,OACAI,EAAAW,QACAjE,EAAA,8BAAAkE,KAAAZ,EAAAW,SAEAjE,EAAA,8BAAAkE,KAAAZ,EAAAa,UAGA,SAAAf,GACApD,EAAA,kBAAAqD,OACArD,EAAA,gBAAAkD,OACAlD,EAAA,YAAAkD,OACAlD,EAAA,8BAAAkE,KAAA,WACAE,MAAA,SAAAhB,GACApD,EAAA,kBAAAqD,UAIA1B,aAAA,WACAF,KAAAR,QAAAQ,KAAAT,YAAA0C,MAAA,EAAAjC,KAAAN,aACAgB,QAAAC,IAAAX,KAAAR,QAAAuB,QACAf,KAAAT,YAAAwB,OAAAf,KAAAN,aAAA,GACAT,EAAAiD,kBACAC,OAAAC,WAAAnD,EAAAoD,gBAAA,KACApD,EAAAmB,YAAAkC,YAAA,EACArD,EAAAmB,YAAAmC,WAAA,IAEAvC,KAAAN,aAAAM,KAAAP,cACAR,EAAAmB,YAAAmC,WAAA,GAEAhE,EAAA,SAAAqD,OACAlB,QAAAC,IAAA,mBAAA1B,EAAAmB,YAAAmC,WACA7B,QAAAC,IAAA,oBAAA1B,EAAAmB,YAAAkC","file":"../../../js/b/member_list.js","sourcesContent":["//点击会员列表\nfunction memberto(obj) {\n    _hmt.push(['_trackEvent', 'member', 'click', 'member_detail']);\n    var c = $(obj).attr('data-c');\n    var url_val = location.protocol + '//' + location.host + '/prepaid/v1/page/b/members/detail.html?c=' + c;\n    location.href = url_val;\n};\nrequire(['../require-config2'], function() {\n    require([\"zepto\", \"yanzheng\", \"ajax_rule\", \"scroll_more\"], function($, yanzheng, ajax_rule, scroll_more) {\n        $(function() {\n            //设置菜单空---取消了native的引用\n            // var menu_data = { menus: [] };\n            // native.setNavMenu(menu_data, function(cb) {\n            //     console.log(cb.ret);\n            // });\n            //添加图标和没有更多文字提示\n            scroll_more.add_load_img('.js_member_list');\n            //滚动加载-----会员信息----------------------------------------------------------\n            var demo = new Vue({\n                el: '.js_member_detail',\n                data: {\n                    searchkey: '',\n                    members_all: '',\n                    members: '',\n                    members_count: 10,\n                    members_pos: 10,\n                    apiUrl: location.protocol + '//' + location.host + '/prepaid/v1/api/b/members',\n                    getdata: {\n                        pos: 0,\n                        count: 10000,\n                    },\n                },\n                mounted: function() {\n                    this.get_members(); //获取网络全部数据数据\n                    scroll_more.scroll_more(this.get_moredata);\n                },\n                updated: function() {\n                    scroll_more.scroll_data.body_height = Math.floor($('body').height()).toFixed(0);\n                    console.log('AJAX:body_height==' + scroll_more.scroll_data.body_height);\n                },\n                methods: {\n                    member_ser: function(members) {\n                        var key = this.searchkey;\n                        if (members.length <= 0) {\n                            return false;\n                        } else {\n                            return members.filter(function(member) {\n                                return member.name.indexOf(key) != '-1' || member.mobile.indexOf(key) != '-1';\n                            })\n                        }\n                    },\n                    get_members: function() {\n                        var vm = this;\n                        this.$http.get(this.apiUrl, {\n                                before: function() {\n                                    $('#load_small_bg').show();\n                                }\n                            })\n                            .then(function(response) {\n                                $('#load_small_bg').hide();\n                                var data_return = JSON.parse(response.data)\n                                if (data_return.respcd == '0000') {\n                                    vm.members_all = data_return.data;\n                                    //console.log(vm.members_all.length);\n                                    if (vm.members_all.length == 0) {\n                                        $('.js_li_none').show();\n                                        $('.js_member_detail').hide();\n                                        return false;\n                                    }\n                                    $('.js_li_none').hide();\n                                    $('.js_member_detail').show();\n                                    vm.members = vm.members_all.slice(0, vm.members_pos);\n                                    if (vm.members_all.length - vm.members_pos <= 0) {\n                                        scroll_more.nomoredata_show();\n                                        window.setTimeout(scroll_more.nomoredata_hide, 2000);\n                                        scroll_more.scroll_data.nomor_show = false;\n                                        scroll_more.scroll_data.scroll_if = false;\n                                    } else {\n                                        vm.members_pos += vm.members_count;\n                                        scroll_more.scroll_data.scroll_if = true;\n                                    }\n                                    scroll_more.scroll_data.body_height = Math.floor($('body').height()).toFixed(0);\n                                    $('.load').hide();\n                                    //console.log('AJAX:scroll_if==' + scroll_more.scroll_data.scroll_if);\n                                    //console.log('AJAX:nomor_show==' + scroll_more.scroll_data.nomor_show);\n                                } else {\n                                    $('#alert_alert').show();\n                                    $('.zheceng').show();\n                                    if (data_return.respmsg) {\n                                        $('#alert_alert .alert_con_br').html(data_return.respmsg);\n                                    } else {\n                                        $('#alert_alert .alert_con_br').html(data_return.resperr);\n                                    }\n                                }\n                            }, function(response) {\n                                $('#load_small_bg').hide();\n                                $('#alert_alert').show();\n                                $('.zheceng').show();\n                                $('#alert_alert .alert_con_br').html('网络超时!');\n                            })\n                            .catch(function(response) {\n                                $('#load_small_bg').hide();\n                                //console.log(response)\n                            });\n                    },\n                    get_moredata: function() {\n                        this.members = this.members_all.slice(0, this.members_pos);\n                        console.log(this.members.length);\n                        if (this.members_all.length - this.members_pos <= 0) {\n                            scroll_more.nomoredata_show();\n                            window.setTimeout(scroll_more.nomoredata_hide, 2000);\n                            scroll_more.scroll_data.nomor_show = false;\n                            scroll_more.scroll_data.scroll_if = false;\n                        } else {\n                            this.members_pos += this.members_count;\n                            scroll_more.scroll_data.scroll_if = true;\n                        }\n                        $('.load').hide();\n                        console.log('AJAX:scroll_if==' + scroll_more.scroll_data.scroll_if);\n                        console.log('AJAX:nomor_show==' + scroll_more.scroll_data.nomor_show);\n                    },\n                }\n            })\n        })\n    })\n})\n"]}