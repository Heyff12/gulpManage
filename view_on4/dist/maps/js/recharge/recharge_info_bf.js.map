{"version":3,"sources":["recharge/recharge_info_bf.js"],"names":["timedCount","time0","$","text","t","setTimeout","clearTimeout","show","hide","require","yanzheng","add_bounced","ajax_rule","iosselect","date_day","get_code","return_data","error_yz","id","parents","addClass","seccuss_yz","removeClass","num_change_long","num","get","document","ready","h","get_hash","c","on","tel_test","hasClass","mobile_val","val","mobile","html","showDom","querySelector","year","dataset","month","day","yearData","monthData","dateData","container","title","itemHeight","itemShowCount","relation","oneLevelId","twoLevelId","threeLevelId","callback","year_data","month_data","day_data","value","first","name","tel","birth","tel_test_all","code_test_all","china_test_all","detail_test_all","bir","split","bir_y","bir_m","bir_d","bor_red_num","length","o","grid_index","birthday","close_tip"],"mappings":"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","file":"../../../js/recharge/recharge_info_bf.js","sourcesContent":["\"use strict\";\n\nrequire(['../require-config'], function () {\n    require([\"zepto\", \"yanzheng\", \"add_bounced\", \"ajax_rule\", \"iosselect\", \"date_day\"], function ($, yanzheng, add_bounced, ajax_rule, iosselect, date_day) {\n        $(function () {\n            $('.js_bindinfo').get(0) && ~function () {\n                $(document).ready(function () {\n                    //获取 grid_index-----需要增加\n                    //获取店铺名称--需要增加\n                    var data_name = {\n                        'h': yanzheng.get_hash('h')\n                    };\n                    //ajax_rule.ajax_rule('/prepaid/v1/api/c/merchant_info', 'GET', 'json', data_name, '.zheceng', get_shopname);                \n                    //获取当前用户个人信息-show\n                    var data_message = {\n                        'c': yanzheng.get_hash('c'),\n                        'h': yanzheng.get_hash('h')\n                    };\n                    //ajax_rule.ajax_rule('/prepaid/v1/api/c/bind', 'GET', 'json', data_message, '.zheceng1', get_message);\n                });\n            }();\n            $('.js_bindinfo_confirm').get(0) && ~function () {\n                $(document).ready(function () {\n                    //获取 grid_index-----需要增加\n                    //获取店铺名称--需要增加\n                    var data_name = {\n                        'h': yanzheng.get_hash('h')\n                    };\n                    //ajax_rule.ajax_rule('/prepaid/v1/api/b/merchant_info', 'GET', 'json', data_name, '.zheceng', get_shopname);                \n                    //获取储值账户\n                    var data_tel = {\n                        'c': yanzheng.get_hash('c')\n                    };\n                    //ajax_rule.ajax_rule('/prepaid/v1/api/c/bindinfo', 'GET', 'json', data_tel, '.zheceng1', get_tel);                \n                    //获取当前用户个人信息-show\n                    var data_message = {\n                        'c': yanzheng.get_hash('c'),\n                        'h': yanzheng.get_hash('h')\n                    };\n                    //ajax_rule.ajax_rule('/prepaid/v1/api/c/bind', 'GET', 'json', data_message, '.zheceng', get_message);\n                });\n            }();\n            //填写信息----------------------------------------------------------------------------------------------------------------------------------------------------\n\n            //获取验证码\n            $('#get_identyCode').on('click', function () {\n                //验证\n                yanzheng.tel_test('.js_phone');\n                if ($('.js_phone').parents('dl').hasClass('error_data')) {\n                    return false;\n                } else {\n                    //获取值\n                    var mobile_val = $('.js_phone').val();\n                    var url = '/prepaid/v1/api/c/captcha';\n                    var data = {\n                        'c': yanzheng.get_hash('c'),\n                        'mobile': mobile_val\n                    };\n                    //获取验证码--todo--show\n                    //ajax_rule.ajax_rule(url, 'GET', 'json', data, '.zheceng', get_code);\n                    get_code(); //测试倒计时\n                }\n            });\n            //倒计时不可点击\n            $('.js_show_entycode').on('click', function () {\n                $('.alert_con').show();\n                $('.alert_con .alert_con_br').html(\"一分钟后再次获取！\");\n                $('.zheceng').show();\n            });\n            //点击生日\n            $('.js_message_birth').on('click', function () {\n                var showDom = document.querySelector('.js_message_birth');\n                var year = showDom.dataset['year'];\n                var month = showDom.dataset['month'];\n                var day = showDom.dataset['day'];\n\n                var bankSelect = new iosselect(3, [date_day.yearData, date_day.monthData, date_day.dateData], {\n                    container: '.ios_select_container',\n                    title: '选择开始时间',\n                    itemHeight: 50,\n                    itemShowCount: 3,\n                    relation: [1, 1, 0, 0],\n                    oneLevelId: year,\n                    twoLevelId: month,\n                    threeLevelId: day,\n                    //showLoading: true,\n                    callback: function callback(year_data, month_data, day_data) {\n                        showDom.dataset['year'] = year_data.id;\n                        showDom.dataset['month'] = month_data.id;\n                        showDom.dataset['day'] = day_data.id;\n                        showDom.value = year_data.id + '年' + month_data.id + '月' + day_data.id + '日';\n                        $('#birthday').val(year_data.id + '-' + month_data.id + '-' + day_data.id);\n                    }\n                });\n            });\n            //点击填写信息确定按钮\n            $('.js_alert_message').on('click', function () {\n                var first = $('.js_hidden_first').val();\n                var name = $('.js_message_name').val();\n                var tel = $('.js_message_tel').val();\n                var birth = $('.js_message_birth').val();\n                var code = $('.js_code').val();\n                //校验验证码\n                var url = '/prepaid/v1/api/c/captcha';\n                var data_code = {\n                    'captcha': code,\n                    'mobile': tel\n                };\n                //获取验证码--todo--show\n                //ajax_rule.ajax_rule(url, 'POST', 'json', data_code, '.zheceng', get_code_succ,get_codeerror);\n\n                if (first == '0') {\n                    yanzheng.tel_test_all('.js_message_tel', error_yz, seccuss_yz);\n                    yanzheng.code_test_all('.js_code', error_yz, seccuss_yz);\n                    yanzheng.china_test_all('.js_message_name', 0, 4, error_yz, seccuss_yz);\n                    yanzheng.detail_test_all('.js_message_birth', -1, 20, error_yz, seccuss_yz);\n                }\n                if (birth) {\n                    var bir = $('#birthday').val().split('-');\n                    var bir_y = bir[0];\n                    var bir_m = num_change_long(bir[1]);\n                    var bir_d = num_change_long(bir[2]);\n                    birth = bir_y + '-' + bir_m + '-' + bir_d;\n                }\n                var bor_red_num = $('.error_data').length;\n                if (bor_red_num > 0) {\n                    return false;\n                }\n                //提交充值   \n                var data_cz = {\n                    'c': yanzheng.get_hash('c'),\n                    'h': yanzheng.get_hash('h'),\n                    'o': yanzheng.get_hash('o'),\n                    'grid_index': $('.js_grid_index').val(),\n                    'name': name,\n                    'mobile': tel,\n                    'birthday': birth\n                };\n                //ajax_rule.ajax_rule('/prepaid/v1/api/c/recharge', 'POST', 'json', data_cz, '.zheceng1', get_rechargesub);\n            });\n            //获取个人信息\n            function get_message(return_data) {\n                var return_binded = return_data.binded;\n                var return_name = return_data.name;\n                var return_mobile = return_data.mobile;\n                var return_birth = return_data.birthday;\n                $('.js_hidden_first').val(return_binded);\n                $('.js_message_name').val(return_name);\n                $('.js_message_tel').val(return_mobile);\n                $('.js_message_birth').val(return_birth);\n                if (return_binded == '1') {\n                    $('.js_first_bind').hide();\n                    $('.js_secondshop').show();\n                    return false;\n                    // $('.js_dl_message input.js_input').attr('readonly', 'readonly').addClass('grey');\n                    // if (return_birth.length > 0) {\n                    //     $('.js_message_birth').attr('disabled', 'disabled').addClass('grey');\n                    // } else {\n                    //     $('.js_message_birth').removeAttr('disabled').removeClass('grey');\n                    // }\n                }\n                $('.js_first_bind').show();\n                $('.js_secondshop').hide();\n                //日期\n                if (return_birth) {\n                    var startime_zu = return_birth.split('-');\n                    var bir_y = startime_zu[0] - 0;\n                    var bir_m = startime_zu[1] - 0;\n                    var bir_d = startime_zu[2] - 0;\n                    $('.js_message_birth').data('year', bir_y);\n                    $('.js_message_birth').data('month', bir_m);\n                    $('.js_message_birth').data('day', bir_d);\n                    $('#birthday').val(bir_y + '-' + bir_m + '-' + bir_d);\n                    $('.js_message_birth').val(bir_y + '年' + bir_m + '月' + bir_d + '日');\n                    $('.js_message_birth').attr('disabled', 'disabled');\n                } else {\n                    $('.js_message_birth').data('year', date_day.nowYear);\n                    $('.js_message_birth').data('month', date_day.nowMonth);\n                    $('.js_message_birth').data('day', date_day.nowDate);\n                    $('#birthday').val(date_day.nowYear + '-' + date_day.nowMonth + '-' + date_day.nowDate);\n                    $('.js_message_birth').val('');\n                    $('.js_message_birth').removeAttr('disabled');\n                }\n                // $('.js_dl_message input.js_input').removeAttr('readonly').removeClass('grey');\n            }\n            //点击购买\n            function get_rechargesub(return_data) {\n                window.location.href = return_data.url;\n            }\n            //获取验证码-时候等待\n            function get_code(return_data) {\n                $('.js_get_entycode').hide();\n                $('.js_show_entycode').show();\n                timedCount();\n            }\n            //获取店铺名称\n            function get_shopname(return_data) {\n                $('.js_shopname').val(return_data.shopname);\n            }\n            //获取储值账号\n            function get_shopname(return_data) {\n                $('.js_message_tel').val(return_data.mobile);\n            }\n            //验证码验证正确\n            function get_code_succ() {}\n            //验证码输入错误\n            function get_codeerror() {\n                $(id).parents('dl').addClass('error_data');\n            }\n            //验证错误\n            function error_yz(id) {\n                $('.js_code').parents('dl').addClass('error_data');\n            }\n            //验证正确\n            function seccuss_yz(id) {\n                $(id).parents('dl').removeClass('error_data');\n            }\n            //提起补全\n            function num_change_long(num) {\n                if (num < 10) {\n                    return '0' + num;\n                } else {\n                    return num;\n                }\n            }\n            //添加弹框\n            add_bounced.add_bounced();\n            //关闭弹框\n            add_bounced.close_tip();\n        });\n    });\n});\n//倒计时60s\nfunction timedCount() {\n    var time0 = $('.js_show_entycode i').text();\n    $('.js_show_entycode i').text(time0 - 1);\n    t = setTimeout(\"timedCount()\", 1000);\n    if (time0 == 0) {\n        clearTimeout(t);\n        $('.js_get_entycode').show();\n        $('.js_show_entycode i').text(61);\n        $('.js_show_entycode').hide();\n    }\n}"]}