{"version":3,"sources":["usercenter/usercenter.js"],"names":["hideMenu","WeixinJSBridge","call","to_detail","obj","_hmt","push","url_detail","$","parents","attr","location","href","get_history_touch","ajax","url","type","dataType","data","c","get_hash","h","pos","length","count","beforeSend","show","success","respcd","html","return_data","each","i","item","tx_name","tx_price","li_detail","tx_pay_amt","txamt","toFixed","pay_amt","tx_present_amt","present_amt","tx_time","sysdtm","tx_status","biz_type","append","hide","error","complete","get_rule_detail","return_data_l","now_date","n_date","Date","n_date_year","getFullYear","n_date_mon","tow_num","getMonth","n_date_day","getDate","n_date_h","getHours","n_date_m","getMinutes","n_date_mm","getSeconds","n_date_end","arm","arm_num","arm_num_end","substr","document","addEventListener","attachEvent","require","get_rechargeli_c","data_length","text","li_detail_l","li_detail_r","tx_fee","max_present_amt","tx_txamt","balance","merchant_name","tx_merchant_url","merchant_url","tx_recharge_url","recharge_url","tx_overtime","pay_url","prepaid_detail","expired","bigmchnt","merchantinfo_request","bigmchnt_value","get_rechargedetail","userid","tx_url_pay","tx_url_add","tx_url_list","tx_merchant_name","tx_expired","tx_rule_detail","rule_detail","title","get_rechargelist","val","last_len","dl_data","map","this","get","dl_data_set_l","tx_pay_amt0","tx_present_amt0","tx_status_status","status","biz_sn","bizn_has","pos_val","nomor_show","animate","opacity","window","setTimeout","nomoredata_hide","scroll_if","body_height","Math","floor","height","hash_val","c_val","split","url_l","url_l_l","url_val","ready","timer_rt","window_height","innerHeight","on","e","history_top","documentElement","scrollTop","body","clearTimeout","stopPropagation"],"mappings":"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","file":"../../../js/usercenter/usercenter.js","sourcesContent":["\"use strict\";\n\nfunction hideMenu() {\n    WeixinJSBridge.call('hideOptionMenu');\n    WeixinJSBridge.call('hideToolbar');\n}\nif (typeof WeixinJSBridge == \"undefined\") {\n    if (document.addEventListener) {\n        document.addEventListener('WeixinJSBridgeReady', hideMenu, false);\n    } else if (document.attachEvent) {\n        document.attachEvent('WeixinJSBridgeReady', hideMenu);\n        document.attachEvent('onWeixinJSBridgeReady', hideMenu);\n    }\n} else {\n    hideMenu();\n}\n\nfunction to_detail(obj) {\n    _hmt.push(['_trackEvent', 'usercenter', 'click', 'index_detail']);\n    var url_detail = $(obj).parents('li').attr('data-url');\n    location.href = url_detail;\n}\nrequire(['../require-config'], function () {\n    require([\"jquery\"], function ($) {\n        $(function () {\n            //个人中心首页----------------------------------------------------------------------------------------------------------------------------------------------------\n            $('.js_usercenter_index').get(0) && ~function () {\n                $(document).ready(function () {\n                    //获取储值列表\n                    get_rechargeli_c();\n                    //点击进入储值详情\n                    // $('.js_usercenter_ul li .zhe').live('click', function() {\n                    //     var url_detail = $(this).parents('li').attr('data-url');\n                    //     alert(url_detail);\n                    //     console.log(url_detail);\n                    //     location.href = url_detail;\n                    // });\n                    // $(document).on('click', '.js_usercenter_ul li .zhe', function() {\n                    //     var url_detail = $(this).parents('li').attr('data-url');\n                    //     location.href = url_detail;\n                    // });\n                });\n            }();\n            //获取储值首页列表\n            function get_rechargeli_c() {\n                //alert('获取列表');\n                $.ajax({\n                    url: '/prepaid/v1/api/c/merchants',\n                    type: 'GET',\n                    dataType: 'json',\n                    data: {\n                        'c': get_hash('c')\n                    },\n                    beforeSend: function beforeSend() {\n                        $('#load_small_bg').show();\n                        //$('.zheceng').show();\n                    },\n                    success: function success(data) {\n                        //alert('获取列表success');\n                        if (data.respcd != '0000') {\n                            //alert('获取列表success-error');\n                            $('#alert_alert').show();\n                            $('.zheceng').show();\n                            if (!data['respmsg']) {\n                                $('#alert_alert .alert_con_br').html(data['resperr']);\n                            } else {\n                                $('#alert_alert .alert_con_br').html(data['respmsg']);\n                            }\n                        } else {\n                            //alert('获取列表success-in');\n                            var return_data = data.data;\n                            var data_length = return_data.length;\n                            $('.js_company_num').text(data_length);\n                            if (data_length == '0') {\n                                //$('.zheceng').hide();\n                                return false;\n                            }\n                            $(return_data).each(function (i, item) {\n                                var tx_fee = (return_data[i].max_present_amt / 100).toFixed(0); //返现最高金额\n                                var tx_txamt = (return_data[i].balance / 100).toFixed(2);\n                                var tx_name = return_data[i].merchant_name;\n                                var tx_merchant_url = return_data[i].merchant_url;\n                                var tx_recharge_url = return_data[i].recharge_url;\n                                var tx_url_pay = return_data[i].pay_url;\n                                var tx_url = return_data[i].prepaid_detail;\n                                var tx_overtime = return_data[i].expired;\n                                var li_detail, li_detail_l, li_detail_r;\n                                if (return_data[i].bigmchnt == true) {\n                                    //大商户 需要隐藏立即储值按钮\n                                    li_detail_l = '<li class=\"overtime\" ';\n                                } else {\n                                    if (tx_overtime == '1') {\n                                        //活动过期\n                                        li_detail_l = '<li class=\"overtime\" ';\n                                    } else {\n                                        li_detail_l = '<li ';\n                                    }\n                                }\n\n                                li_detail_r = 'data-url=\"' + tx_merchant_url + '\"><header><span class=\"js_company_name\">' + tx_name + '</span></header><p class=\"grey\">储值余额</p><p class=\"price orange\">￥<span class=\"js_company_diff\">' + tx_txamt + '</span></p><dl class=\"company_dl\"><dt><i class=\"sale\"></i>最高返现金额达<span class=\"js_company_sale\">' + tx_fee + '</span>元</dt><dd class=\"js_recharge_now\"><a onclick=\"_hmt.push([\"_trackEvent\",\"usercenter\",\"click\",\"index_buy\"])\" href=\"' + tx_recharge_url + '\">立即储值</a></dd><div class=\"clearfix\"></div></dl><span class=\"bg_img\"></span><span class=\"zhe\" onclick=\"to_detail(this)\"></span></li>';\n                                li_detail = li_detail_l + li_detail_r;\n                                $(\".js_usercenter_ul\").append(li_detail);\n                            });\n                            //$('.zheceng').hide();\n                        }\n                    },\n                    error: function error(data) {\n                        //alert('获取列表error');\n                        $('#alert_alert').show();\n                        $('.zheceng').show();\n                        //$('.alert_con .alert_con_br').html('XMLHttpRequest.readyState:'+XMLHttpRequest.readyState+',XMLHttpRequest.status:'+XMLHttpRequest.status+',textStatus:'+textStatus+'!');\n                        $('#alert_alert .alert_con_br').html('网络超时!');\n                    },\n                    complete: function complete() {\n                        $('#load_small_bg').hide();\n                        //$('.zheceng').hide();\n                    }\n                });\n            }\n            //个人中心详情----------------------------------------------------------------------------------------------------------------------------------------------------\n            $('.js_usercenter_detail').get(0) && ~function () {\n                $(document).ready(function () {\n                    //获取储值详情todo-show\n                    merchantinfo_request();\n                    get_rechargedetail();\n                    //获取储值说明---取消使用\n                    //get_rule_detail();\n                });\n            }();\n            // var dl_data = $(\".js_datadl\").map(function() {\n            //     return $(this).attr('data-bizsn');\n            // }).get();\n            //var dl_data_set = new Set(dl_data);\n            //商户信息\n            function merchantinfo_request() {\n                $.ajax({\n                    url: '/prepaid/v1/api/c/merchant_info',\n                    type: 'GET',\n                    dataType: 'json',\n                    data: {\n                        'bigmchnt_value': '',\n                        h: get_hash('h')\n                    },\n                    beforeSend: function beforeSend() {\n                        $('#load_small_bg').show();\n                        //$('.zheceng').show();\n                    },\n                    success: function success(data) {\n                        //alert('获取列表success');\n                        if (data.respcd != '0000') {\n                            //alert('获取列表success-error');\n                            $('#alert_alert').show();\n                            $('.zheceng').show();\n                            if (!data['respmsg']) {\n                                $('#alert_alert .alert_con_br').html(data['resperr']);\n                            } else {\n                                $('#alert_alert .alert_con_br').html(data['respmsg']);\n                            }\n                        } else {\n                            if (data.data.bigmchnt == true) {\n                                //是大商户需要隐藏\n                                $('footer').hide();\n                            }\n                        }\n                    },\n                    error: function error(data) {\n                        $('#alert_alert').show();\n                        $('.zheceng').show();\n                        $('#alert_alert .alert_con_br').html('网络超时!');\n                    },\n                    complete: function complete() {\n                        $('#load_small_bg').hide();\n                    }\n                });\n            }\n            //获取储值详情\n            function get_rechargedetail() {\n                var userid = get_hash('h');\n                $.ajax({\n                    url: '/prepaid/v1/api/c/merchants/' + userid,\n                    type: 'GET',\n                    dataType: 'json',\n                    data: {\n                        'c': get_hash('c')\n                    },\n                    beforeSend: function beforeSend() {\n                        $('#load_small_bg').show();\n                        //$('.zheceng').show();\n                    },\n                    success: function success(data) {\n                        if (data.respcd != '0000') {\n                            $('#alert_alert').show();\n                            $('.zheceng').show();\n                            if (!data['respmsg']) {\n                                $('#alert_alert .alert_con_br').html(data['resperr']);\n                            } else {\n                                $('#alert_alert .alert_con_br').html(data['respmsg']);\n                            }\n                        } else {\n                            var return_data = data.data;\n                            var tx_fee = (return_data.balance / 100).toFixed(2);\n                            var tx_url_pay = return_data.pay_url;\n                            var tx_url_add = return_data.recharge_url;\n                            var tx_url_list = return_data.prepaid_detail;\n                            var tx_merchant_name = return_data.merchant_name;\n                            var tx_expired = return_data.expired;\n                            var tx_rule_detail = return_data.rule_detail;\n                            document.title = tx_merchant_name;\n                            $('.js_detail_price').text(tx_fee);\n                            $('.js_charge_list').attr('href', tx_url_list);\n                            $('.js_detail_buy').attr('href', tx_url_add);\n                            $('.js_detail_pay').attr('href', tx_url_pay);\n                            var return_data_l = tx_rule_detail.length;\n                            for (var i = 0; i < return_data_l; i++) {\n                                var li_detail = '<li><span>' + tx_rule_detail[i] + '</span></li>';\n                                $(\".js_ul_rules\").append(li_detail);\n                            }\n                            if (tx_expired != '0') {\n                                $('.js_detail_buy').hide();\n                            } else {\n                                $('.js_detail_buy').show();\n                            }\n                            //$('.zheceng').hide();\n                        }\n                    },\n                    error: function error(data) {\n                        $('#alert_alert').show();\n                        $('.zheceng').show();\n                        //$('.alert_con .alert_con_br').html('XMLHttpRequest.readyState:'+XMLHttpRequest.readyState+',XMLHttpRequest.status:'+XMLHttpRequest.status+',textStatus:'+textStatus+'!');\n                        $('#alert_alert .alert_con_br').html('网络超时!');\n                    },\n                    complete: function complete() {\n                        $('#load_small_bg').hide();\n                        //$('.zheceng').hide();\n                    }\n                });\n            }\n            //个人中心列表----------------------------------------------------------------------------------------------------------------------------------------------------\n            //滚动下拉-------start--------------------------------------------------------\n            var timer_rt = null;\n            var scroll_if = false;\n            var nomor_show = false;\n            // console.log(scroll_if);\n            var window_height = window.innerHeight;\n            var body_height = $('body').height();\n            // console.log(window_height);\n            // console.log(body_height);   \n            $('.js_usercenter_list').get(0) && ~function () {\n                $(document).ready(function () {\n                    //获取储值列表todo-show\n                    get_rechargelist();\n                });\n                $(window).on('scroll', function (e) {\n                    //var history_top = $(document).scrollTop();\n                    var history_top = document.documentElement.scrollTop || document.body.scrollTop;\n                    // console.log('document.documentElement.scrollTop--'+document.documentElement.scrollTop);\n                    // console.log('document.body.scrollTop--'+document.body.scrollTop);\n                    // console.log(body_height - window_height);\n                    // console.log(history_top);\n                    if (history_top < body_height - window_height) {\n                        clearTimeout(timer_rt);\n                    } else {\n                        e.stopPropagation();\n                        if (scroll_if) {\n                            $('.load').show();\n                            scroll_if = false;\n                            timer_rt = window.setTimeout(get_rechargelist, 2000);\n                        }\n                        if (nomor_show) {\n                            $(\"#nomoredata\").animate({ opacity: 0.7 }, 500);\n                            window.setTimeout(nomoredata_hide, 2000);\n                            nomor_show = false;\n                        }\n                        // console.log('scroll:scroll_if=='+scroll_if);\n                        // console.log('scroll:nomor_show=='+nomor_show);\n                    }\n                });\n                //点击查看更多\n                // $('.js_click_more').on('click', function() {\n                //     get_rechargelist();\n                // });\n            }();\n            //获取储值列表\n            function get_rechargelist() {\n                $.ajax({\n                    url: '/prepaid/v1/api/c/transactions',\n                    type: 'GET',\n                    dataType: 'json',\n                    data: {\n                        'c': get_hash('c'),\n                        'h': get_hash('h'),\n                        'pos': $('#js_pos').val(),\n                        'count': 20\n                    },\n                    beforeSend: function beforeSend() {\n                        $('#load_small_bg').show();\n                        //$('.zheceng').show();\n                    },\n                    success: function success(data) {\n                        if (data.respcd != '0000') {\n                            $('#alert_alert').show();\n                            $('.zheceng').show();\n                            if (!data['respmsg']) {\n                                $('#alert_alert .alert_con_br').html(data['resperr']);\n                            } else {\n                                $('#alert_alert .alert_con_br').html(data['respmsg']);\n                            }\n                        } else {\n                            var return_data = data.data;\n                            var last_len = 0;\n                            $(return_data).each(function (i, item) {\n                                var dl_data = $(\".js_datadl\").map(function () {\n                                    return $(this).attr('data-bizsn');\n                                }).get();\n                                var dl_data_set_l = dl_data.length;\n                                var tx_txamt = (return_data[i].txamt / 100).toFixed(2);\n                                var tx_pay_amt = (return_data[i].pay_amt / 100).toFixed(2);\n                                var tx_present_amt = (return_data[i].present_amt / 100).toFixed(2);\n                                var tx_pay_amt0 = (return_data[i].pay_amt / 100).toFixed(0);\n                                var tx_present_amt0 = (return_data[i].present_amt / 100).toFixed(0);\n                                var tx_time = return_data[i].sysdtm;\n                                var tx_status_status = return_data[i].status;\n                                var tx_status = return_data[i].biz_type;\n                                var biz_sn = return_data[i].biz_sn;\n                                var tx_name, tx_price;\n                                var li_detail;\n                                //判断流水号是否重复\n                                var bizn_has = '0';\n                                for (var i = dl_data_set_l - 1; i > 0; i--) {\n                                    if (dl_data[i] == biz_sn) {\n                                        bizn_has = '1';\n                                        break;\n                                    }\n                                }\n                                if (bizn_has == '1') {\n                                    return true;\n                                }\n                                last_len++;\n                                if (tx_status == '1') {\n                                    tx_name = '储值';\n                                    tx_price = '+' + tx_pay_amt;\n                                    li_detail = '<dl class=\"js_datadl\" data-bizsn=\"' + biz_sn + '\"><dt class=\"orange\">+' + tx_present_amt + '</dt><dd>储值赠送<span class=\"buy_back orange\">储值' + tx_pay_amt0 + '送' + tx_present_amt0 + '</span></dd><dd class=\"grey\">' + tx_time + '</dd><div class=\"clearfix\"></div></dl><dl><dt class=\"orange\">' + tx_price + '</dt><dd>' + tx_name + '</dd><dd class=\"grey\">' + tx_time + '</dd><div class=\"clearfix\"></div></dl>';\n                                } else if (tx_status == '2') {\n                                    tx_price = '-' + tx_txamt;\n                                    if (tx_status_status == '4') {\n                                        //消费退款\n                                        tx_name = '储值消费(已撤销)';\n                                        li_detail = '<dl class=\"js_datadl grey\" data-bizsn=\"' + biz_sn + '\"><dt>' + tx_price + '</dt><dd>' + tx_name + '</dd><dd class=\"grey\">' + tx_time + '</dd><div class=\"clearfix\"></div></dl>';\n                                    } else {\n                                        tx_name = '储值消费';\n                                        li_detail = '<dl class=\"js_datadl\" data-bizsn=\"' + biz_sn + '\"><dt>' + tx_price + '</dt><dd>' + tx_name + '</dd><dd class=\"grey\">' + tx_time + '</dd><div class=\"clearfix\"></div></dl>';\n                                    }\n                                } else if (tx_status == '3') {\n                                    tx_name = '消费退款';\n                                    tx_price = '+' + tx_txamt;\n                                    li_detail = '<dl class=\"js_datadl\" data-bizsn=\"' + biz_sn + '\"><dt>' + tx_price + '</dt><dd>' + tx_name + '</dd><dd class=\"grey\">' + tx_time + '</dd><div class=\"clearfix\"></div></dl>';\n                                } else if (tx_status == '4') {\n                                    tx_name = '手动储值';\n                                    tx_price = '+' + tx_pay_amt;\n                                    if (tx_present_amt0 > 0) {\n                                        //有赠送\n                                        li_detail = '<dl class=\"js_datadl\" data-bizsn=\"' + biz_sn + '\"><dt class=\"orange\">+' + tx_present_amt + '</dt><dd>储值赠送<span class=\"buy_back orange\">储值' + tx_pay_amt0 + '送' + tx_present_amt0 + '</span></dd><dd class=\"grey\">' + tx_time + '</dd><div class=\"clearfix\"></div></dl><dl><dt class=\"orange\">' + tx_price + '</dt><dd>' + tx_name + '</dd><dd class=\"grey\">' + tx_time + '</dd><div class=\"clearfix\"></div></dl>';\n                                    } else {\n                                        //没有赠送\n                                        li_detail = '<dl class=\"js_datadl\" data-bizsn=\"' + biz_sn + '\"><dt class=\"orange\">' + tx_price + '</dt><dd>' + tx_name + '</dd><dd class=\"grey\">' + tx_time + '</dd><div class=\"clearfix\"></div></dl>';\n                                    }\n                                }\n                                $(\"#js_diff_get\").append(li_detail);\n                            });\n                            var pos_val = $('#js_pos').val() - 0;\n                            if (return_data.length < 20) {\n                                // $('#alert_alert').show();\n                                // $('#alert_alert .alert_con_br').html('数据已加载完毕');\n                                // $('.zheceng1').show();\n                                if (last_len > 0) {\n                                    nomor_show = true;\n                                } else {\n                                    $(\"#nomoredata\").animate({ opacity: 0.7 }, 500);\n                                    window.setTimeout(nomoredata_hide, 3000);\n                                    nomor_show = false;\n                                }\n                                scroll_if = false;\n                                //$('.js_click_more').hide();\n                            } else {\n                                //$('.js_click_more').show();\n                                pos_val += 20;\n                                $('#js_pos').val(pos_val);\n                                scroll_if = true;\n                            }\n                            //$('.zheceng').hide();\n                            $('.load').hide();\n                            body_height = Math.floor($('body').height()).toFixed(0);\n                        }\n                    },\n                    error: function error(data) {\n                        $('#alert_alert').show();\n                        $('.zheceng').show();\n                        //$('.alert_con .alert_con_br').html('XMLHttpRequest.readyState:'+XMLHttpRequest.readyState+',XMLHttpRequest.status:'+XMLHttpRequest.status+',textStatus:'+textStatus+'!');\n                        $('#alert_alert .alert_con_br').html('网络超时!');\n                    },\n                    complete: function complete() {\n                        $('#load_small_bg').hide();\n                        //$('.zheceng').hide();\n                    }\n                });\n            }\n\n            //通用--------------------------------------------------------------------------------------------------------\n            //获取url的指定hash值\n            function get_hash(hash_val) {\n                var c_val;\n                if (location.href.split('?').length < 2) {\n                    return false;\n                }\n                var url_l = location.href.split('?')[1].split('&');\n                var url_l_l = url_l.length;\n                for (var i = 0; i < url_l_l; i++) {\n                    var url_val = url_l[i].split('=');\n                    if (url_val[0] == hash_val) {\n                        c_val = url_val[1];\n                        return c_val;\n                    }\n                }\n            }\n            //弹框高度定位\n            function alert_top(id) {\n                var alert_height = $(id).height();\n                var mar_t = alert_height / 2;\n                $(id).css('marginTop', -mar_t + 'px');\n            }\n            //关闭弹框\n            $('.js_alert_con_close').on('click', function () {\n                $('.alert_con').hide();\n                // $('.alert_con .alert_con_br').html();\n                $('.zheceng').hide();\n                $('.zheceng1').hide();\n            });\n            //隐藏没有更多信息了\n            function nomoredata_hide() {\n                $(\"#nomoredata\").animate({ opacity: 0 }, 500);\n            }\n        });\n    });\n});\n\n//获取余额提列表页详情-向上滑动刷新---取消使用\nfunction get_history_touch() {\n    $.ajax({\n        url: '/prepaid/v1/api/c/transactions',\n        type: 'GET',\n        dataType: 'json',\n        data: {\n            'c': get_hash('c'),\n            'h': get_hash('h'),\n            'pos': $('.js_diff_get dl').length,\n            'count': 20\n        },\n        beforeSend: function beforeSend() {\n            $('#load_small_bg').show();\n            //$('.zheceng').show();\n        },\n        success: function success(data) {\n            if (data.respcd != '0000') {\n                $('#alert_alert').show();\n                $('.zheceng').show();\n                if (!data['respmsg']) {\n                    $('#alert_alert .alert_con_br').html(data['resperr']);\n                } else {\n                    $('#alert_alert .alert_con_br').html(data['respmsg']);\n                }\n            } else {\n                //$('.zheceng').hide();\n                var return_data = data.data;\n                $(return_data).each(function (i, item) {\n                    var tx_txamt = (return_data[i].txamt / 100).toFixed(2);\n                    var tx_pay_amt = (return_data[i].pay_amt / 100).toFixed(2);\n                    var tx_present_amt = (return_data[i].present_amt / 100).toFixed(2);\n                    var tx_time = return_data[i].sysdtm;\n                    var tx_status = return_data[i].biz_type;\n                    var tx_name, tx_price;\n                    var li_detail;\n                    if (tx_status == '1') {\n                        tx_name = '储值';\n                        tx_price = '+' + tx_pay_amt;\n                        li_detail = '<dl><dt class=\"orange\">+' + tx_present_amt + '</dt><dd>储值赠送<span class=\"buy_back orange\">储值' + tx_pay_amt + '送' + tx_present_amt + '</span></dd><dd class=\"grey\">' + tx_time + '</dd><div class=\"clearfix\"></div></dl><dl><dt class=\"orange\">' + tx_price + '</dt><dd>' + tx_name + '</dd><dd class=\"grey\">' + tx_time + '</dd><div class=\"clearfix\"></div></dl>';\n                    } else {\n                        tx_name = '储值消费';\n                        tx_price = '-' + tx_pay_amt;\n                        li_detail = '<dl><dt>' + tx_price + '</dt><dd>' + tx_name + '</dd><dd class=\"grey\">' + tx_time + '</dd><div class=\"clearfix\"></div></dl>';\n                    }\n                    $(\"#js_diff_get\").append(li_detail);\n                });\n                if (return_data.length < 20) {\n                    $('#alert_alert').show();\n                    $('#alert_alert .alert_con_br').html('数据已加载完毕');\n                    $('.zheceng').show();\n                    $('.js_click_more').hide();\n                } else {\n                    $('.js_click_more').show();\n                }\n                $('.zheceng').hide();\n            }\n        },\n        error: function error(data) {\n            $('#alert_alert').show();\n            $('.zheceng').show();\n            //$('.alert_con .alert_con_br').html('XMLHttpRequest.readyState:'+XMLHttpRequest.readyState+',XMLHttpRequest.status:'+XMLHttpRequest.status+',textStatus:'+textStatus+'!');\n            $('#alert_alert .alert_con_br').html('网络超时!');\n        },\n        complete: function complete() {\n            $('#load_small_bg').hide();\n            //$('.zheceng').hide();\n        }\n    });\n}\n//获取储值规则---取消使用\nfunction get_rule_detail() {\n    $.ajax({\n        url: '/prepaid/v1/api/c/rulexplain',\n        type: 'GET',\n        dataType: 'json',\n        data: {\n            'c': get_hash('c'),\n            'h': get_hash('h')\n        },\n        beforeSend: function beforeSend() {\n            $('#load_small_bg').show();\n            //$('.zheceng1').show();\n        },\n        success: function success(data) {\n            if (data.respcd != '0000') {\n                $('#alert_alert').show();\n                $('.zheceng1').show();\n                if (!data['respmsg']) {\n                    $('#alert_alert .alert_con_br').html(data['resperr']);\n                } else {\n                    $('#alert_alert .alert_con_br').html(data['respmsg']);\n                }\n            } else {\n                var return_data = data.data;\n                var return_data_l = return_data.length;\n                for (var i = 0; i < return_data_l; i++) {\n                    var li_detail = '<li><span>' + return_data[i] + '</span></li>';\n                    $(\".js_ul_rules\").append(li_detail);\n                }\n                //$('.zheceng1').hide();\n            }\n        },\n        error: function error(data) {\n            $('#alert_alert').show();\n            $('.zheceng1').show();\n            //$('.alert_con .alert_con_br').html('XMLHttpRequest.readyState:'+XMLHttpRequest.readyState+',XMLHttpRequest.status:'+XMLHttpRequest.status+',textStatus:'+textStatus+'!');\n            $('#alert_alert .alert_con_br').html('网络超时!');\n        },\n        complete: function complete() {\n            $('#load_small_bg').hide();\n            //$('.zheceng').hide();\n        }\n    });\n}\n\n//获取当前时间\nfunction now_date() {\n    var n_date = new Date();\n    var n_date_year = n_date.getFullYear();\n    var n_date_mon = tow_num(n_date.getMonth() + 1);\n    var n_date_day = tow_num(n_date.getDate());\n    var n_date_h = tow_num(n_date.getHours());\n    var n_date_m = tow_num(n_date.getMinutes());\n    var n_date_mm = tow_num(n_date.getSeconds());\n    var n_date_end = n_date_year + \"-\" + n_date_mon + \"-\" + n_date_day + \" \" + n_date_h + \":\" + n_date_m + \":\" + n_date_mm;\n    return n_date_end;\n}\n//如果小于10，则十位显示0\nfunction tow_num(arm) {\n    var arm_num = \"0\" + arm;\n    var arm_num_end = arm_num.substr(-2, 2);\n    return arm_num_end;\n}"]}