{"version":3,"sources":["b/setrule1.js"],"names":["time_area","startime","$","endtime","val","s_year","attr","s_month","s_day","e_year","e_month","e_day","s_time","e_time","s_time_s","Date","getTime","e_time_s","addClass","removeClass","get_data","wordtip","length","text","startime_zu","split","data","date_get","nowYear","nowMonth","nowDate","endtime_zu","rules","JSON","parse","localstorage","getone_storage","eq","append","find","remove","css","i","chu_value","chu_key","song_value","song_key","index_value","index","dd_detail","get_shopname","return_data","shopname","zepto","require","yanzheng","add_bounced","ajax_rule","iosselect","document","ready","get_storage","on","showDom","querySelector","year","dataset","month","day","yearData","monthData","dateData","container","title","itemHeight","itemShowCount","relation","oneLevelId","twoLevelId","threeLevelId","callback","year_data","month_data","day_data","id","value","dd_list","this","parents","crash_now_str","crash_now_strend","replace","crash_end_z","crash_end_z_first","substr","crash_end_l","len_val","len","tel_activity","name_test","each","numprice_test","error_len","set_storage","chu_len","chu_html","chu_val","song_val","rule","push","setone_storage","stringify","location","href","protocol","host","close_tip"],"mappings":"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","file":"../../../js/b/setrule1.js","sourcesContent":["'use strict';\n\nvar zepto = require('../plug/zepto.min');\nvar yanzheng = require('../common/yanzheng');\nvar add_bounced = require('../common/add_bounced');\nvar ajax_rule = require('../common/ajax_rule');\nvar localstorage = require('../common/localstorage');\nvar iosselect = require('../common/iosselect');\nvar date_get = require('../common/date_get');\n//设置储值活动----------------------------------------------------------------------------------------------------------------------------------------------------\n$(document).ready(function () {\n    //获取店铺名称\n    var data_shopname = {};\n    //ajax_rule.ajax_rule(url, 'GET', 'json', data_shopname, '.zheceng', get_shopname);\n    //获取初始值\n    localstorage.get_storage(get_data);\n});\n//点击开始时间\n$('.js_startime').on('click', function () {\n    var showDom = document.querySelector('.js_startime');\n    var year = showDom.dataset['year'];\n    var month = showDom.dataset['month'];\n    var day = showDom.dataset['day'];\n\n    var bankSelect = new iosselect(3, [date_get.yearData, date_get.monthData, date_get.dateData], {\n        container: '.ios_select_container',\n        title: '选择开始时间',\n        itemHeight: 50,\n        itemShowCount: 3,\n        relation: [1, 1, 0, 0],\n        oneLevelId: year,\n        twoLevelId: month,\n        threeLevelId: day,\n        //showLoading: true,\n        callback: function callback(year_data, month_data, day_data) {\n            showDom.dataset['year'] = year_data.id;\n            showDom.dataset['month'] = month_data.id;\n            showDom.dataset['day'] = day_data.id;\n            showDom.value = month_data.id + '月' + day_data.id + '日';\n            $('#startime').val(year_data.id + '-' + month_data.id + '-' + day_data.id);\n            //设置结束时间的默认时间--开始时间\n            $('.js_endtime').attr('data-year', year_data.id);\n            $('.js_endtime').attr('data-month', month_data.id);\n            $('.js_endtime').attr('data-day', day_data.id);\n        }\n    });\n});\n//点击到期时间\n$('.js_endtime').on('click', function () {\n    var showDom = document.querySelector('.js_endtime');\n    var year = showDom.dataset['year'];\n    var month = showDom.dataset['month'];\n    var day = showDom.dataset['day'];\n\n    var bankSelect = new iosselect(3, [date_get.yearData, date_get.monthData, date_get.dateData], {\n        container: '.ios_select_container',\n        title: '选择结束时间',\n        itemHeight: 50,\n        itemShowCount: 3,\n        relation: [1, 1, 0, 0],\n        oneLevelId: year,\n        twoLevelId: month,\n        threeLevelId: day,\n        //showLoading: true,\n        callback: function callback(year_data, month_data, day_data) {\n            showDom.dataset['year'] = year_data.id;\n            showDom.dataset['month'] = month_data.id;\n            showDom.dataset['day'] = day_data.id;\n            showDom.value = month_data.id + '月' + day_data.id + '日';\n            $('#endtime').val(year_data.id + '-' + month_data.id + '-' + day_data.id);\n        }\n    });\n});\n//点击增加规则\n$('.js_add_activity').on('click', function () {\n    var dd_list = $('.js_rule dd').length - 0;\n    var dd_detail = '<dd data-index=\"\">储值<input class=\"text text_short js_chu js_storule\" type=\"text\" value=\"\" name=\"chu\" />元送<input class=\"text text_short js_song js_storule\" type=\"text\" value=\"\" name=\"song\" />元<i class=\"delete js_ruledelete\"></i></dd>';\n    if (dd_list <= 3) {\n        if (dd_list == 1) {\n            //第一条增加删除按钮\n            $('.js_rule dd').append('<i class=\"delete js_ruledelete\"></i>');\n        }\n        if (dd_list == 3) {\n            //设置为不可添加的按钮样式\n            $(this).find('.add_rule').css('display', 'none');\n            $(this).find('.add_rule_no').css('display', 'inline-block');\n        }\n        $('.js_rule').append(dd_detail);\n        $('.js_rule_error').removeClass('span_tips');\n    } else {\n        $('.js_rule_error').addClass('span_tips');\n    }\n});\n//点击删除规则\n$(document).on('click', '.js_ruledelete', function () {\n    var dd_list = $('.js_rule dd').length - 0;\n    if (dd_list == 2) {\n        //删除第一条数据后面的删除按钮\n        $(this).parents('dd').remove();\n        $('.js_rule dd i.js_ruledelete').remove();\n    }\n    $(this).parents('dd').remove();\n    $('.js_rule_error').removeClass('span_tips');\n    $('.js_add_activity').find('.add_rule').css('display', 'inline-block');\n    $('.js_add_activity').find('.add_rule_no').css('display', 'none');\n});\n//填写储值赠送金额\n$(document).on('input', '.js_storule', function () {\n    var crash_now_str = $(this).val();\n    //字符长的时候减小字号\n    if (crash_now_str.length <= 10) {\n        $(this).css('font-size', '16px');\n    } else {\n        $(this).css('font-size', '14px');\n    }\n    //将非数字的字符替换为空\n    var crash_now_strend = crash_now_str.replace(/[^\\d]/g, '');\n    //如果输入为空展示全部提现\n    if (crash_now_strend.length == 0) {\n        $(this).val('');\n        return false;\n    }\n    if (crash_now_strend.length == 1 && crash_now_strend == '0') {\n        $(this).val('');\n        return false;\n    }\n    //整数部分最长12位start\n    var crash_end_z = crash_now_strend.split('.')[0];\n    //如果整数部分首位为0，则截取后买的 \n    var crash_end_z_first = crash_end_z.substr(0, 1);\n    if (crash_end_z_first == '0') {\n        crash_end_z = crash_end_z.substr(1);\n    }\n    if (crash_end_z.length > 4) {\n        crash_end_z = crash_end_z.substr(0, 4);\n    }\n    if (crash_now_strend.split('.').length > 1) {\n        var crash_end_l = crash_now_strend.split('.')[1].substr(0, 2);\n        crash_now_strend = crash_end_z - 0 + '.' + crash_end_l;\n    } else {\n        crash_now_strend = crash_end_z - 0;\n    }\n    //整数部分最长12位end\n    //控制输入长度后赋值并将该值转化为字符串格式\n    $(this).val(crash_now_strend);\n});\n//填写备注验证\n$('.js_note').on('input', function () {\n    var len_val = $(this).val();\n    var len = len_val.length - 0;\n    if (len <= 40) {\n        $('.js_wordtip').find('span').text(40 - len);\n    } else {\n        $('.js_note').val(len_val.substr(0, 40));\n    }\n});\n//点击提交预览\n$('.js_addactivity_sub').on('click', function () {\n    yanzheng.tel_activity('.js_tel');\n    yanzheng.name_test('.js_note', 0, 40);\n    time_area();\n    $('.js_storule').each(function () {\n        yanzheng.numprice_test(this, 0, 4);\n    });\n    var error_len = $('.error_tips').length;\n    if (error_len > 0) {\n        return false;\n    }\n    //存储数据并进入下一步\n    localstorage.set_storage();\n    //存储储值规则\n    var rules = [];\n    var chu_len = $('.js_rule dd').length;\n    for (var i = 0; i < chu_len; i++) {\n        var chu_html = $('.js_rule dd').eq(i);\n        var chu_key = chu_html.find('.js_chu').attr('name');\n        var chu_val = chu_html.find('.js_chu').val();\n        var song_key = chu_html.find('.js_song').attr('name');\n        var song_val = chu_html.find('.js_song').val();\n        var rule = { index: i + 1, chu_key: chu_val, song_key: song_val };\n        rules.push(rule);\n    }\n    localstorage.setone_storage('rules', JSON.stringify(rules));\n    location.href = location.protocol + '//' + location.host + '/Users/yaya/Documents/job/local/储值B端2/store/html/b/preview.html';\n});\n//开始时间与结束时间的判断\nfunction time_area() {\n    var startime = $('.js_startime');\n    var endtime = $('.js_endtime');\n    if (startime.val() && endtime.val()) {\n        var s_year = startime.attr('data-year');\n        var s_month = startime.attr('data-month');\n        var s_day = startime.attr('data-day');\n        var e_year = endtime.attr('data-year');\n        var e_month = endtime.attr('data-month');\n        var e_day = endtime.attr('data-day');\n        var s_time = s_year + '/' + s_month + '/' + s_day + ' 00:00:00';\n        var e_time = e_year + '/' + e_month + '/' + e_day + ' 23:59:59';\n        var s_time_s = new Date(s_time).getTime();\n        var e_time_s = new Date(e_time).getTime();\n        var s_cha = e_time_s - s_time_s;\n        if (e_time_s - s_time_s > 365 * 24 * 60 * 60 * 1000) {\n            $('.js_timetips').addClass('error_tips');\n        } else {\n            $('.js_timetips').removeClass('error_tips');\n        }\n    } else {\n        $('.js_timetips').addClass('error_tips');\n    }\n}\n//获取时间后设置日期显示\nfunction get_data() {\n    //剩余可输入字数\n    var wordtip = $('.js_note').val().length - 0;\n    $('.js_wordtip span').text(40 - wordtip);\n    //日期\n    var startime = $('#startime').val();\n    var startime_zu = startime.split('-');\n    if (startime) {\n        $('.js_startime').data('year', startime_zu[0]);\n        $('.js_startime').data('month', startime_zu[1]);\n        $('.js_startime').data('day', startime_zu[2]);\n        $('.js_startime').val(startime_zu[1] + '月' + startime_zu[2] + '日');\n    } else {\n        $('.js_startime').data('year', date_get.nowYear);\n        $('.js_startime').data('month', date_get.nowMonth);\n        $('.js_startime').data('day', date_get.nowDate);\n        $('#startime').val(date_get.nowYear + '-' + date_get.nowMonth + '-' + date_get.nowDate);\n        $('.js_startime').val('今天');\n    }\n    var endtime = $('#endtime').val();\n    var endtime_zu = endtime.split('-');\n    if (endtime) {\n        $('.js_endtime').data('year', endtime_zu[0]);\n        $('.js_endtime').data('month', endtime_zu[1]);\n        $('.js_endtime').data('day', endtime_zu[2]);\n        $('.js_endtime').val(endtime_zu[1] + '月' + endtime_zu[2] + '日');\n    } else {\n        $('.js_endtime').data('year', date_get.nowYear);\n        $('.js_endtime').data('month', date_get.nowMonth);\n        $('.js_endtime').data('day', date_get.nowDate);\n        $('#endtime').val(date_get.nowYear + '-' + date_get.nowMonth + '-' + date_get.nowDate);\n        $('.js_endtime').val('');\n    }\n    //储值规则--有退出，放置最后\n    var rules = JSON.parse(localstorage.getone_storage('rules'));\n    if (!rules) {\n        return false;\n    }\n    if (rules.length > 1) {\n        $('.js_rule dd').eq(0).append('<i class=\"delete js_ruledelete\"></i>');\n    } else {\n        $('.js_rule dd').eq(0).find('i.js_ruledelete').remove();\n    }\n    if (rules.length >= 4) {\n        $('.js_rule').find('.add_rule').css('display', 'none');\n        $('.js_rule').find('.add_rule_no').css('display', 'inline-block');\n    } else {\n        $('.js_rule').find('.add_rule').css('display', 'inline-block');\n        $('.js_rule').find('.add_rule_no').css('display', 'none');\n    }\n    for (var i = 0; i < rules.length; i++) {\n        var chu_value = rules[i].chu_key;\n        var song_value = rules[i].song_key;\n        var index_value = rules[i].index;\n        if (i == 0) {\n            $('.js_rule dd').eq(0).find('.js_chu').val(chu_value);\n            $('.js_rule dd').eq(0).find('.js_song').val(song_value);\n            $('.js_rule dd').eq(0).attr('data-index', index_value);\n        } else {\n            var dd_detail = '<dd data-index=\"' + index_value + '\">储值<input class=\"text text_short js_chu js_storule\" type=\"text\" value=\"' + chu_value + '\" name=\"chu\" />元送<input class=\"text text_short js_song js_storule\" type=\"text\" value=\"' + song_value + '\" name=\"song\" />元<i class=\"delete js_ruledelete\"></i></dd>';\n            $('.js_rule').append(dd_detail);\n        }\n    }\n}\n//获取店铺名称\nfunction get_shopname(return_data) {\n    $('.js_shopname').val(return_data.shopname);\n}\n//添加弹框\nadd_bounced.add_bounced();\n//关闭弹框\nadd_bounced.close_tip();"]}