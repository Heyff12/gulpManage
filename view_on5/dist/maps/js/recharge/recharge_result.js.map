{"version":3,"sources":["recharge/recharge_result.js"],"names":["hideMenu","WeixinJSBridge","call","document","addEventListener","attachEvent","require","$","get_recharge_result","ajax","url","type","dataType","data","c","get_hash","h","biz_sn","syssn","beforeSend","show","success","respcd","html","return_data","return_pay","pay_amt","toFixed","return_recharge","txamt","return_href","pay_url","return_company","merchant_name","return_diff","balance","text","attr","error","complete","hide","hash_val","c_val","location","href","split","length","url_l","url_l_l","i","url_val","get","ready","on","invoke","res"],"mappings":"AAAA,YAEA,SAASA,YACLC,eAAeC,KAAK,kBACpBD,eAAeC,KAAK,eAEK,mBAAlBD,gBACHE,SAASC,iBACTD,SAASC,iBAAiB,sBAAuBJ,UAAU,GACpDG,SAASE,cAChBF,SAASE,YAAY,sBAAuBL,UAC5CG,SAASE,YAAY,wBAAyBL,WAGlDA,WAEJM,SAAS,qBAAsB,WAC3BA,SAAS,SAAU,SAAUC,GACzBA,EAAE,WAYE,QAASC,KACLD,EAAEE,MACEC,IAAK,oCACLC,KAAM,MACNC,SAAU,OACVC,MACIC,EAAKC,EAAS,KACdC,EAAKD,EAAS,KACdE,OAAUF,EAAS,UACnBG,MAASH,EAAS,UAEtBI,WAAY,WACRZ,EAAE,kBAAkBa,QAGxBC,QAAS,SAAiBR,GACtB,GAAmB,QAAfA,EAAKS,OACLf,EAAE,gBAAgBa,OAClBb,EAAE,YAAYa,OACTP,EAAc,QAGfN,EAAE,8BAA8BgB,KAAKV,EAAc,SAFnDN,EAAE,8BAA8BgB,KAAKV,EAAc,aAIpD,CACH,GAAIW,GAAcX,EAAKA,KACnBY,GAAcD,EAAYE,QAAU,KAAKC,QAAQ,GACjDC,GAAmBJ,EAAYK,MAAQ,KAAKF,QAAQ,GACpDG,EAAcN,EAAYO,QAC1BC,EAAiBR,EAAYS,cAC7BC,GAAeV,EAAYW,QAAU,KAAKR,QAAQ,EACtDpB,GAAE,gBAAgB6B,KAAKJ,GACvBzB,EAAE,eAAe6B,KAAKF,GACtB3B,EAAE,cAAc6B,KAAKX,GACrBlB,EAAE,iBAAiB6B,KAAKR,GACxBrB,EAAE,kBAAkB8B,KAAK,OAAQP,KAIzCQ,MAAO,SAAezB,GAClBN,EAAE,gBAAgBa,OAClBb,EAAE,YAAYa,OAEdb,EAAE,8BAA8BgB,KAAK,UAEzCgB,SAAU,WACNhC,EAAE,kBAAkBiC,UAOhC,QAASzB,GAAS0B,GACd,GAAIC,EACJ,IAAIC,SAASC,KAAKC,MAAM,KAAKC,OAAS,EAClC,OAAO,CAIX,KAAK,GAFDC,GAAQJ,SAASC,KAAKC,MAAM,KAAK,GAAGA,MAAM,KAC1CG,EAAUD,EAAMD,OACXG,EAAI,EAAGA,EAAID,EAASC,IAAK,CAC9B,GAAIC,GAAUH,EAAME,GAAGJ,MAAM,IAC7B,IAAIK,EAAQ,IAAMT,EAEd,MADAC,GAAQQ,EAAQ,IA1E5B3C,EAAE,oBAAoB4C,IAAI,KAAO,WAC7B5C,EAAEJ,UAAUiD,MAAM,WAEd5C,MAEJD,EAAE,uBAAuB8C,GAAG,QAAS,WAEjCpD,eAAeqD,OAAO,iBAAmB,SAAUC,WA+E3DhD,EAAE,uBAAuB8C,GAAG,QAAS,WACjC9C,EAAE,cAAciC,OAEhBjC,EAAE,YAAYiC,OACdjC,EAAE,aAAaiC,OACfjC,EAAE,aAAaiC","file":"../../../js/recharge/recharge_result.js","sourcesContent":["'use strict';\n\nfunction hideMenu() {\n    WeixinJSBridge.call('hideOptionMenu');\n    WeixinJSBridge.call('hideToolbar');\n}\nif (typeof WeixinJSBridge == \"undefined\") {\n    if (document.addEventListener) {\n        document.addEventListener('WeixinJSBridgeReady', hideMenu, false);\n    } else if (document.attachEvent) {\n        document.attachEvent('WeixinJSBridgeReady', hideMenu);\n        document.attachEvent('onWeixinJSBridgeReady', hideMenu);\n    }\n} else {\n    hideMenu();\n}\nrequire(['../require-config'], function () {\n    require([\"zepto\"], function ($) {\n        $(function () {\n            $('.js_result_index').get(0) && ~function () {\n                $(document).ready(function () {\n                    //获取储值结果\n                    get_recharge_result();\n                });\n                $('.js_result_recharge').on('click', function () {\n                    //open(location, '_self').close();\n                    WeixinJSBridge.invoke('closeWindow', {}, function (res) {});\n                });\n            }();\n            //获取储值结果--内容\n            function get_recharge_result() {\n                $.ajax({\n                    url: '/prepaid/v1/api/c/recharge/result',\n                    type: 'GET',\n                    dataType: 'json',\n                    data: {\n                        'c': get_hash('c'),\n                        'h': get_hash('h'),\n                        'biz_sn': get_hash('biz_sn'),\n                        'syssn': get_hash('syssn')\n                    },\n                    beforeSend: function beforeSend() {\n                        $('#load_small_bg').show();\n                        //$('.zheceng').show();\n                    },\n                    success: function success(data) {\n                        if (data.respcd != '0000') {\n                            $('#alert_alert').show();\n                            $('.zheceng').show();\n                            if (!data['respmsg']) {\n                                $('#alert_alert .alert_con_br').html(data['resperr']);\n                            } else {\n                                $('#alert_alert .alert_con_br').html(data['respmsg']);\n                            }\n                        } else {\n                            var return_data = data.data;\n                            var return_pay = (return_data.pay_amt / 100).toFixed(2);\n                            var return_recharge = (return_data.txamt / 100).toFixed(2);\n                            var return_href = return_data.pay_url;\n                            var return_company = return_data.merchant_name;\n                            var return_diff = (return_data.balance / 100).toFixed(2);\n                            $('.js_paycompa').text(return_company);\n                            $('.js_leftnum').text(return_diff);\n                            $('.js_paynum').text(return_pay);\n                            $('.js_chargenum').text(return_recharge);\n                            $('.js_result_buy').attr('href', return_href);\n                            //$('.zheceng').hide();\n                        }\n                    },\n                    error: function error(data) {\n                        $('#alert_alert').show();\n                        $('.zheceng').show();\n                        //$('.alert_con .alert_con_br').html('XMLHttpRequest.readyState:'+XMLHttpRequest.readyState+',XMLHttpRequest.status:'+XMLHttpRequest.status+',textStatus:'+textStatus+'!');\n                        $('#alert_alert .alert_con_br').html('网络超时!');\n                    },\n                    complete: function complete() {\n                        $('#load_small_bg').hide();\n                        //$('.zheceng').hide();\n                    }\n                });\n            }\n            //通用--------------------------------------------------------------------------------------------------------\n            //获取url的指定hash值\n            function get_hash(hash_val) {\n                var c_val;\n                if (location.href.split('?').length < 2) {\n                    return false;\n                }\n                var url_l = location.href.split('?')[1].split('&');\n                var url_l_l = url_l.length;\n                for (var i = 0; i < url_l_l; i++) {\n                    var url_val = url_l[i].split('=');\n                    if (url_val[0] == hash_val) {\n                        c_val = url_val[1];\n                        return c_val;\n                    }\n                }\n            }\n            //弹框高度定位\n            function alert_top(id) {\n                var alert_height = $(id).height();\n                var mar_t = alert_height / 2 - 20;\n                $(id).css('marginTop', -mar_t + 'px');\n            }\n            //关闭弹框\n            $('.js_alert_con_close').on('click', function () {\n                $('.alert_con').hide();\n                // $('.alert_con .alert_con_br').html();\n                $('.zheceng').hide();\n                $('.zheceng1').hide();\n                $('.zheceng2').hide();\n            });\n        });\n    });\n});"]}