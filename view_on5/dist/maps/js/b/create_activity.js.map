{"version":3,"sources":["b/create_activity.js"],"names":["delete_rule","obj","dd_list","$","length","parents","remove","removeClass","find","css","require","yanzheng","ajax_rule","localstorage","iosselect","date_get","alert_word","if_menu","time_area","startime","endtime","tips_pic","val","s_year","attr","s_month","s_day","e_year","e_month","e_day","s_time","e_time","s_time_s","Date","getTime","e_time_s","today_time_s","today_times","addClass","html","get_data","focus","wordtip","text","startime_zu","split","data","nowYear","nowMonth","nowDate","endtime_zu","rules_t","getone_storage","rules","JSON","parse","eq","append","i","chu_value","pay_amt","toFixed","song_value","present_amt","index_value","grid_index","dd_detail","get_shopname","return_data","merchant_name","toast_data_short","document","ready","get_storage","on","showDom","querySelector","year","dataset","month","day","yearData","monthData","dateData","container","title","itemHeight","itemShowCount","relation","oneLevelId","twoLevelId","threeLevelId","callback","year_data","month_data","day_data","id","value","this","crash_now_str","crash_now_strend","replace","crash_end_z","crash_end_z_first","substr","crash_end_l","len_val","len","window","navigator","appVersion","match","test","userAgent","hide","blur","show","tel_activity","name_test","each","numprice_test","hasClass","alert_word_show_short","error_len","set_storage","chu_len","chu_html","chu_val","song_val","rule","push","setone_storage","stringify","url","location","protocol","host","goto_url"],"mappings":"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","file":"../../../js/b/create_activity.js","sourcesContent":["'use strict';\n\n//删除规则\nfunction delete_rule(obj) {\n    var dd_list = $('.js_rule dd').length - 0;\n    if (dd_list == 2) {\n        //删除第一条数据后面的删除按钮\n        $(obj).parents('dd').remove();\n        $('.js_rule dd i.js_ruledelete').remove();\n    }\n    $(obj).parents('dd').remove();\n    $('.js_rule_error').removeClass('span_tips');\n    $('.js_add_activity').find('.add_rule').css('display', 'inline-block');\n    $('.js_add_activity').find('.add_rule_no').css('display', 'none');\n}\nrequire(['../require-config'], function () {\n    require([\"zepto\", \"yanzheng\", \"ajax_rule\", \"localstorage\", \"iosselect\", \"date_get\", \"alert_word\", \"if_menu\"], function ($, yanzheng, ajax_rule, localstorage, iosselect, date_get, alert_word, if_menu) {\n        $(function () {\n            //设置菜单空---取消了native的引用0106\n            // var menu_data = { menus: [] };\n            // native.setNavMenu(menu_data, function(cb) {\n            //     console.log(cb.ret);\n            // });\n            //加载提示弹框\n            alert_word.toast_data_short('body', '金额需大于0且不超过30000');\n            var today_times = date_get.nowYear + '/' + date_get.nowMonth + '/' + date_get.nowDate + ' 00:00:00';\n            //设置储值活动----------------------------------------------------------------------------------------------------------------------------------------------------\n            $(document).ready(function () {\n                //获取店铺名称\n                var data_shopname = {};\n                ajax_rule.ajax_rule('/prepaid/v1/api/b/merchant_info', 'GET', 'json', '', '.zheceng', get_shopname);\n                //获取初始值\n                localstorage.get_storage(get_data);\n            });\n            //点击开始时间\n            $('.js_startime').on('click', function () {\n                var showDom = document.querySelector('.js_startime');\n                var year = showDom.dataset['year'];\n                var month = showDom.dataset['month'];\n                var day = showDom.dataset['day'];\n\n                var bankSelect = new iosselect(3, [date_get.yearData, date_get.monthData, date_get.dateData], {\n                    container: '.ios_select_container',\n                    title: '选择开始时间',\n                    itemHeight: 50,\n                    itemShowCount: 3,\n                    relation: [1, 1, 0, 0],\n                    oneLevelId: year,\n                    twoLevelId: month,\n                    threeLevelId: day,\n                    //showLoading: true,\n                    callback: function callback(year_data, month_data, day_data) {\n                        showDom.dataset['year'] = year_data.id;\n                        showDom.dataset['month'] = month_data.id;\n                        showDom.dataset['day'] = day_data.id;\n                        showDom.value = month_data.id + '月' + day_data.id + '日';\n                        $('#startime').val(year_data.id + '-' + month_data.id + '-' + day_data.id);\n                        //设置结束时间的默认时间--开始时间\n                        // $('.js_endtime').attr('data-year', year_data.id);\n                        // $('.js_endtime').attr('data-month', month_data.id);\n                        // $('.js_endtime').attr('data-day', day_data.id);\n                    }\n                });\n            });\n            //点击到期时间\n            $('.js_endtime').on('click', function () {\n                var showDom = document.querySelector('.js_endtime');\n                var year = showDom.dataset['year'];\n                var month = showDom.dataset['month'];\n                var day = showDom.dataset['day'];\n\n                var bankSelect = new iosselect(3, [date_get.yearData, date_get.monthData, date_get.dateData], {\n                    container: '.ios_select_container',\n                    title: '选择结束时间',\n                    itemHeight: 50,\n                    itemShowCount: 3,\n                    relation: [1, 1, 0, 0],\n                    oneLevelId: year,\n                    twoLevelId: month,\n                    threeLevelId: day,\n                    //showLoading: true,\n                    callback: function callback(year_data, month_data, day_data) {\n                        showDom.dataset['year'] = year_data.id;\n                        showDom.dataset['month'] = month_data.id;\n                        showDom.dataset['day'] = day_data.id;\n                        showDom.value = month_data.id + '月' + day_data.id + '日';\n                        $('#endtime').val(year_data.id + '-' + month_data.id + '-' + day_data.id);\n                    }\n                });\n            });\n            //点击增加规则\n            $('.js_add_activity').on('click', function () {\n                var dd_list = $('.js_rule dd').length - 0;\n                var dd_detail = '<dd data-index=\"\">储值<input class=\"text text_short js_chu js_storule\" type=\"tel\" value=\"\" name=\"pay_amt\" />元送<input class=\"text text_short js_song js_storule\" type=\"tel\" value=\"\" name=\"present_amt\" />元<i class=\"delete js_ruledelete\" onclick=\"delete_rule(this)\"></i></dd>';\n                if (dd_list <= 3) {\n                    if (dd_list == 1) {\n                        //第一条增加删除按钮\n                        $('.js_rule dd').append('<i class=\"delete js_ruledelete\" onclick=\"delete_rule(this)\"></i>');\n                    }\n                    if (dd_list == 3) {\n                        //设置为不可添加的按钮样式\n                        $(this).find('.add_rule').css('display', 'none');\n                        $(this).find('.add_rule_no').css('display', 'inline-block');\n                    }\n                    $('.js_rule').append(dd_detail);\n                    $('.js_rule_error').removeClass('span_tips');\n                } else {\n                    $('.js_rule_error').addClass('span_tips');\n                }\n            });\n            //点击删除规则\n            // $(document).on('click', '.js_ruledelete', function() {\n            //     var dd_list = $('.js_rule dd').length - 0;\n            //     if (dd_list == 2) {\n            //         //删除第一条数据后面的删除按钮\n            //         $(this).parents('dd').remove();\n            //         $('.js_rule dd i.js_ruledelete').remove();\n            //     }\n            //     $(this).parents('dd').remove();\n            //     $('.js_rule_error').removeClass('span_tips');\n            //     $('.js_add_activity').find('.add_rule').css('display', 'inline-block');\n            //     $('.js_add_activity').find('.add_rule_no').css('display', 'none');\n            // });\n            //填写储值赠送金额\n            $(document).on('input', '.js_storule', function () {\n                var crash_now_str = $(this).val();\n                //将非数字的字符替换为空\n                var crash_now_strend = crash_now_str.replace(/[^\\d]/g, '');\n                //如果输入为空展示全部提现\n                if (crash_now_strend.length == 0) {\n                    $(this).val('');\n                    return false;\n                }\n                if (crash_now_strend.length == 1 && crash_now_strend == '0') {\n                    $(this).val('');\n                    return false;\n                }\n                //整数部分最长4位start，且不大于2000\n                var crash_end_z = crash_now_strend.split('.')[0];\n                //如果整数部分首位为0，则截取后买的 \n                var crash_end_z_first = crash_end_z.substr(0, 1);\n                if (crash_end_z_first == '0') {\n                    crash_end_z = crash_end_z.substr(1);\n                }\n                if (crash_end_z.length > 5) {\n                    crash_end_z = crash_end_z.substr(0, 5);\n                }\n                if (crash_now_strend.split('.').length > 1) {\n                    var crash_end_l = crash_now_strend.split('.')[1].substr(0, 2);\n                    crash_now_strend = crash_end_z - 0 + '.' + crash_end_l;\n                } else {\n                    crash_now_strend = crash_end_z - 0;\n                }\n                // if(crash_now_strend>2000){\n                //     $(this).addClass('error_tips');\n                // }else{\n                //     $(this).removeClass('error_tips');\n                // }\n                //整数部分最长12位end\n                //控制输入长度后赋值并将该值转化为字符串格式\n                $(this).val(crash_now_strend);\n            });\n            //填写备注验证\n            $('.js_note').on('input', function () {\n                var len_val = $(this).val();\n                var len = len_val.length - 0;\n                if (len <= 40) {\n                    $('.js_wordtip').find('span').text(40 - len);\n                } else {\n                    //$('.js_note').val(len_val.substr(0, 40));\n                    return false;\n                }\n            });\n            //测试输入框对浏览器的变化\n            if (window.navigator.appVersion.match(/iphone/gi) || /Mac OS X/i.test(navigator.userAgent)) {\n                $('.js_note').on({\n                    'focus': function focus() {\n                        $('.section_footer').hide();\n                        // console.log('body===' + $('body').height());\n                        // console.log('availHeight===' + screen.availHeight);\n                        // var a = document.documentElement.scrollTop || document.body.scrollTop;\n                        // console.log('top===' + a);\n                    },\n                    'blur': function blur() {\n                        $('.section_footer').show();\n                    }\n                });\n                $('.js_tel').on({\n                    'focus': function focus() {\n                        $('.section_footer').hide();\n                    },\n                    'blur': function blur() {\n                        $('.section_footer').show();\n                    }\n                });\n                $(document).on('focus', '.js_storule', function () {\n                    $('.section_footer').hide();\n                });\n                $(document).on('blur', '.js_storule', function () {\n                    $('.section_footer').show();\n                });\n            }\n            //点击提交预览\n            $('.js_addactivity_sub').on('click', function () {\n                yanzheng.tel_activity('.js_tel');\n                yanzheng.name_test('.js_note', 0, 40);\n                time_area();\n                $('.js_storule').each(function () {\n                    yanzheng.numprice_test(this, 0, 5, 30000);\n                });\n                $('.js_storule').each(function () {\n                    if ($(this).hasClass('error_tips')) {\n                        alert_word.alert_word_show_short();\n                        return false;\n                    }\n                });\n                var error_len = $('.error_tips').length;\n                if (error_len > 0) {\n                    return false;\n                }\n                //存储数据并进入下一步\n                localstorage.set_storage();\n                //存储储值规则\n                var rules = [];\n                var chu_len = $('.js_rule dd').length;\n                for (var i = 0; i < chu_len; i++) {\n                    var chu_html = $('.js_rule dd').eq(i);\n                    var chu_key = chu_html.find('.js_chu').attr('name');\n                    var chu_val = chu_html.find('.js_chu').val();\n                    var song_key = chu_html.find('.js_song').attr('name');\n                    var song_val = chu_html.find('.js_song').val();\n                    var rule = { grid_index: i + 1, pay_amt: chu_val * 100, present_amt: song_val * 100 };\n                    rules.push(rule);\n                }\n                localstorage.setone_storage('rules', JSON.stringify(rules));\n                var url = location.protocol + '//' + location.host + '/prepaid/v1/page/b/activity_preview.html';\n                if_menu.goto_url(url);\n                // if (typeof QFPAY !== \"undefined\") {\n                //     var go_url = {\n                //         uri: location.protocol + '//' + location.host + '/prepaid/v1/page/b/activity_preview.html',\n                //     };\n                //     native.openUri(go_url, function(cb) {\n                //         console.log(cb.ret);\n                //     });\n                // } else {\n                //     location.href = location.protocol + '//' + location.host + '/prepaid/v1/page/b/activity_preview.html';\n                // }\n            });\n            //开始时间与结束时间的判断\n            function time_area() {\n                var startime = $('.js_startime');\n                var endtime = $('.js_endtime');\n                var tips_pic = '<i class=\"ic_tips\"></i>';\n                if (startime.val() && endtime.val()) {\n                    var s_year = startime.attr('data-year');\n                    var s_month = startime.attr('data-month');\n                    var s_day = startime.attr('data-day');\n                    var e_year = endtime.attr('data-year');\n                    var e_month = endtime.attr('data-month');\n                    var e_day = endtime.attr('data-day');\n                    var s_time = s_year + '/' + s_month + '/' + s_day + ' 00:00:00';\n                    var e_time = e_year + '/' + e_month + '/' + e_day + ' 23:59:59';\n                    var s_time_s = new Date(s_time).getTime();\n                    var e_time_s = new Date(e_time).getTime();\n                    var today_time_s = new Date(today_times).getTime();\n                    var s_cha = e_time_s - s_time_s;\n                    if (s_time_s - today_time_s < 0) {\n                        $('.js_timetips').addClass('error_tips').find('span').html(tips_pic + '开始不能比今天早');\n                        return false;\n                    } else {\n                        $('.js_timetips').removeClass('error_tips').find('span').html('');\n                    }\n                    if (e_time_s - s_time_s > 365 * 24 * 60 * 60 * 1000) {\n                        $('.js_timetips').addClass('error_tips').find('span').html(tips_pic + '时间范围在365天之内');\n                    } else if (e_time_s - s_time_s >= 0) {\n                        $('.js_timetips').removeClass('error_tips').find('span').html('');\n                    } else {\n                        $('.js_timetips').addClass('error_tips').find('span').html(tips_pic + '结束时间不能比开始时间早');\n                    }\n                } else {\n                    $('.js_timetips').addClass('error_tips').find('span').html(tips_pic + '时间范围在365天之内');\n                }\n            }\n            //获取时间后设置日期显示\n            function get_data() {\n                //添加选中事件，以便textarea数值显示\n                $('.js_endtime').focus(); //该输入框input为readonly不会触发输入框事件\n                //剩余可输入字数\n                var wordtip = $('.js_note').val().length - 0;\n                $('.js_wordtip span').text(40 - wordtip);\n                //日期\n                var startime = $('#startime').val();\n                var startime_zu = startime.split('-');\n                if (startime) {\n                    $('.js_startime').data('year', startime_zu[0]);\n                    $('.js_startime').data('month', startime_zu[1]);\n                    $('.js_startime').data('day', startime_zu[2]);\n                    $('.js_startime').val(startime_zu[1] + '月' + startime_zu[2] + '日');\n                } else {\n                    $('.js_startime').data('year', date_get.nowYear);\n                    $('.js_startime').data('month', date_get.nowMonth);\n                    $('.js_startime').data('day', date_get.nowDate);\n                    $('#startime').val(date_get.nowYear + '-' + date_get.nowMonth + '-' + date_get.nowDate);\n                    $('.js_startime').val('今天');\n                }\n                var endtime = $('#endtime').val();\n                var endtime_zu = endtime.split('-');\n                if (endtime) {\n                    $('.js_endtime').data('year', endtime_zu[0]);\n                    $('.js_endtime').data('month', endtime_zu[1]);\n                    $('.js_endtime').data('day', endtime_zu[2]);\n                    $('.js_endtime').val(endtime_zu[1] + '月' + endtime_zu[2] + '日');\n                } else {\n                    $('.js_endtime').data('year', date_get.nowYear);\n                    $('.js_endtime').data('month', date_get.nowMonth);\n                    $('.js_endtime').data('day', date_get.nowDate);\n                    $('#endtime').val(date_get.nowYear + '-' + date_get.nowMonth + '-' + date_get.nowDate);\n                    $('.js_endtime').val('');\n                }\n                //储值规则--有退出，放置最后\n                var rules_t = localstorage.getone_storage('rules');\n                if (!rules_t) {\n                    return false;\n                }\n                var rules = JSON.parse(rules_t);\n                if (rules.length > 1) {\n                    $('.js_rule dd').eq(0).append('<i class=\"delete js_ruledelete\" onclick=\"delete_rule(this)\"></i>');\n                } else {\n                    $('.js_rule dd').eq(0).find('i.js_ruledelete').remove();\n                }\n                if (rules.length >= 4) {\n                    $('.js_rule').find('.add_rule').css('display', 'none');\n                    $('.js_rule').find('.add_rule_no').css('display', 'inline-block');\n                } else {\n                    $('.js_rule').find('.add_rule').css('display', 'inline-block');\n                    $('.js_rule').find('.add_rule_no').css('display', 'none');\n                }\n                for (var i = 0; i < rules.length; i++) {\n                    var chu_value = (rules[i].pay_amt / 100).toFixed(0);\n                    var song_value = (rules[i].present_amt / 100).toFixed(0);\n                    var index_value = rules[i].grid_index;\n                    if (i == 0) {\n                        $('.js_rule dd').eq(0).find('.js_chu').val(chu_value);\n                        $('.js_rule dd').eq(0).find('.js_song').val(song_value);\n                        $('.js_rule dd').eq(0).attr('data-index', index_value);\n                    } else {\n                        var dd_detail = '<dd data-index=\"' + index_value + '\">储值<input class=\"text text_short js_chu js_storule\" type=\"tel\" value=\"' + chu_value + '\" name=\"chu\" />元送<input class=\"text text_short js_song js_storule\" type=\"tel\" value=\"' + song_value + '\" name=\"song\" />元<i class=\"delete js_ruledelete\" onclick=\"delete_rule(this)\"></i></dd>';\n                        $('.js_rule').append(dd_detail);\n                    }\n                }\n            }\n\n            //获取店铺名称\n            function get_shopname(return_data) {\n                $('.js_shopname').val(return_data.merchant_name);\n            }\n        });\n    });\n});"]}