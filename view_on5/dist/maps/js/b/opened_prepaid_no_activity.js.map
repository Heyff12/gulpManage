{"version":3,"sources":["b/opened_prepaid_no_activity.js"],"names":["require","$","ajax_rule","native","if_menu","check_service_status","create_activity_success","return_data","feesExpire","expired","show","hide","is_qfgroup","jsonData","menu_data","menus","type","uri","icon","location","protocol","host","title","setNavMenu","cb","console","log","ret","on","closeToUri","goto_url","openUriData","openUri","navToUri"],"mappings":"AAAA,YAMAA,UAAS,qBAAsB,WAC3BA,SAAS,QAAS,YAAa,SAAU,WAAY,SAAUC,EAAGC,EAAWC,EAAQC,GAEjFH,EAAE,WA0BE,QAASI,KAELH,EAAUA,UAAU,+BAAgC,MAAO,OAAQ,GAAI,WAAYI,GAGvF,QAASA,GAAwBC,GAE7B,GAAIC,GAAaD,EAAYE,OACX,IAAdD,GAEAP,EAAE,uBAAuBS,OACzBT,EAAE,0BAA0BU,SAG5BV,EAAE,0BAA0BS,OAC5BT,EAAE,uBAAuBU,QAvCjC,GAAIC,IAAa,CAEjBV,GAAUA,UAAU,+BAAgC,MAAO,OAAQ,GAAI,WAAY,SAAUW,GACzFD,EAAaC,EAASD,YAG1B,IAAIE,IACAC,QACIC,KAAM,MACNC,IAAK,iDACLC,KAAMC,SAASC,SAAW,KAAOD,SAASE,KAAO,2CACjDC,MAAO,SAEPN,KAAM,MACNC,IAAKE,SAASC,SAAW,KAAOD,SAASE,KAAO,qCAChDH,KAAMC,SAASC,SAAW,KAAOD,SAASE,KAAO,6CACjDC,MAAO,SAIfnB,GAAOoB,WAAWT,EAAW,SAAUU,GACnCC,QAAQC,IAAIF,EAAGG,OAsBnBtB,IAGAJ,EAAE,uBAAuB2B,GAAG,QAAS,WAEjC,GAAIC,GAAaV,SAASC,SAAW,KAAOD,SAASE,KAAO,yCAC5DjB,GAAQ0B,SAASD,KAGrB5B,EAAE,gBAAgB2B,GAAG,QAAS,WAE1B,GAAIG,IACAd,IAAKL,EAAa,oBAAsB,6BAE5CT,GAAO6B,QAAQD,EAAa,SAAUP,GAElC,GAAIK,IACAZ,IAAKE,SAASC,SAAW,KAAOD,SAASE,KAAO,gCAEpDlB,GAAO8B,SAASJ,EAAY,SAAUL,GAClCC,QAAQC,IAAIF,EAAGG","file":"../../../js/b/opened_prepaid_no_activity.js","sourcesContent":["\"use strict\";\n\n/**\n * Created by mac on 17/2/10.\n */\n\nrequire(['../require-config'], function () {\n    require([\"zepto\", \"ajax_rule\", \"native\", \"if_menu\"], function ($, ajax_rule, native, if_menu) {\n        //付费开通储值服务\n        $(function () {\n            //$(document).ready(function(){}) DOM加载完成后执行一系列预定义好的函数\n            var is_qfgroup = false;\n            //请求service/info查询商户是否直营\n            ajax_rule.ajax_rule('/prepaid/v1/api/service/info', 'get', 'json', '', '.zheceng', function (jsonData) {\n                is_qfgroup = jsonData.is_qfgroup;\n            });\n            //设置右边的菜单按钮\n            var menu_data = {\n                menus: [{\n                    type: 'uri',\n                    uri: 'http://wx.qfpay.com/near-v2/save-currency.html',\n                    icon: location.protocol + '//' + location.host + '/prepaid/v1/static/new/img/ic_praise.png',\n                    title: '优秀案例'\n                }, {\n                    type: 'uri',\n                    uri: location.protocol + '//' + location.host + '/prepaid/v1/page/b/user_guide.html',\n                    icon: location.protocol + '//' + location.host + '/prepaid/v1/static/new/img/ic_question.png',\n                    title: '常见问题'\n                }]\n            };\n\n            native.setNavMenu(menu_data, function (cb) {\n                console.log(cb.ret);\n            });\n\n            function check_service_status() {\n                //使用默认的错误处理\n                ajax_rule.ajax_rule('/prepaid/v1/api/service/info', 'GET', 'json', '', '.zheceng', create_activity_success);\n            }\n\n            function create_activity_success(return_data) {\n                //请求成功的回调\n                var feesExpire = return_data.expired;\n                if (feesExpire == 1) {\n                    //费用过期显示续费按钮\n                    $('.section_footer_pay').show();\n                    $('.section_footer_create').hide();\n                } else {\n                    //费用没有过期显示创建活动\n                    $('.section_footer_create').show();\n                    $('.section_footer_pay').hide();\n                }\n            }\n\n            check_service_status();\n\n            //页面加载完成就发送请求，通过返回判断是立即续费和创建活动\n            $('.js_create_activity').on('click', function () {\n                //close all\n                var closeToUri = location.protocol + '//' + location.host + '/prepaid/v1/page/b/create_activity.html';\n                if_menu.goto_url(closeToUri);\n            });\n\n            $('.js_pay_fees').on('click', function () {\n                //close all\n                var openUriData = {\n                    uri: is_qfgroup ? \"hjsh://member/pay\" : 'nearmcht://view-member-pay'\n                };\n                native.openUri(openUriData, function (cb) {\n                    //不关心支付成功和失败都是要回首页的\n                    var closeToUri = {\n                        uri: location.protocol + '//' + location.host + '/prepaid/v1/page/b/index.html'\n                    };\n                    native.navToUri(closeToUri, function (cb) {\n                        console.log(cb.ret);\n                    });\n                });\n            });\n        });\n    });\n});"]}